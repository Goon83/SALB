%!PS-Adobe-2.0
%%Creator: dvips(k) 5.96.1 Copyright 2007 Radical Eye Software
%%Title: storage-interface.dvi
%%CreationDate: Thu Feb  4 12:40:15 2010
%%Pages: 9
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Roman Times-Bold CMSY10 Times-Italic Courier
%%DocumentPaperSizes: Letter
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -t letter storage-interface.dvi -o
%+ storage-interface.ps
%DVIPSParameters: dpi=600
%DVIPSSource:  TeX output 2010.02.04:1240
%%BeginProcSet: tex.pro 0 0
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/CharBuilder{save 3 1 roll S A/base get 2 index get S
/BitMaps get S get/Cd X pop/ctr 0 N Cdx 0 Cx Cy Ch sub Cx Cw add Cy
setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx sub Cy .1 sub]{Ci}imagemask
restore}B/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc 0 0
% File 8r.enc  TeX Base 1 Encoding  Revision 2.0  2002-10-30
%
% @@psencodingfile@{
%   author    = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry,
%                W. Schmidt, P. Lehman",
%   version   = "2.0",
%   date      = "27nov06",
%   filename  = "8r.enc",
%   email     = "tex-fonts@@tug.org",
%   docstring = "This is the encoding vector for Type1 and TrueType
%                fonts to be used with TeX.  This file is part of the
%                PSNFSS bundle, version 9"
% @}
% 
% The idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard encoding, ISO Latin 1, Windows ANSI including the euro symbol,
% MacRoman, and some extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% These are /dotlessj /ff /ffi /ffl.
% 
% (4) hyphen appears twice for compatibility with both ASCII and Windows.
%
% (5) /Euro was assigned to 128, as in Windows ANSI
%
% (6) Missing characters from MacRoman encoding incorporated as follows:
%
%     PostScript      MacRoman        TeXBase1
%     --------------  --------------  --------------
%     /notequal       173             0x16
%     /infinity       176             0x17
%     /lessequal      178             0x18
%     /greaterequal   179             0x19
%     /partialdiff    182             0x1A
%     /summation      183             0x1B
%     /product        184             0x1C
%     /pi             185             0x1D
%     /integral       186             0x81
%     /Omega          189             0x8D
%     /radical        195             0x8E
%     /approxequal    197             0x8F
%     /Delta          198             0x9D
%     /lozenge        215             0x9E
%
/TeXBase1Encoding [
% 0x00
 /.notdef /dotaccent /fi /fl
 /fraction /hungarumlaut /Lslash /lslash
 /ogonek /ring /.notdef /breve
 /minus /.notdef /Zcaron /zcaron
% 0x10
 /caron /dotlessi /dotlessj /ff
 /ffi /ffl /notequal /infinity
 /lessequal /greaterequal /partialdiff /summation
 /product /pi /grave /quotesingle
% 0x20
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus
 /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three
 /four /five /six /seven
 /eight /nine /colon /semicolon
 /less /equal /greater /question
% 0x40
 /at /A /B /C
 /D /E /F /G
 /H /I /J /K
 /L /M /N /O
% 0x50
 /P /Q /R /S
 /T /U /V /W
 /X /Y /Z /bracketleft
 /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c
 /d /e /f /g
 /h /i /j /k
 /l /m /n /o
% 0x70
 /p /q /r /s
 /t /u /v /w
 /x /y /z /braceleft
 /bar /braceright /asciitilde /.notdef
% 0x80
 /Euro /integral /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /Omega /radical /approxequal
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /Delta /lozenge /Ydieresis
% 0xA0
 /.notdef /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot /hyphen /registered /macron
% 0xB0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde
 /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def


%%EndProcSet
%%BeginProcSet: texps.pro 0 0
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]FontType 0
ne{/Metrics exch def dict begin Encoding{exch dup type/integertype ne{
pop pop 1 sub dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get
div def}ifelse}forall Metrics/Metrics currentdict end def}{{1 index type
/nametype eq{exit}if exch pop}loop}ifelse[2 index currentdict end
definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{dup
sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1 roll
mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def dup[
exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}if}
forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}def
end

%%EndProcSet
%%BeginFont: CMSY10
%!PS-AdobeFont-1.1: CMSY10 1.0
%%CreationDate: 1991 Aug 15 07:20:57
% Copyright (C) 1997 American Mathematical Society. All Rights Reserved.
11 dict begin
/FontInfo 7 dict dup begin
/version (1.0) readonly def
/Notice (Copyright (C) 1997 American Mathematical Society. All Rights Reserved) readonly def
/FullName (CMSY10) readonly def
/FamilyName (Computer Modern) readonly def
/Weight (Medium) readonly def
/ItalicAngle -14.035 def
/isFixedPitch false def
end readonly def
/FontName /CMSY10 def
/PaintType 0 def
/FontType 1 def
/FontMatrix [0.001 0 0 0.001 0 0] readonly def
/Encoding 256 array
0 1 255 {1 index exch /.notdef put} for
dup 15 /bullet put
readonly def
/FontBBox{-29 -960 1116 775}readonly def
currentdict end
currentfile eexec
D9D66F633B846A97B686A97E45A3D0AA052F09F9C8ADE9D907C058B87E9B6964
7D53359E51216774A4EAA1E2B58EC3176BD1184A633B951372B4198D4E8C5EF4
A213ACB58AA0A658908035BF2ED8531779838A960DFE2B27EA49C37156989C85
E21B3ABF72E39A89232CD9F4237FC80C9E64E8425AA3BEF7DED60B122A52922A
221A37D9A807DD01161779DDE7D31FF2B87F97C73D63EECDDA4C49501773468A
27D1663E0B62F461F6E40A5D6676D1D12B51E641C1D4E8E2771864FC104F8CBF
5B78EC1D88228725F1C453A678F58A7E1B7BD7CA700717D288EB8DA1F57C4F09
0ABF1D42C5DDD0C384C7E22F8F8047BE1D4C1CC8E33368FB1AC82B4E96146730
DE3302B2E6B819CB6AE455B1AF3187FFE8071AA57EF8A6616B9CB7941D44EC7A
71A7BB3DF755178D7D2E4BB69859EFA4BBC30BD6BB1531133FD4D9438FF99F09
4ECC068A324D75B5F696B8688EEB2F17E5ED34CCD6D047A4E3806D000C199D7C
515DB70A8D4F6146FE068DC1E5DE8BC5703711DA090312BA3FC00A08C453C609
C627A8BECD6E1FA14A3B02476E90AAD8B4700C400380BC9AFFBF7847EB28661B
9DC3AA0F44C533F2E07DCC4DE19D367BF223E33DC321D0247A0E6EF6ABC8FA52
15AE044094EF678A8726CD7C011F02BFF8AB6EAEEE391AD837120823BED0B5D8
F8B15245377871A64F78378BB4330149D6941F7A86FBFFC49B93C94155F5FA7D
F22E7214511C0A92693F4CDBF38411651540572F2DD70D924AE0F18E1CD581F3
C871399127FF5D07A868885B5FF7CDEB50B8323B2533DEF8DC973B1AE84FA0A2

0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
cleartomark
%%EndFont 
TeXDict begin 40258431 52099146 1000 600 600 (storage-interface.dvi)
@start /Fa 130[50 1[50 50 50 2[50 50 50 50 50 1[50 50
50 1[50 50 1[50 2[50 50 50 50 50 50 1[50 8[50 1[50 1[50
2[50 9[50 9[50 7[50 50 7[50 42[{TeXBase1Encoding ReEncodeFont}31
83.022 /Courier rf /Fb 134[50 50 1[50 55 33 39 44 1[55
50 55 83 28 55 1[28 55 50 33 44 55 44 1[50 11[72 1[55
72 1[61 2[94 3[39 2[61 66 14[50 50 50 50 50 50 2[25 1[25
4[33 36[55 2[{TeXBase1Encoding ReEncodeFont}39 99.6264
/Times-Bold rf /Fc 133[32 37 37 55 37 42 23 32 32 42
42 42 42 60 23 37 23 23 42 42 23 37 42 37 42 42 3[32
1[32 3[69 51 60 46 42 51 1[51 60 55 69 46 55 1[28 60
1[51 51 60 55 51 51 1[42 3[28 28 7[42 42 42 23 21 28
21 2[28 28 28 5[28 29[42 42 2[{TeXBase1Encoding ReEncodeFont}64
83.022 /Times-Italic rf /Fd 105[42 27[37 42 1[60 42 46
28 32 37 1[46 42 46 69 23 46 1[23 46 42 28 37 46 37 46
42 3[28 1[28 4[60 60 55 1[60 3[60 78 55 65 1[32 1[65
51 55 60 60 55 60 1[42 3[28 2[42 42 42 42 42 42 42 42
1[23 21 1[21 2[28 28 36[46 3[{TeXBase1Encoding ReEncodeFont}58
83.022 /Times-Bold rf /Fe 240[42 15[{}1 83.022 /CMSY10
rf /Ff 107[37 37 24[37 42 42 60 42 42 23 32 28 42 42
42 42 65 23 42 23 23 42 42 28 37 42 37 42 37 9[78 60
60 51 46 55 60 46 60 60 74 51 60 1[28 60 60 46 51 60
55 55 60 1[37 3[23 23 42 42 42 42 42 42 42 42 42 42 23
21 28 21 1[42 28 28 28 35[46 46 2[{TeXBase1Encoding ReEncodeFont}73
83.022 /Times-Roman rf /Fg 133[53 3[60 1[40 47 53 1[66
60 66 100 33 2[33 66 60 40 53 66 53 1[60 10[86 1[80 66
3[93 1[113 5[93 2[86 13[60 60 60 60 60 60 49[{
TeXBase1Encoding ReEncodeFont}31 119.552 /Times-Bold
rf /Fh 134[50 2[50 50 28 1[33 1[50 50 50 78 28 6[44 2[50
44 10[72 1[61 55 2[55 9[55 1[72 15[50 1[50 50 50 3[25
44[{TeXBase1Encoding ReEncodeFont}24 99.6264 /Times-Roman
rf /Fi 137[72 1[40 1[48 2[72 72 5[72 72 48 64 1[64 1[64
10[104 1[88 80 2[80 6[48 2[80 11[40 7[72 50[{
TeXBase1Encoding ReEncodeFont}19 143.462 /Times-Roman
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%BeginPaperSize: Letter
/setpagedevice where
{ pop << /PageSize [612 792] >> setpagedevice }
{ /letter where { pop letter } if }
ifelse
%%EndPaperSize
 end
%%EndSetup
%%Page: 1 1
TeXDict begin 1 0 bop 892 524 a Fi(T)-5 b(ro)n(v)n(e:)43
b(The)35 b(PVFS2)f(Storage)g(Interf)o(ace)1427 857 y
Fh(PVFS)26 b(De)n(v)o(elopment)c(T)-7 b(eam)1605 1142
y(February)26 b(4,)e(2010)42 1595 y Fg(1)120 b(Moti)o(v)o(ation)29
b(and)h(Goals)42 1872 y Ff(The)20 b(T)m(ro)o(v)o(e)e(storage)i(interf)o
(ace)f(will)h(be)g(the)g(lo)n(west)g(le)n(v)o(el)g(interf)o(ace)f(used)
h(by)f(the)h(PVFS)h(serv)o(er)e(for)h(storing)f(both)g(\002le)i(data)f
(and)42 1972 y(metadata.)k(It)d(will)f(be)g(used)g(by)f(indi)n(vidual)f
(serv)o(ers)i(\(and)f(serv)o(ers)g(only\))g(to)h(k)o(eep)f(track)h(of)g
(locally)f(stored)g(information.)k(There)42 2071 y(are)d(se)n(v)o(eral)
g(goals)g(and)g(ideas)g(that)g(we)h(should)e(k)o(eep)h(in)g(mind)f
(when)h(discussing)g(this)g(interf)o(ace:)167 2344 y
Fe(\017)41 b Fd(Multiple)33 b(storage)e(instances)p Ff(:)50
b(This)32 b(interf)o(ace)f(is)i(intended)e(to)h(hide)g(the)g(use)h(of)f
(multiple)f(storage)h(instances)g(for)250 2444 y(storage)24
b(of)h(data.)39 b(This)25 b(data)f(can)h(be)g(roughly)e(cate)o(gorized)
f(into)j(tw)o(o)g(types,)h(bytestream)e(and)g(k)o(e)o(yv)n(al)f
(spaces,)k(which)250 2543 y(are)20 b(described)f(in)h(further)f(detail)
h(belo)n(w)-5 b(.)167 2709 y Fe(\017)41 b Fd(Contiguous)23
b(and)h(noncontiguous)f(data)f(access)p Ff(:)33 b(The)23
b(\002rst)h(cut)f(of)h(this)g(interf)o(ace)e(will)j(probably)c(only)i
(handle)f(con-)250 2808 y(tiguous)f(data)i(access.)32
b(Ho)n(we)n(v)o(er)m(,)21 b(we)i(w)o(ould)f(lik)o(e)g(to)h(also)g
(support)e(some)h(form)g(of)g(noncontiguous)d(access.)32
b(W)-7 b(e)24 b(think)250 2908 y(that)g(this)h(will)g(be)f(done)f
(through)f(list)j(I/O)f(type)g(operations,)f(as)i(we)g(don')o(t)d
(necessarily)i(w)o(ant)g(an)o(ything)e(more)h(compli-)250
3008 y(cated)d(at)g(this)h(le)n(v)o(el.)167 3173 y Fe(\017)41
b Fd(Metadata)26 b(storage)p Ff(:)38 b(This)27 b(interf)o(ace)f(will)i
(be)f(used)g(as)h(a)f(b)n(uilding)f(block)g(for)g(storing)h(metadata)f
(in)h(addition)f(to)h(\002le)250 3273 y(data.)e(This)20
b(includes)f(e)o(xtended)g(metadata.)167 3438 y Fe(\017)41
b Fd(Nonblocking)32 b(semantics)p Ff(:)50 b(This)32 b(interf)o(ace)f
(will)i(be)f(completely)f(nonblocking)e(for)j(both)f(\002le)i(data)f
(and)g(metadata)250 3538 y(operations.)40 b(The)25 b(usual)g(ar)o
(gument)f(for)h(scalability)g(and)g(\003e)o(xible)g(interaction)g(with)
h(other)e(I/O)i(de)n(vices)f(applies)h(here.)250 3637
y(W)-7 b(e)31 b(should)e(try)h(to)h(pro)o(vide)d(this)i(functionality)f
(without)g(sacri\002cing)h(latenc)o(y)f(if)h(possible.)55
b Fc(The)30 b(interface)g(will)h(not)250 3737 y(r)m(equir)m(e)f
(interface)g(calls)h(to)f(be)h(made)e(in)i(or)m(der)f(for)h(pr)l(o)o
(gr)m(ess)g(to)f(occur)-9 b(.)55 b Ff(This)30 b(implies)h(that)f
(threads)g(will)h(be)f(used)250 3837 y(underneath)17
b(where)j(necessary)-5 b(.)167 4002 y Fe(\017)41 b Fd(Compatibility)18
b(with)h(\003o)o(ws)p Ff(:)25 b(Flo)n(ws)19 b(will)h(almost)f
(certainly)e(be)i(b)n(uilt)g(on)f(top)h(of)f(this)h(interf)o(ace.)24
b(Both)19 b(the)g(def)o(ault)f(BMI)250 4102 y(\003o)n(w)i
(implementation)e(and)i(custom)f(implementations)g(should)g(be)h(able)g
(to)g(use)h(this)f(interf)o(ace.)167 4267 y Fe(\017)41
b Fd(Consistency)22 b(semantics)p Ff(:)29 b(If)22 b(we)g(are)g(going)f
(to)h(support)f(consistenc)o(y)-5 b(,)20 b(locking,)h(etc,)i(then)e(we)
i(need)e(to)h(be)g(able)g(to)g(en-)250 4367 y(force)17
b(consistenc)o(y)h(semantics)g(at)h(the)f(storage)g(interf)o(ace)g(le)n
(v)o(el.)24 b(The)18 b(interf)o(ace)f(will)j(pro)o(vide)c(the)j(option)
e(for)h(serializing)250 4467 y(access)j(to)f(a)h(dataspace)e(and)h(a)g
(vtag)g(interf)o(ace.)167 4632 y Fe(\017)41 b Fd(Err)o(or)31
b(r)o(eco)o(v)o(ery)p Ff(:)45 b(The)31 b(system)g(must)g(detect)g(and)g
(report)f(errors)g(occurring)f(while)i(accessing)g(data)g(storage.)57
b(The)250 4732 y(system)24 b(may)f(or)g(may)g(not)g(implement)g
(redundanc)o(y)-5 b(,)20 b(journaling,)i(etc.)36 b(for)23
b(reco)o(v)o(ering)d(from)j(errors)g(resulting)f(in)i(data)250
4831 y(loss.)42 5104 y(Our)c(\002rst)h(cut)f(implementation)e(of)i
(this)h(interf)o(ace)e(will)i(ha)n(v)o(e)f(the)g(follo)n(wing)f
(restrictions:)167 5361 y Fe(\017)41 b Ff(only)19 b(one)h(type)g(of)f
(storage)h(for)g(bytestreams)f(and)h(one)f(type)h(for)f(k)o(e)o(yv)n
(als)h(will)h(be)f(supported)1926 5610 y(1)p eop end
%%Page: 2 2
TeXDict begin 2 1 bop 167 169 a Fe(\017)41 b Ff(consistenc)o(y)19
b(semantics)h(will)h(not)f(be)g(implemented)167 331 y
Fe(\017)41 b Ff(errors)19 b(will)i(be)f(reported,)e(b)n(ut)j(no)e
(measures)h(will)h(be)f(tak)o(en)g(to)g(reco)o(v)o(er)167
493 y Fe(\017)41 b Ff(noncontiguous)17 b(access)j(will)h(not)f(be)g
(enabled)167 656 y Fe(\017)41 b Ff(only)19 b(one)h(process/thread)e
(will)j(be)f(accessing)g(a)h(gi)n(v)o(en)e(storage)g(instance)h
(through)e(this)j(interf)o(ace)e(at)i(a)f(time)42 906
y Fc(P)-7 b(ARTIAL)19 b(COMPLETION)i(SEMANTICS)f(NEED)h(MUCH)g(W)n
(ORK!!!)42 1276 y Fg(2)120 b(Storage)29 b(space)h(concepts)42
1553 y Ff(A)21 b(serv)o(er)e(controls)h(one)f(storage)h(space.)42
1743 y(W)m(ithin)26 b(this)h(storage)e(space)h(are)g(some)g(number)f
(of)g Fc(collections)p Ff(,)i(which)f(are)g(akin)f(to)h(\002le)h
(systems.)43 b(Collections)26 b(serv)o(e)g(as)h(a)42
1843 y(mechanism)21 b(for)h(supporting)e(multiple)i(traditional)f
(\002le)i(systems)g(on)f(a)h(single)g(serv)o(er)e(and)h(for)g
(separating)f(the)h(use)h(of)f(v)n(arious)42 1943 y(physical)d
(resources.)24 b(\(Collections)19 b(can)h(span)f(multiple)g(underlying)
e(storage)i(de)n(vices,)g(and)h(hints)f(w)o(ould)h(be)f(used)h(in)g
(that)g(case)42 2042 y(to)f(specify)e(the)h(de)n(vice)f(on)h(which)g
(to)g(place)g(\002les.)25 b(This)18 b(concept)f(might)h(be)g(used)f(in)
i(systems)f(that)g(can)g(migrate)g(data)g(from)f(slo)n(w)42
2142 y(storage)j(to)g(f)o(aster)g(storage)g(as)h(well\).)42
2333 y(T)-7 b(w)o(o)31 b(collections)e(will)h(be)g(created)g(for)f
(each)g(\002le)i(system:)45 b(one)29 b(collection)g(will)i(support)e
(the)h(dataspaces)f(needed)g(for)g(the)42 2433 y(\002le)g(system')-5
b(s)28 b(data)g(and)g(metadata)f(objects.)48 b(A)28 b(second)f
(collection)g(will)i(be)f(created)f(for)g(administrati)n(v)o(e)f
(purposes.)47 b(If)28 b(the)42 2532 y(underlying)20 b(implementation)g
(needs)i(to)h(perform)d(disk)j(i/o,)g(for)f(e)o(xample,)f(it)i(can)g
(use)f(bstream)g(and)g(k)o(e)o(yv)n(al)f(objects)i(from)e(the)42
2632 y(administration)e(collection.)42 2823 y(A)k(collection)e(id)h
(will)h(be)f(used)g(in)g(conjunction)e(with)i(other)g(parameters)f(in)h
(order)f(to)h(specify)f(a)i(unique)e(entity)g(on)h(a)h(serv)o(er)e(to)
42 2922 y(access)g(or)f(modify)-5 b(,)18 b(just)j(as)g(a)f(\002le)h
(system)f(ID)h(might)e(be)h(used.)42 3292 y Fg(3)120
b(Dataspace)29 b(concepts)42 3569 y Ff(This)j(storage)g(interf)o(ace)f
(stores)h(and)f(accesses)i(what)f(we)g(will)g(call)h
Fc(dataspaces)p Ff(.)58 b(These)32 b(are)g(logical)f(collections)h(of)f
(data)42 3669 y(or)o(ganized)d(in)j(one)f(of)h(tw)o(o)g(possible)f(w)o
(ays.)57 b(The)31 b(\002rst)g(or)o(ganization)d(for)i(a)h(dataspace)f
(is)i(the)f(traditional)e(\223byte)h(stream\224.)42 3768
y(This)23 b(term)f(refers)g(to)g(arbitrary)f(binary)g(data)h(that)h
(can)f(be)g(referenced)e(using)i(of)n(fsets)g(and)g(sizes.)33
b(The)22 b(second)f(or)o(ganization)e(is)42 3868 y(\223k)o(e)o(yw)o
(ord/v)n(alue\224)j(data.)38 b(This)25 b(term)f(refers)h(to)g
(information)d(that)j(is)g(accessed)g(in)g(a)g(simpli\002ed)f
(database-lik)o(e)g(manner)-5 b(.)37 b(The)42 3968 y(data)20
b(is)h(inde)o(x)o(ed)c(by)j(w)o(ay)g(of)f(a)h(v)n(ariable)f(length)g(k)
o(e)o(y)g(rather)g(than)g(an)h(of)n(fset)f(and)g(size.)26
b(Both)20 b(k)o(e)o(yw)o(ord)e(and)h(v)n(alue)g(are)h(arbitrary)42
4067 y(byte)h(arrays)f(with)i(a)f(length)f(parameter)g(\(i.e.)49
b(need)20 b(not)h(be)g(readable)f(strings\).)27 b(W)-7
b(e)22 b(will)g(refer)f(to)g(a)g(dataspace)g(or)o(ganized)d(as)k(a)42
4167 y(byte)g(stream)h(as)g(a)h(bytestream)d(dataspace)h(or)g(simply)h
(a)g Fc(bytestr)m(eam)f(space)p Ff(,)h(and)f(a)h(dataspace)f(or)o
(ganized)e(by)i(k)o(e)o(yw)o(ord/v)n(alue)42 4267 y(pairs)d(as)h(a)f(k)
o(e)o(yv)n(al)e(dataspace)h(or)h Fc(k)o(e)n(yval)f(space)p
Ff(.)24 b(Each)18 b(dataspace)g(will)i(ha)n(v)o(e)e(an)h(identi\002er)f
(that)h(is)h(unique)d(to)i(its)h(serv)o(er)m(,)e(which)42
4366 y(we)29 b(will)g(simply)f(call)g(a)h Fc(handle)p
Ff(.)48 b(Physically)27 b(these)i(dataspaces)e(may)h(be)g(stored)g(in)g
(an)o(y)g(number)e(of)i(w)o(ays)h(on)f(underlying)42
4466 y(storage.)42 4657 y(Here)20 b(are)g(some)g(potential)g(uses)h(of)
e(each)h(type:)167 4907 y Fe(\017)41 b Ff(Byte)20 b(stream)349
5069 y Fd(\226)41 b Ff(traditional)20 b(\002le)g(data)349
5198 y Fd(\226)41 b Ff(binary)19 b(metadata)h(storage)f(\(as)i(is)g
(currently)e(done)g(in)h(PVFS)h(1\))167 5361 y Fe(\017)41
b Ff(K)n(e)o(y/v)n(alue)1926 5610 y(2)p eop end
%%Page: 3 3
TeXDict begin 3 2 bop 349 169 a Fd(\226)41 b Ff(e)o(xtended)19
b(metadata)g(attrib)n(utes)349 302 y Fd(\226)41 b Ff(directory)19
b(entries)42 559 y(In)f(our)e(design)h(thus)h(f)o(ar)f(\(reference)f
(the)i(system)f(interf)o(ace)g(documents\))f(we)i(ha)n(v)o(e)f
(de\002ned)f(four)h(types)g(of)g Fc(system)i(le)o(vel)e(objects)p
Ff(.)42 659 y(These)33 b(are)f(data)g(\002les,)k(metadata)c(\002les,)k
(directories,)f(and)c(symlinks.)61 b(All)34 b(four)d(of)h(these)h(will)
g(be)f(implemented)f(using)h(a)42 758 y(combination)d(of)i(bytestream)f
(and/or)g(k)o(e)o(yv)n(al)g(dataspaces.)58 b(At)32 b(the)f(storage)g
(interf)o(ace)f(le)n(v)o(el)h(there)g(is)h(no)f(real)g(distinction)42
858 y(between)20 b(dif)n(ferent)e(types)i(of)g(system)h(le)n(v)o(el)e
(objects.)42 1229 y Fg(4)120 b(Vtag)29 b(concepts)42
1506 y Ff(Vtags)d(are)f(a)g(capability)f(that)h(can)g(be)g(used)g(to)g
(implement)f(atomic)h(updates)f(in)h(shared)f(storage)h(systems.)40
b(In)25 b(this)g(case)h(the)o(y)42 1606 y(can)21 b(be)g(used)f(to)h
(implement)f(atomic)g(access)h(to)g(a)g(set)h(of)f(shared)f(storage)g
(de)n(vices)g(through)f(the)h(storage)h(interf)o(ace.)k(T)-7
b(o)21 b(clarify)-5 b(,)42 1705 y(these)28 b(w)o(ould)e(be)h(of)g
(particular)f(use)i(when)e(multiple)h(threads)f(are)i(using)e(the)h
(storage)g(interf)o(ace)f(to)i(access)g(local)f(storage)f(or)42
1805 y(when)20 b(multiple)f(serv)o(ers)h(are)g(accessing)g(shared)g
(storage)f(de)n(vices)h(such)g(as)h(a)f(MySQL)g(database)g(or)g(SAN)g
(storage.)42 1996 y(This)k(section)g(can)f(be)h(skipped)f(if)h(you)f
(are)h(not)f(interested)g(in)h(consistenc)o(y)f(semantics.)35
b(Vtags)24 b(will)h(probably)c(not)j(be)g(imple-)42 2096
y(mented)19 b(in)i(the)f(\002rst)h(cut)f(an)o(yw)o(ay)-5
b(.)42 2425 y Fb(4.1)99 b(Phil')l(s)25 b(poor)g(explanation)42
2672 y Ff(Vtags)19 b(are)g(an)f(approach)f(to)i(ensuring)e(consistenc)o
(y)g(for)h(multiple)g(readers)g(and)g(writers)h(that)f(a)n(v)n(oids)h
(the)g(use)f(of)h(locks)f(and)g(their)42 2771 y(associated)27
b(problems)e(within)h(a)h(distrib)n(uted)e(en)m(vironment.)41
b(These)26 b(problems)f(include)h(comple)o(xity)-5 b(,)25
b(poor)g(performance)f(in)42 2871 y(the)d(general)e(case,)h(and)g(a)o
(wkw)o(ard)f(error)g(reco)o(v)o(ery)-5 b(.)42 3062 y(A)24
b(vtag)e(fundamentally)f(pro)o(vides)g(a)i(v)o(ersion)f(number)g(for)g
(an)o(y)g(re)o(gion)g(of)h(a)g(byte)g(stream)g(or)f(an)o(y)h(indi)n
(vidual)e(k)o(e)o(y/v)n(alue)g(pair)-5 b(.)42 3161 y(This)21
b(allo)n(ws)f(the)h(implementation)d(of)i(an)g(optimistic)h(approach)d
(to)i(consistenc)o(y)-5 b(.)24 b(T)-7 b(ak)o(e)21 b(the)f(e)o(xample)f
(of)h(a)h(read-modify-write)42 3261 y(operation.)k(The)20
b(caller)h(\002rst)g(reads)g(a)g(data)f(re)o(gion,)f(obtaining)g(a)i(v)
o(ersion)f(tag)g(in)h(the)g(process.)26 b(It)21 b(then)f(modi\002es)g
(it')-5 b(s)22 b(o)n(wn)e(cop)o(y)42 3361 y(of)28 b(the)h(data.)49
b(When)28 b(it)h(writes)f(the)h(data)f(back,)h(it)g(gi)n(v)o(es)f(the)g
(vtag)g(back)g(to)g(the)g(storage)g(interf)o(ace.)48
b(The)28 b(storage)g(interf)o(ace)42 3460 y(compares)d(the)h(gi)n(v)o
(en)f(vtag)g(against)h(the)g(current)e(vtag)i(for)f(the)h(re)o(gion.)41
b(If)26 b(the)g(vtags)g(match,)g(it)h(indicates)f(that)g(the)g(data)g
(has)42 3560 y(not)e(been)g(modi\002ed)f(since)h(it)h(w)o(as)g(read)f
(by)g(the)g(caller)m(,)h(and)f(the)g(operation)e(succeeds.)37
b(If)24 b(the)h(vtags)f(do)g(not)g(match,)g(then)g(the)42
3660 y(operation)19 b(f)o(ails)i(and)e(the)h(caller)g(must)h(retry)e
(the)h(operation.)42 3851 y(This)h(is)g(an)f(optimistic)g(approach)e
(in)i(that)h(the)f(caller)g(al)o(w)o(ays)g(assumes)h(that)f(the)g(re)o
(gion)f(has)i(not)e(been)h(modi\002ed.)42 4041 y(Man)o(y)f(dif)n
(ferent)g(locking)g(primiti)n(v)o(es)g(can)h(be)g(b)n(uilt)g(upon)f
(the)h(vtag)g(concept...)42 4370 y Fb(4.2)99 b(Use)25
b(of)g(vtags)42 4617 y Ff(Layers)k(abo)o(v)o(e)e(tro)o(v)o(e)h(can)h
(tak)o(e)g(adv)n(antage)e(of)i(vtags)g(as)h(a)f(w)o(ay)g(to)g(simplify)
g(the)g(enforcement)d(of)j(consistenc)o(y)f(semantics)42
4717 y(\(rather)16 b(than)h(k)o(eeping)f(complicated)g(lists)i(of)f
(concurrent)e(operations,)h(simply)h(use)g(the)g(vtag)g(f)o(acility)g
(to)h(ensure)e(that)i(operations)42 4817 y(occur)j(atomically\).)28
b(Alternati)n(v)o(ely)21 b(the)o(y)g(could)f(be)i(used)g(to)f(handle)g
(the)h(case)g(of)g(tro)o(v)o(e)e(resources)h(shared)g(by)g(multiple)g
(upper)42 4916 y(layers.)49 b(Finally)28 b(the)o(y)f(might)g(be)h(used)
g(in)h(conjunction)c(with)j(higher)f(le)n(v)o(el)h(consistenc)o(y)f
(control)g(in)h(some)g(complimentary)42 5016 y(f)o(ashion)20
b(\(dunno)e(yet...\).)1926 5610 y(3)p eop end
%%Page: 4 4
TeXDict begin 4 3 bop 1253 225 a Ff(T)-7 b(able)20 b(1:)25
b(Error)19 b(v)n(alues)h(for)g(storage)f(interf)o(ace)p
846 338 2203 4 v 844 438 4 100 v 896 408 a(V)-9 b(alue)p
1612 438 V 577 w(Meaning)p 3046 438 V 846 441 2203 4
v 844 541 4 100 v 896 511 a(TR)m(O)l(VE)p 1171 511 25
4 v 29 w(ENOENT)p 1612 541 4 100 v 135 w(no)20 b(such)g(dataspace)p
3046 541 V 844 640 V 896 610 a(TR)m(O)l(VE)p 1171 610
25 4 v 29 w(EIO)p 1612 640 4 100 v 329 w(I/O)h(error)p
3046 640 V 844 740 V 896 710 a(TR)m(O)l(VE)p 1171 710
25 4 v 29 w(ENOSPC)p 1612 740 4 100 v 150 w(no)f(space)g(on)g(storage)f
(de)n(vice)p 3046 740 V 844 839 V 896 810 a(TR)m(O)l(VE)p
1171 810 25 4 v 29 w(EVT)-8 b(A)m(G)p 1612 839 4 100
v 197 w(vtag)20 b(didn')o(t)f(match)p 3046 839 V 844
939 V 896 909 a(TR)m(O)l(VE)p 1171 909 25 4 v 29 w(ENOMEM)p
1612 939 4 100 v 98 w(unable)g(to)i(allocate)f(memory)e(for)i
(operation)p 3046 939 V 844 1039 V 896 1009 a(TR)m(O)l(VE)p
1171 1009 25 4 v 29 w(EINV)-11 b(AL)p 1612 1039 4 100
v 169 w(in)m(v)n(alid)19 b(input)h(parameter)p 3046 1039
V 846 1042 2203 4 v 42 1374 a Fg(5)120 b(The)30 b(storage)e(interface)
42 1651 y Ff(In)g(this)h(section)f(we)h(describe)e(all)i(the)g
(functions)e(that)h(mak)o(e)g(up)g(the)g(storage)g(interf)o(ace.)48
b(The)28 b(storage)g(interf)o(ace)f(functions)42 1751
y(can)d(be)g(di)n(vided)f(into)g(four)g(cate)o(gories:)32
b(dataspace)24 b(management)d(functions,)j(bytestream)f(access)h
(functions,)g(k)o(e)o(yv)n(al)e(access)42 1850 y(functions,)34
b(and)e(completion)f(test)i(functions.)61 b(The)32 b(access)h
(functions)e(can)h(be)h(further)e(subdi)n(vided)f(into)i(contiguous)f
(and)42 1950 y(noncontiguous)17 b(access)k(capabilities.)42
2141 y(First)i(we)e(describe)g(the)g(return)g(v)n(alues)g(and)f(error)h
(v)n(alues)g(for)g(the)g(interf)o(ace.)28 b(Then)20 b(we)i(describe)f
(special)g(vtag)g(v)n(alues)g(and)g(the)42 2240 y(implementation)f(of)i
(k)o(e)o(ys.)31 b(Ne)o(xt)22 b(we)g(describe)g(the)g(dataspace)f
(management)f(functions.)30 b(Ne)o(xt)22 b(we)g(describe)g(the)g
(contiguous)42 2340 y(and)e(noncontiguous)d(dataspace)i(access)i
(functions.)i(Finally)d(we)h(co)o(v)o(er)e(the)h(completion)e(test)j
(functions.)42 2669 y Fb(5.1)99 b(Retur)o(n)26 b(v)o(alues)42
2916 y Ff(Unless)21 b(otherwise)f(noted,)f(all)h(functions)f(return)g
(an)h(inte)o(ger)f(with)i(three)e(possible)h(v)n(alues:)167
3173 y Fe(\017)41 b Ff(0:)25 b(Success.)g(If)19 b(the)h(operation)e(w)o
(as)i(nonblocking,)c(then)j(this)i(return)d(v)n(alue)h(indicates)g(the)
h(caller)f(must)h(test)g(for)f(comple-)250 3273 y(tion)h(later)-5
b(.)167 3439 y Fe(\017)41 b Ff(1:)h(Success)29 b(with)f(immediate)g
(completion.)48 b(No)28 b(later)h(testing)f(is)i(required,)e(and)g(no)g
(handle)f(is)j(returned)c(for)i(use)h(in)250 3539 y(testing.)167
3705 y Fe(\017)41 b Ff(-errno:)23 b(F)o(ailure.)i(The)20
b(error)f(code)g(is)i(encoded)e(in)h(the)g(ne)o(gati)n(v)o(e)e(return)h
(v)n(alue.)42 4034 y Fb(5.2)99 b(Err)n(or)27 b(v)o(alues)42
4281 y Ff(T)-7 b(able)20 b(1)h(sho)n(ws)f(v)n(alues.)k(All)d(v)n(alues)
f(will)h(be)f(returned)f(as)h(inte)o(gers)g(in)g(the)g(nati)n(v)o(e)g
(format)f(\(size)h(and)g(byte)g(order\).)42 4472 y Fc(Needs)h(to)f(be)g
(\003eshed)g(out.)k(Need)d(to)f(pic)n(k)g(a)h(r)m(easonable)d(pr)m
(e\002x.)42 4663 y(Phil:)41 b(Once)28 b(this)h(is)g(\003eshed)f(out,)h
(can)f(we)h(apply)e(the)i(same)f(sort)h(of)g(sc)o(heme)e(to)i(BMI?)f
(BMI)g(doesn')n(t)f(have)g(a)i(particularly)42 4762 y(informative)20
b(err)l(or)h(r)m(eporting)e(mec)o(hanism.)42 4953 y(Rob:)40
b(De\002nitely)-5 b(.)49 b(I)28 b(would)g(r)m(eally)g(lik)o(e)h(to)f
(mak)o(e)g(sur)m(e)g(that)g(in)g(addition)f(to)h(g)o(etting)g(err)l(or)
h(values)f(bac)n(k,)h(the)f(err)l(or)h(values)42 5053
y(actually)20 b(mak)o(e)g(sense)g(:\).)25 b(This)c(was)g(\(and)e(still)
i(is)g(in)g(some)f(cases\))g(a)g(r)m(eal)h(pr)l(oblem)f(for)g(PVFS1.)
1926 5610 y Ff(4)p eop end
%%Page: 5 5
TeXDict begin 5 4 bop 42 169 a Fb(5.3)99 b(Flags)24 b(r)n(elated)i(to)f
(vtags)42 416 y Ff(As)d(mentioned)d(earlier)m(,)g(the)i(usage)f(of)h
(vtags)f(is)i(not)e(manditory)-5 b(.)24 b(Therefore)19
b(we)i(de\002ne)f(tw)o(o)h(\003ags)g(v)n(alues)f(that)h(can)g(be)f
(used)h(to)42 515 y(control)e(the)h(beha)n(vior)f(of)h(the)g(calls)h
(with)f(respect)g(to)h(vtags:)42 706 y Fc(T)o(ODO:)f(pic)n(k)h(a)f(r)m
(easonable)e(pr)m(e\002x)i(for)h(our)f(\003a)o(gs.)167
980 y Fe(\017)41 b Fd(FLA)-5 b(G)p 481 980 25 4 v 30
w(VT)e(A)i(G)p Ff(:)25 b(Indicates)e(that)i(the)f(vtag)g(is)h(v)n
(alid.)37 b(The)24 b(caller)g(does)g(not)g(ha)n(v)o(e)g(a)h(v)n(alid)f
(vtag)f(for)h(input,)g(nor)g(does)g(he)250 1080 y(desire)c(a)g(v)n
(alid)g(vtag)g(in)g(response.)167 1246 y Fe(\017)41 b
Fd(FLA)-5 b(G)p 481 1246 V 30 w(VT)e(A)i(G)p 739 1246
V 30 w(RETURN)p Ff(:)22 b(Indicates)e(that)i(the)f(caller)g(wishes)h
(to)f(obtain)f(a)i(vtag)e(from)h(the)g(operation.)26
b(Ho)n(we)n(v)o(er)m(,)19 b(the)250 1346 y(caller)h(does)g(not)g(wish)g
(to)h(use)f(a)h(vtag)e(for)h(input.)42 1620 y(By)h(def)o(ault)e(calls)i
(ignore)e(vtag)h(v)n(alues)g(on)g(input)f(and)h(do)f(not)h(create)g
(vtag)g(v)n(alues)g(for)f(output.)42 1948 y Fb(5.4)99
b(Implementation)26 b(of)f(k)o(eys,)g(v)o(alues,)g(and)g(hints)42
2195 y Fc(T)o(ODO:)20 b(sync.)25 b(with)c(code)f(on)f(data)p
1108 2195 V 29 w(sz)i(element.)42 2469 y Fa(struct)49
b(TROVE_keyval)f({)242 2569 y(void)491 2584 y(*)640 2569
y(buffer;)242 2669 y(int32_t)g(buffer_sz;)242 2768 y(int32_t)g
(data_sz;)42 2868 y(};)42 2968 y(typedef)h(struct)f(TROVE_keyval)g
(TROVE_keyval_s;)42 3242 y Ff(K)n(e)o(ys,)18 b(v)n(alues,)g(and)f
(hints)g(are)h(all)g(implemented)e(with)i(the)f(same)h(TR)m(O)l(VE)p
2238 3242 V 29 w(k)o(e)o(yv)n(al)f(structure)g(\(do)f(we)i(w)o(ant)g(a)
g(dif)n(ferent)e(name?\),)42 3341 y(sho)n(wn)k(abo)o(v)o(e.)j(K)n(e)o
(ys)d(and)g(v)n(alues)f(used)h(in)h(k)o(e)o(yv)n(al)e(spaces)h(are)g
(arbitrary)f(binary)g(data)h(v)n(alues)g(with)g(an)g(associated)g
(length.)42 3532 y(Hint)27 b(k)o(e)o(ys)g(and)f(v)n(alues)h(ha)n(v)o(e)
f(the)h(additional)f(constraint)f(of)i(being)f(null-terminated,)g
(readable)g(strings.)45 b(This)27 b(mak)o(es)f(them)42
3632 y(v)o(ery)19 b(similar)i(to)f(MPI)p 699 3632 V 30
w(Info)f(k)o(e)o(y/v)n(alue)f(pairs.)42 3823 y Fc(T)o(ODO:)i(we)h
(should)e(b)n(uild)h(hints)g(out)g(of)h(a)f(pair)g(of)g(the)h(TR)m(O)l
(VE)p 1941 3823 V 28 w(k)o(e)n(yvals.)k(W)-8 b(e'll)21
b(call)f(them)g(a)g(TR)m(O)l(VE)p 3091 3823 V 29 w(hint)p
3250 3823 V 29 w(s)h(in)g(her)m(e)f(for)g(now)-6 b(.)42
4152 y Fb(5.5)99 b(Functions)42 4399 y Fc(Note:)26 b(need)19
b(to)h(add)g(valid)f(err)l(or)j(values)e(for)g(eac)o(h)f(function.)42
4590 y(T)o(ODO:)h(\002nd)f(a)i(better)f(format)g(for)h(function)e
(descriptions.)42 4902 y Fd(5.5.1)81 b(IDs)42 5149 y
Ff(In)21 b(this)h(conte)o(xt,)e(IDs)i(are)f(unique)f(identi\002ers)h
(assigned)f(to)i(each)f(storage)f(interf)o(ace)h(operation.)26
b(The)o(y)20 b(are)h(used)g(as)h(handles)f(to)42 5249
y(test)j(for)f(completion)e(of)i(operations)f(once)g(the)o(y)h(ha)n(v)o
(e)g(been)f(submitted.)33 b(If)23 b(an)g(operation)f(completes)g
(immediately)-5 b(,)22 b(then)h(the)42 5348 y(ID)e(\002eld)f(should)f
(be)h(ignored.)1926 5610 y(5)p eop end
%%Page: 6 6
TeXDict begin 6 5 bop 42 169 a Ff(These)22 b(IDs)f(are)h(only)e(unique)
g(in)i(the)f(conte)o(xt)g(of)g(the)g(storage)g(interf)o(ace,)f(so)i
(upper)e(layers)i(may)e(ha)n(v)o(e)h(to)h(handle)e(management)42
268 y(of)g(multiple)g(ID)g(spaces)h(\(if)f(w)o(orking)e(with)j(both)e
(a)i(storage)e(interf)o(ace)h(and)f(a)i(netw)o(ork)e(interf)o(ace,)g
(for)g(instance\).)42 459 y(The)h(type)g(for)f(these)i(IDs)f(is)i(TR)m
(O)l(VE)p 1157 459 25 4 v 29 w(op)p 1270 459 V 29 w(id.)42
772 y Fd(5.5.2)81 b(User)21 b(pointers)42 1019 y Ff(Each)g(function)d
(allo)n(ws)j(the)g(user)g(to)g(pass)g(in)g(a)g(pointer)e(v)n(alue)h
(\(v)n(oid)g(*\).)26 b(This)21 b(v)n(alue)f(is)i(returned)c(by)j(the)f
(test)i(functions,)d(and)h(it)42 1118 y(allo)n(ws)h(for)e(quick)h
(reference)e(to)i(user)g(data)h(structures)e(associated)h(with)g(the)h
(completed)d(operation.)42 1309 y(T)-7 b(o)27 b(moti)n(v)n(ate,)f
(normally)f(there)h(is)h(some)f(data)h(at)g(the)f(caller')-5
b(s)27 b(le)n(v)o(el)f(that)g(corresponds)e(with)j(the)f(tro)o(v)o(e)f
(operation.)42 b(W)m(ithout)42 1409 y(some)23 b(help,)f(the)g(caller)h
(w)o(ould)f(ha)n(v)o(e)f(to)i(map)f(IDs)h(for)f(completed)f(operations)
g(back)g(to)i(the)f(caller)h(data)f(structures)g(manually)-5
b(.)42 1508 y(By)22 b(pro)o(viding)c(a)k(parameter)d(that)j(the)f
(caller)g(can)g(pass)g(in,)h(the)o(y)e(can)h(directly)f(reference)g
(these)h(structures)f(on)h(tro)o(v)o(e)f(operation)42
1608 y(completion.)42 1920 y Fd(5.5.3)81 b(Dataspace)19
b(management)167 2111 y Fe(\017)41 b Fd(ds)p 333 2111
V 30 w(cr)o(eate\()22 b([in]coll)p 880 2111 V 29 w(id,)j
([in/out]handle,)f([in]bitmask,)h([in]type,)e([in/out]hint,)h([in]user)
p 3081 2111 V 30 w(ptr)-8 b(,)25 b([out]id)e(\))p Ff(:)32
b(Creates)250 2211 y(a)19 b(ne)n(w)g(storage)g(interf)o(ace)f(object.)
24 b(The)19 b(interf)o(ace)g(will)g(\002ll)i(an)o(y)d(an)o(y)g(portion)
g(of)h(the)g(handle)f(that)h(is)h(not)f(already)f(\002lled)i(in)250
2311 y(and)h(ensure)h(that)g(it)h(is)g(unique.)29 b(F)o(or)22
b(e)o(xample,)f(if)h(the)g(caller)g(w)o(ants)h(to)f(specify)f(the)h
(\002rst)h(16)f(bits)h(of)e(the)h(handle,)g(it)g(may)250
2410 y(do)c(so)g(by)g(setting)g(the)g(appropriate)e(bits)j(and)e(then)h
(specifying)f(with)h(the)g(bitmask)g(that)g(the)g(storage)g(interf)o
(ace)f(should)g(not)250 2510 y(modify)h(those)i(bits.)250
2643 y(The)c(type)g(\002eld)h(can)f(be)g(used)g(by)g(the)h(caller)f(to)
h(assign)f(an)h(arbitrary)e(inte)o(ger)g(type)h(to)h(the)f(object.)23
b(This)17 b(may)-5 b(,)16 b(for)g(e)o(xample,)250 2742
y(be)j(used)h(to)f(distinguish)g(between)f(directories,)h(symlinks,)g
(data\002les,)g(and)g(metadata)g(\002les.)26 b(The)19
b(storage)g(interf)o(ace)f(does)250 2842 y(not)i(assign)g(an)o(y)f
(meaning)g(to)h(the)h(type)e(v)n(alue.)25 b Fc(Do)20
b(we)h(e)o(ven)e(need)h(this)h(type)f(\002eld?)250 2975
y Ff(The)e(hint)h(\002eld)g(may)f(be)h(used)f(to)h(specify)g(what)f
(type)h(of)f(underlying)e(storage)i(should)g(be)h(used)f(for)h(this)g
(dataspace)f(in)h(the)250 3074 y(case)h(where)g(multiple)g(potential)f
(underlying)e(storage)j(methods)f(are)h(a)n(v)n(ailable.)167
3241 y Fe(\017)41 b Fd(ds)p 333 3241 V 30 w(r)o(emo)o(v)o(e\()19
b([in]handle,)h([in]user)p 1354 3241 V 30 w(ptr)-8 b(,)20
b([out]id)g(\))p Ff(:)25 b(Remo)o(v)o(es)20 b(an)g(e)o(xisting)f
(object)h(from)f(the)h(system.)167 3407 y Fe(\017)41
b Fd(ds)p 333 3407 V 30 w(v)o(erify\()24 b([in]coll)p
873 3407 V 29 w(id,)i([in]handle,)g([out]type,)e([in]user)p
2077 3407 V 30 w(ptr)-8 b(,)26 b([out]id)e(\))p Ff(:)35
b(V)-9 b(eri\002es)25 b(that)g(an)g(object)f(e)o(xists)h(with)g(the)250
3506 y(speci\002ed)g(handle.)41 b(If)25 b(the)h(object)f(does)h(e)o
(xist,)h(then)e(the)h(type)f(of)h(the)g(object)f(is)i(also)f(returned.)
40 b(Useful)25 b(for)g(v)o(erifying)250 3606 y(sanity)20
b(of)g(handles)f(pro)o(vided)f(by)i(client.)167 3772
y Fe(\017)41 b Fd(ds)p 333 3772 V 30 w(getattr\()24 b([in]coll)p
907 3772 V 29 w(id,)29 b([in]handle,)f([out]ds)p 1719
3772 V 29 w(attr)-8 b(,)27 b([in]user)p 2200 3772 V 29
w(ptr)-8 b(,)29 b([out]id)c(\))p Ff(:)38 b(Obtains)27
b(statistics)g(about)f(the)g(gi)n(v)o(en)250 3871 y(dataspace)c(that)i
(aren')o(t)e(actually)g(stored)h(within)g(the)g(dataspace.)34
b(This)23 b(may)g(include)f(information)f(such)i(as)h(number)d(of)250
3971 y(k)o(e)o(y/v)n(alue)d(pairs,)i(size)h(of)f(byte)g(stream,)f
(access)i(statistics,)h(on)e(what)g(medium)f(it)i(is)g(stored,)e(etc.)
167 4137 y Fe(\017)41 b Fd(ds)p 333 4137 V 30 w(setattr\(\))19
b(???)167 4303 y Fe(\017)41 b Fd(ds)p 333 4303 V 30 w(hint\()22
b([in]coll)p 806 4303 V 29 w(id,)g([in]handle,)f([in/out]hint)f(\);)p
Ff(:)28 b(P)o(asses)22 b(a)f(hint)g(to)h(the)f(underlying)d(tro)o(v)o
(e)i(implementation.)26 b(Used)250 4403 y(to)20 b(indicate)g(caching)f
(needs,)g(access)i(patterns,)e(be)o(gin/end)f(of)i(use,)g(etc.)167
4569 y Fe(\017)41 b Fd(ds)p 333 4569 V 30 w(migrate\()21
b([in]coll)p 940 4569 V 29 w(id,)i([in]handle,)f([in/out]hint,)f
([in]user)p 2216 4569 V 30 w(ptr)-8 b(,)22 b([out]id)g(\);)p
Ff(:)28 b(Used)22 b(to)g(indicate)g(that)f(a)i(dataspace)250
4668 y(should)18 b(be)i(migrated)e(to)i(another)e(medium.)24
b Fc(could)19 b(this)h(be)f(done)g(with)h(just)g(the)g(hint)f(call?)25
b(having)18 b(an)i(id)f(in)h(this)g(case)g(is)250 4768
y(particularly)f(useful)h(...)25 b(so)c(we)g(know)f(the)g(oper)o(ation)
f(is)i(completed...)42 5080 y Fd(5.5.4)81 b(Byte)21 b(str)o(eam)e
(access)42 5327 y Ff(P)o(arameters)h(in)g(read)g(and)f(write)i(at)f
(calls)h(are)f(ordered)f(similarly)h(to)g(pread)f(and)h(pwrite.)1926
5610 y(6)p eop end
%%Page: 7 7
TeXDict begin 7 6 bop 167 169 a Fe(\017)41 b Fd(bstr)o(eam)p
545 169 25 4 v 29 w(r)o(ead)p 735 169 V 29 w(at\()22
b([in]coll)p 1134 169 V 29 w(id,)h([in]handle,)h([in]b)n(uffer)-8
b(,)23 b([in]size,)g([in]offset,)f([in]\003ags,)h([out]vtag,)d
([in]user)p 3703 169 V 30 w(ptr)-8 b(,)250 268 y([out]id)29
b(\))p Ff(:)43 b(Reads)30 b(a)f(contiguous)f(re)o(gion)f(from)i
(bytestream.)51 b(Most)29 b(of)g(the)g(ar)o(guments)e(are)j(self)f(e)o
(xplanatory)-5 b(.)49 b(The)250 368 y(\003ags)34 b(are)g(not)f(yet)h
(de\002ned,)i(b)n(ut)d(may)h(include)f(such)g(possibilities)h(as)h
(specifying)d(atomic)h(operations.)64 b(The)33 b(vtag)250
468 y(returned)e(from)g(this)j(function)d(applies)h(to)h(the)g(re)o
(gion)e(of)h(the)h(byte)f(stream)h(de\002ned)f(by)g(the)h(requested)e
(of)n(fset)i(and)250 567 y(size.)61 b(A)21 b(\003ag)f(can)g(be)g
(passed)g(in)h(if)f(the)g(caller)g(does)g(not)g(w)o(ant)g(a)h(vtag)f
(returned.)p 461 598 2188 4 v 30 w(This)32 b(allo)n(ws)g(the)g
(underlying)e(imple-)250 667 y(mentation)19 b(to)h(a)n(v)n(oid)g(the)g
(o)o(v)o(erhead)e(of)i(calculating)f(the)h(v)n(alue.)250
796 y Fc(The)g(size)h(is)h([in/out])e(in)g(code?)k(F)l(igur)m(e)c(out)g
(semantics!!!)167 955 y Fe(\017)41 b Fd(bstr)o(eam)p
545 955 25 4 v 29 w(write)p 759 955 V 29 w(at\()15 b([in]coll)p
1151 955 V 29 w(id,)h([in]handle,)g([in]b)n(uffer)-8
b(,)16 b([in]size,)h([in]offset,)d([in]\003ags,)i([in/out]vtag,)d
([in]user)p 3762 955 V 30 w(ptr)-8 b(,)250 1055 y([out]id)19
b(\))p Ff(:)250 1184 y(Writes)i(a)g(contiguous)e(re)o(gion)g(to)h(the)h
(bytestream.)k(Same)20 b(ar)o(guments)f(as)i(read)p 2598
1184 V 29 w(bytestream,)e(e)o(xcept)g(that)i(the)g(vtag)f(is)h(an)250
1284 y(in/out)e(parameter)-5 b(.)250 1413 y Fc(The)20
b(size)h(is)h([in/out])e(in)g(code?)k(F)l(igur)m(e)c(out)g
(semantics!!!)167 1572 y Fe(\017)41 b Fd(bstr)o(eam)p
545 1572 V 29 w(r)o(esize\()29 b([in]coll)p 1083 1572
V 29 w(id,)j([in]handle,)f([in]size,)h([in]\003ags,)e([in/out]vtag,)f
([in]user)p 3041 1572 V 30 w(ptr)-8 b(,)32 b([out]id)d(\))p
Ff(:)43 b(Used)30 b(to)250 1672 y(truncate)19 b(or)h(allocate)g
(storage)f(for)h(a)h(bytestream.)i(Flags)e(are)f(used)g(to)g(specify)g
(if)g(preallocation)f(is)i(desired.)167 1831 y Fe(\017)41
b Fd(bstr)o(eam)p 545 1831 V 29 w(v)o(alidate\()19 b([in]handle,)h
([in/out]vtag,)e([in]user)p 2043 1831 V 30 w(ptr)-8 b(,)21
b([out]id)f(\))p Ff(:)26 b(This)21 b(function)d(may)j(be)f(used)g(to)h
(check)f(for)250 1930 y(modi\002cation)e(of)i(a)h(particular)e
(bytestream.)250 2060 y Fc(Fla)o(gs?)42 2369 y Fd(5.5.5)81
b(K)n(ey/v)o(alue)19 b(access)42 2616 y Ff(An)f(important)f(call)i(for)
e(k)o(e)o(yv)n(al)g(spaces)i(is)g(the)f(iterator)f(function.)23
b(The)18 b(iterator)f(function)g(is)i(used)f(to)g(obtain)f(all)i(k)o(e)
o(yw)o(ord/v)n(alue)42 2715 y(pairs)i(from)e(the)i(k)o(e)o(yv)n(al)e
(space)h(with)h(a)g(sequence)e(of)i(calls)g(from)e(the)i(client.)26
b(The)20 b(iterator)g(function)e(returns)i(a)h(logical,)f(opaque)42
2815 y(\223position\224)f(v)n(alue)h(that)g(allo)n(ws)h(a)f(client)g
(to)h(continue)d(reading)h(pairs)h(from)f(the)i(k)o(e)o(yv)n(al)e
(space)h(where)f(it)i(last)g(left)g(of)n(f.)167 3071
y Fe(\017)41 b Fd(k)o(eyv)o(al)p 485 3071 V 29 w(r)o(ead\()23
b([in]coll)p 976 3071 V 29 w(id,)j([in]handle,)f([in]k)o(ey)-5
b(,)26 b([out]v)o(al,)d([in]\003ags,)i([out]vtag,)e([in]user)p
3125 3071 V 29 w(ptr)-8 b(,)26 b([out]id)e(\))p Ff(:)34
b(Reads)250 3171 y(the)23 b(v)n(alue)f(corresponding)e(to)j(a)h(gi)n(v)
o(en)d(k)o(e)o(y)-5 b(.)33 b(F)o(ails)24 b(if)f(the)g(k)o(e)o(y)g(does)
g(not)f(e)o(xist.)34 b(A)24 b(b)n(uf)n(fer)d(is)j(pro)o(vided)d(for)h
(the)h(v)n(alue)g(to)250 3271 y(be)d(placed)f(in)i(\(the)f(v)n(alue)f
(may)h(be)g(an)g(arbitrary)f(type\).)250 3400 y(The)29
b(amount)e(of)i(data)g(actually)g(placed)f(in)h(the)g(v)n(alue)g(b)n
(uf)n(fer)f(should)g(be)h(indicated)f(by)g(the)i(data)p
3236 3400 V 29 w(sz)g(element)e(of)h(the)250 3499 y(structure.)167
3658 y Fe(\017)41 b Fd(k)o(eyv)o(al)p 485 3658 V 29 w(write\()15
b([in]coll)p 992 3658 V 29 w(id,)i([in]handle,)g([in]k)o(ey)-5
b(,)16 b([in]v)o(al,)g([in]\003ags,)g([in/out]vtag,)e([in]user)p
3134 3658 V 30 w(ptr)-8 b(,)17 b([out]id)e(\))p Ff(:)23
b(Writes)250 3758 y(out)d(a)g(v)n(alue)g(for)f(a)i(gi)n(v)o(en)e(k)o(e)
o(y)-5 b(.)24 b(If)c(the)g(k)o(e)o(y)g(does)g(not)f(e)o(xist,)i(it)f
(is)i(added.)167 3917 y Fe(\017)41 b Fd(k)o(eyv)o(al)p
485 3917 V 29 w(r)o(emo)o(v)o(e\()20 b([in]coll)p 1073
3917 V 29 w(id,)j([in]handle,)e([in]k)o(ey)-5 b(,)22
b([in]\003ags,)f([in/out]vtag,)f([in]user)p 2974 3917
V 29 w(ptr)-8 b(,)23 b([out]id)e(\))p Ff(:)28 b(Remo)o(v)o(es)21
b(a)250 4017 y(k)o(e)o(y/v)n(alue)d(pair)i(from)f(the)h(k)o(e)o(yv)n
(al)f(data)h(space.)167 4176 y Fe(\017)41 b Fd(k)o(eyv)o(al)p
485 4176 V 29 w(v)o(alidate\()22 b([in]coll)p 1096 4176
V 29 w(id,)j([in]handle,)g([in/out]vtag,)d([in]user)p
2389 4176 V 30 w(ptr)-8 b(,)25 b([out]id)e(\))p Ff(:)32
b(Used)24 b(to)g(check)f(for)g(modi\002ca-)250 4275 y(tion)d(of)g(a)g
(particular)f(k)o(e)o(y/v)n(alue)g(pair)-5 b(.)167 4434
y Fe(\017)41 b Fd(k)o(eyv)o(al)p 485 4434 V 29 w(iterate\()32
b([in]coll)p 1056 4434 V 29 w(id,)38 b([in]handle,)f([in/out]position,)
g([out]k)o(ey)p 2536 4434 V 28 w(array)-5 b(,)36 b([out]v)o(al)p
3094 4434 V 28 w(array)-5 b(,)36 b([in/out]count,)250
4534 y([in]\003ags,)31 b([in/out]vtag,)f([in]user)p 1340
4534 V 30 w(ptr)-8 b(,)32 b([out]id)e(\))p Ff(:)45 b(Reads)30
b(count)f(k)o(e)o(yw)o(ord/v)n(alue)e(pairs)j(from)e(the)i(pro)o(vided)
e(logi-)250 4633 y(cal)21 b(position)g(in)g(the)g(k)o(e)o(yv)n(al)f
(space.)28 b(F)o(ails)21 b(if)h(the)f(vtag)g(doesn')o(t)e(match.)27
b(The)21 b(position)g(SI)p 2918 4633 V 29 w(ST)-8 b(AR)j(T)p
3197 4633 V 30 w(POSITION)21 b(is)h(used)250 4733 y(to)e(start)h(at)g
(the)f(be)o(ginning,)d(and)j(a)g(ne)n(w)g(position)g(is)h(returned)d
(allo)n(wing)i(the)g(caller)g(to)g(continue)f(where)g(the)o(y)h(left)g
(of)n(f.)250 4862 y(k)o(e)o(yv)n(al)p 474 4862 V 28 w(iterate)26
b(will)h(al)o(w)o(ays)f(read)g Fc(count)g Ff(items,)i(unless)e(it)h
(hits)f(the)h(end)e(of)h(the)g(k)o(e)o(yv)n(al)f(space)h(\(EOK\).)f
(After)h(hitting)250 4962 y(EOK,)21 b Fc(count)g Ff(will)h(be)e(set)i
(to)f(the)g(number)e(of)h(pairs)h(processed.)26 b(Thus,)20
b(callers)h(must)g(compare)e Fc(count)j Ff(after)e(calling)h(and)250
5062 y(compare)g(with)h(the)h(v)n(alue)e(it)i(had)f(before)f(the)i
(function)d(call:)30 b(if)23 b(the)o(y)f(are)g(dif)n(ferent,)f(EOK)i
(has)f(been)g(reached.)30 b(If)22 b(there)250 5161 y(are)c(N)h(items)g
(left)f(in)h(the)f(k)o(e)o(yspace,)f(and)h(k)o(e)o(yv)n(al)p
1686 5161 V 28 w(iterate)g(requests)g(N)h(items,)g(there)f(will)h(be)f
(no)g(indication)f(that)h(EOK)h(has)250 5261 y(been)j(reached)f(and)i
(only)f(after)g(making)g(another)f(call)i(will)h(the)f(caller)g(kno)n
(w)e(he)i(is)h(at)f(EOK.)g(The)f(v)n(alue)h(of)f Fc(position)g
Ff(is)250 5361 y(not)e(meaningful)e(after)h(reaching)g(EOK.)1926
5610 y(7)p eop end
%%Page: 8 8
TeXDict begin 8 7 bop 167 169 a Fe(\017)41 b Fd(k)o(eyv)o(al)p
485 169 25 4 v 29 w(iterate)p 746 169 V 28 w(k)o(eys\()15
b([in]coll)p 1223 169 V 29 w(id,)i([in]handle,)f([in/out]position,)f
([out]k)o(ey)p 2639 169 V 28 w(array)-5 b(,)15 b([in]count,)h
([in]\003ags,)f([in/out]vtag,)250 268 y([in]user)p 532
268 V 29 w(ptr)-8 b(,)21 b([out]id)f(\))p Ff(:)26 b(Similar)21
b(to)f(abo)o(v)o(e,)f(b)n(ut)h(only)g(returns)f(k)o(e)o(ys,)h(not)g
(corresponding)d(v)n(alues.)26 b Fc(need)19 b(to)i(\002x)f(par)o(am-)
250 368 y(eter)o(s)42 680 y Fd(5.5.6)81 b(Noncontiguous)20
b(\(list\))g(access)42 927 y Ff(These)g(functions)f(are)h(used)g(to)g
(read)g(noncontiguous)d(byte)i(stream)i(re)o(gions)e(or)g(multiple)h(k)
o(e)o(y/v)n(alue)e(pairs.)42 1118 y Fc(How)j(do)f(vta)o(gs)g(work)h
(with)f(noncontiguous)d(calls?)42 1309 y Ff(The)j(byte)g(stream)g
(functions)f(will)i(implement)f(simple)g(listio)h(style)g
(noncontiguous)16 b(access.)26 b(An)o(y)20 b(more)g(adv)n(anced)e(data)
i(types)42 1409 y(should)g(be)h(unrolled)e(into)i(\003at)g(re)o(gions)f
(before)f(reaching)g(this)j(interf)o(ace.)k(The)20 b(process)h(for)f
(unrolling)f(is)j(outside)e(the)h(scope)f(of)42 1508
y(this)h(document,)d(b)n(ut)i(e)o(xamples)f(are)h(a)n(v)n(ailable)g(in)
g(the)h(R)m(OMIO)f(code.)42 1699 y Fc(T)o(ODO:)g(SEMANTICS!!!!!)42
1890 y(T)o(ODO:)g(how)g(to)h(we)g(r)m(eport)f(partial)g(success)g(for)h
(listio)g(calls?)167 2164 y Fe(\017)41 b Fd(bstr)o(eam)p
545 2164 V 29 w(r)o(ead)p 735 2164 V 29 w(list\()34 b([in]coll)p
1182 2164 V 29 w(id,)j([in]handle,)h([in]mem)p 2062 2164
V 29 w(offset)p 2286 2164 V 29 w(array)-5 b(,)36 b([in]mem)p
2867 2164 V 29 w(size)p 3025 2164 V 30 w(array)-5 b(,)37
b([in]mem)p 3608 2164 V 29 w(count,)250 2264 y([in]str)o(eam)p
624 2264 V 28 w(offset)p 847 2264 V 29 w(array)-5 b(,)38
b([in]str)o(eam)p 1499 2264 V 29 w(size)p 1657 2264 V
30 w(array)-5 b(,)38 b([in]str)o(eam)p 2310 2264 V 29
w(count,)h([in]\003ags,)g([out]vtag\(?\),)d([in]user)p
3703 2264 V 30 w(ptr)-8 b(,)250 2364 y([out]id)19 b(\))p
Ff(:)167 2530 y Fe(\017)41 b Fd(bstr)o(eam)p 545 2530
V 29 w(write)p 759 2530 V 29 w(list\()30 b([in]coll)p
1202 2530 V 29 w(id,)j([in]handle,)f([in]mem)p 2072 2530
V 29 w(offset)p 2296 2530 V 29 w(array)-5 b(,)31 b([in]mem)p
2872 2530 V 30 w(size)p 3031 2530 V 30 w(array)-5 b(,)31
b([in]mem)p 3608 2530 V 29 w(count,)250 2629 y([in]str)o(eam)p
624 2629 V 28 w(offset)p 847 2629 V 29 w(array)-5 b(,)20
b([in]str)o(eam)p 1481 2629 V 28 w(size)p 1638 2629 V
30 w(array)-5 b(,)21 b([in]str)o(eam)p 2274 2629 V 28
w(count,)g([in]\003ags,)f([in/out]vtag\(?\),)e([in]user)p
3703 2629 V 30 w(ptr)-8 b(,)250 2729 y([out]id)19 b(\))p
Ff(:)167 2895 y Fe(\017)41 b Fd(k)o(eyv)o(al)p 485 2895
V 29 w(r)o(ead)p 675 2895 V 28 w(list\()30 b([in]coll)p
1117 2895 V 29 w(id,)i([in]handle,)f([in]k)o(ey)p 1934
2895 V 29 w(array)-5 b(,)31 b([in]v)o(alue)p 2524 2895
V 28 w(array)-5 b(,)31 b([in]count,)f([in]\003ags,)h([out]vtag,)250
2995 y([in]user)p 532 2995 V 29 w(ptr)-8 b(,)21 b([out]id)f(\))p
Ff(:)167 3161 y Fe(\017)41 b Fd(k)o(eyv)o(al)p 485 3161
V 29 w(write)p 699 3161 V 29 w(list\()16 b([in]coll)p
1128 3161 V 28 w(id,)h([in]handle,)f([in]k)o(ey)p 1914
3161 V 29 w(array)-5 b(,)16 b([in]v)o(alue)p 2489 3161
V 28 w(array)-5 b(,)15 b([in]count,)h([in]\003ags,)f([in/out]vtag,)250
3260 y([in]user)p 532 3260 V 29 w(ptr)-8 b(,)21 b([out]id)f(\))p
Ff(:)42 3573 y Fd(5.5.7)81 b(T)-8 b(esting)21 b(f)n(or)f(completion)42
3820 y Fc(Do)h(we)f(need)g(coll)p 585 3820 V 29 w(ids)h(her)m(e?)167
4094 y Fe(\017)41 b Fd(test\()20 b([in]coll)p 678 4094
V 29 w(id,)i([in]id,)f([out]count,)e([out]vtag,)f([out]user)p
2155 4094 V 28 w(ptr)-8 b(,)22 b([out]state)d(\))p Ff(:)26
b(T)-6 b(ests)22 b(for)e(completion)f(of)h(a)i(storage)250
4193 y(interf)o(ace)16 b(operation.)22 b(The)16 b(count)g(\002eld)h
(indicates)g(ho)n(w)f(man)o(y)f(operations)h(completed)f(\(in)h(this)i
(case)f(either)f(1)h(or)g(0\).)23 b(If)17 b(an)250 4293
y(operation)i(completes,)h(then)h(the)g(\002nal)g(status)g(of)g(the)g
(operation)e(should)h(be)h(check)o(ed)f(using)g(the)h(state)h
(parameter)-5 b(.)26 b(Note)250 4392 y(the)20 b(vtag)g(output)f(ar)o
(gument)f(here;)h(it)i(is)g(used)f(to)h(pro)o(vide)d(vtags)i(for)f
(operations)g(that)h(did)g(not)g(complete)f(immediately)-5
b(.)167 4558 y Fe(\017)41 b Fd(testsome\()15 b([in]coll)p
853 4558 V 28 w(id,)i([in/out]id)p 1321 4558 V 29 w(array)-5
b(,)16 b([in/out]count,)e([out]vtag)p 2406 4558 V 27
w(array)-5 b(,)15 b([out]user)p 2988 4558 V 29 w(ptr)p
3128 4558 V 29 w(array)-5 b(,)16 b([out]state)p 3728
4558 V 27 w(array)250 4658 y(\))p Ff(:)31 b(T)-6 b(ests)25
b(for)d(completion)g(of)h(one)g(or)g(more)f(tro)o(v)o(e)g(operations.)
32 b(The)23 b(id)p 2384 4658 V 30 w(array)f(lists)j(operations)d(to)h
(test)h(on.)34 b(A)24 b(v)n(alue)e(of)250 4758 y(TR)m(O)l(VE)p
525 4758 V 29 w(OP)p 660 4758 V 30 w(ID)p 778 4758 V
29 w(NULL)f(will)f(be)h(ignored.)i(Count)c(is)j(set)f(to)f(the)g
(number)f(of)g(completed)g(items)i(on)e(return.)250 4891
y Fc(T)o(ODO:)h(\002x)g(up)g(semantics)g(for)g(testsome;)h(look)f(at)g
(MPI)g(functions)f(for)i(ideas.)250 5023 y(wait)g(function)e(for)h
(testing)g(purposes)g(if)h(nothing)d(else?)42 5297 y(Note:)26
b(need)19 b(to)h(discuss)h(completion)e(queue)o(,)g(internal)g(or)i(e)n
(xternal?)1926 5610 y Ff(8)p eop end
%%Page: 9 9
TeXDict begin 9 8 bop 42 169 a Fc(Phil:)25 b(See)20 b(pvfs2-internal)f
(email)h(at)42 268 y(http://beowulf-under)m(gr)l(ound.or)m(g/p)o
(iperma)o(il/pvfs2-in)o(terna)o(l/200)o(1-)o(Octob)o(er/00)o(00)o(10)o
(.html)14 b(for)20 b(my)h(thoughts)d(on)h(this)i(topic.)42
581 y Fd(5.5.8)81 b(Batch)21 b(operations)42 828 y Ff(Batch)g
(operations)e(are)h(used)h(to)f(perform)f(a)i(sequence)e(of)h
(operations)f(possibly)h(as)i(an)e(atomic)g(whole.)26
b(These)20 b(will)h(be)g(handled)42 927 y(at)g(a)g(higher)d(le)n(v)o
(el.)42 1299 y Fg(6)120 b(Optimizations)42 1576 y Ff(This)21
b(section)f(lists)h(some)f(potential)g(optimizations)e(that)j(might)e
(be)h(applied)f(at)i(this)g(layer)f(or)f(that)i(are)f(related)g(to)g
(this)h(layer)-5 b(.)42 1905 y Fb(6.1)99 b(Metadata)26
b(Stuf\002ng)42 2152 y Ff(In)d(man)o(y)g(\002le)h(systems)g(\223inode)e
(stuf)n(\002ng\224)h(is)h(used)f(to)h(store)f(the)h(data)f(for)g(small)
h(\002les)h(in)e(the)h(space)f(used)g(to)h(store)f(pointers)g(to)42
2251 y(indirect)j(blocks.)45 b(The)27 b(analogous)e(approach)g(for)h
(PVFS2)i(w)o(ould)e(be)h(to)g(store)g(the)g(data)g(for)g(small)g
(\002les)h(in)f(the)g(bytestream)42 2351 y(space)20 b(associated)g
(with)h(the)f(meta\002le.)1926 5610 y(9)p eop end
%%Trailer

userdict /end-hook known{end-hook}if
%%EOF
