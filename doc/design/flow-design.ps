%!PS-Adobe-2.0
%%Creator: dvips(k) 5.96.1 Copyright 2007 Radical Eye Software
%%Title: flow-design.dvi
%%CreationDate: Thu Feb  4 12:40:14 2010
%%Pages: 9
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Roman Times-Bold CMSY10 Times-Italic Courier
%%DocumentPaperSizes: Letter
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -t letter flow-design.dvi -o flow-design.ps
%DVIPSParameters: dpi=600
%DVIPSSource:  TeX output 2010.02.04:1240
%%BeginProcSet: tex.pro 0 0
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/CharBuilder{save 3 1 roll S A/base get 2 index get S
/BitMaps get S get/Cd X pop/ctr 0 N Cdx 0 Cx Cy Ch sub Cx Cw add Cy
setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx sub Cy .1 sub]{Ci}imagemask
restore}B/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc 0 0
% File 8r.enc  TeX Base 1 Encoding  Revision 2.0  2002-10-30
%
% @@psencodingfile@{
%   author    = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry,
%                W. Schmidt, P. Lehman",
%   version   = "2.0",
%   date      = "27nov06",
%   filename  = "8r.enc",
%   email     = "tex-fonts@@tug.org",
%   docstring = "This is the encoding vector for Type1 and TrueType
%                fonts to be used with TeX.  This file is part of the
%                PSNFSS bundle, version 9"
% @}
% 
% The idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard encoding, ISO Latin 1, Windows ANSI including the euro symbol,
% MacRoman, and some extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% These are /dotlessj /ff /ffi /ffl.
% 
% (4) hyphen appears twice for compatibility with both ASCII and Windows.
%
% (5) /Euro was assigned to 128, as in Windows ANSI
%
% (6) Missing characters from MacRoman encoding incorporated as follows:
%
%     PostScript      MacRoman        TeXBase1
%     --------------  --------------  --------------
%     /notequal       173             0x16
%     /infinity       176             0x17
%     /lessequal      178             0x18
%     /greaterequal   179             0x19
%     /partialdiff    182             0x1A
%     /summation      183             0x1B
%     /product        184             0x1C
%     /pi             185             0x1D
%     /integral       186             0x81
%     /Omega          189             0x8D
%     /radical        195             0x8E
%     /approxequal    197             0x8F
%     /Delta          198             0x9D
%     /lozenge        215             0x9E
%
/TeXBase1Encoding [
% 0x00
 /.notdef /dotaccent /fi /fl
 /fraction /hungarumlaut /Lslash /lslash
 /ogonek /ring /.notdef /breve
 /minus /.notdef /Zcaron /zcaron
% 0x10
 /caron /dotlessi /dotlessj /ff
 /ffi /ffl /notequal /infinity
 /lessequal /greaterequal /partialdiff /summation
 /product /pi /grave /quotesingle
% 0x20
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus
 /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three
 /four /five /six /seven
 /eight /nine /colon /semicolon
 /less /equal /greater /question
% 0x40
 /at /A /B /C
 /D /E /F /G
 /H /I /J /K
 /L /M /N /O
% 0x50
 /P /Q /R /S
 /T /U /V /W
 /X /Y /Z /bracketleft
 /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c
 /d /e /f /g
 /h /i /j /k
 /l /m /n /o
% 0x70
 /p /q /r /s
 /t /u /v /w
 /x /y /z /braceleft
 /bar /braceright /asciitilde /.notdef
% 0x80
 /Euro /integral /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /Omega /radical /approxequal
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /Delta /lozenge /Ydieresis
% 0xA0
 /.notdef /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot /hyphen /registered /macron
% 0xB0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde
 /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def


%%EndProcSet
%%BeginProcSet: texps.pro 0 0
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]FontType 0
ne{/Metrics exch def dict begin Encoding{exch dup type/integertype ne{
pop pop 1 sub dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get
div def}ifelse}forall Metrics/Metrics currentdict end def}{{1 index type
/nametype eq{exit}if exch pop}loop}ifelse[2 index currentdict end
definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{dup
sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1 roll
mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def dup[
exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}if}
forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}def
end

%%EndProcSet
%%BeginProcSet: special.pro 0 0
%!
TeXDict begin/SDict 200 dict N SDict begin/@SpecialDefaults{/hs 612 N
/vs 792 N/ho 0 N/vo 0 N/hsc 1 N/vsc 1 N/ang 0 N/CLIP 0 N/rwiSeen false N
/rhiSeen false N/letter{}N/note{}N/a4{}N/legal{}N}B/@scaleunit 100 N
/@hscale{@scaleunit div/hsc X}B/@vscale{@scaleunit div/vsc X}B/@hsize{
/hs X/CLIP 1 N}B/@vsize{/vs X/CLIP 1 N}B/@clip{/CLIP 2 N}B/@hoffset{/ho
X}B/@voffset{/vo X}B/@angle{/ang X}B/@rwi{10 div/rwi X/rwiSeen true N}B
/@rhi{10 div/rhi X/rhiSeen true N}B/@llx{/llx X}B/@lly{/lly X}B/@urx{
/urx X}B/@ury{/ury X}B/magscale true def end/@MacSetUp{userdict/md known
{userdict/md get type/dicttype eq{userdict begin md length 10 add md
maxlength ge{/md md dup length 20 add dict copy def}if end md begin
/letter{}N/note{}N/legal{}N/od{txpose 1 0 mtx defaultmatrix dtransform S
atan/pa X newpath clippath mark{transform{itransform moveto}}{transform{
itransform lineto}}{6 -2 roll transform 6 -2 roll transform 6 -2 roll
transform{itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll
curveto}}{{closepath}}pathforall newpath counttomark array astore/gc xdf
pop ct 39 0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}
if}N/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1
-1 scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3
get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip
yflip not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub
neg 0 TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{
noflips{TR pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop
90 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get
neg sub neg TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr
1 get neg sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr
2 get ppr 0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4
-1 roll add 2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S
TR}if}N/cp{pop pop showpage pm restore}N end}if}if}N/normalscale{
Resolution 72 div VResolution 72 div neg scale magscale{DVImag dup scale
}if 0 setgray}N/psfts{S 65781.76 div N}N/startTexFig{/psf$SavedState
save N userdict maxlength dict begin/magscale true def normalscale
currentpoint TR/psf$ury psfts/psf$urx psfts/psf$lly psfts/psf$llx psfts
/psf$y psfts/psf$x psfts currentpoint/psf$cy X/psf$cx X/psf$sx psf$x
psf$urx psf$llx sub div N/psf$sy psf$y psf$ury psf$lly sub div N psf$sx
psf$sy scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub
TR/showpage{}N/erasepage{}N/setpagedevice{pop}N/copypage{}N/p 3 def
@MacSetUp}N/doclip{psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll
newpath 4 copy 4 2 roll moveto 6 -1 roll S lineto S lineto S lineto
closepath clip newpath moveto}N/endTexFig{end psf$SavedState restore}N
/@beginspecial{SDict begin/SpecialSave save N gsave normalscale
currentpoint TR @SpecialDefaults count/ocount X/dcount countdictstack N}
N/@setspecial{CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs
neg 0 rlineto closepath clip}if ho vo TR hsc vsc scale ang rotate
rwiSeen{rwi urx llx sub div rhiSeen{rhi ury lly sub div}{dup}ifelse
scale llx neg lly neg TR}{rhiSeen{rhi ury lly sub div dup scale llx neg
lly neg TR}if}ifelse CLIP 2 eq{newpath llx lly moveto urx lly lineto urx
ury lineto llx ury lineto closepath clip}if/showpage{}N/erasepage{}N
/setpagedevice{pop}N/copypage{}N newpath}N/@endspecial{count ocount sub{
pop}repeat countdictstack dcount sub{end}repeat grestore SpecialSave
restore end}N/@defspecial{SDict begin}N/@fedspecial{end}B/li{lineto}B
/rl{rlineto}B/rc{rcurveto}B/np{/SaveX currentpoint/SaveY X N 1
setlinecap newpath}N/st{stroke SaveX SaveY moveto}N/fil{fill SaveX SaveY
moveto}N/ellipse{/endangle X/startangle X/yrad X/xrad X/savematrix
matrix currentmatrix N TR xrad yrad scale 0 0 1 startangle endangle arc
savematrix setmatrix}N end

%%EndProcSet
%%BeginFont: CMSY10
%!PS-AdobeFont-1.1: CMSY10 1.0
%%CreationDate: 1991 Aug 15 07:20:57
% Copyright (C) 1997 American Mathematical Society. All Rights Reserved.
11 dict begin
/FontInfo 7 dict dup begin
/version (1.0) readonly def
/Notice (Copyright (C) 1997 American Mathematical Society. All Rights Reserved) readonly def
/FullName (CMSY10) readonly def
/FamilyName (Computer Modern) readonly def
/Weight (Medium) readonly def
/ItalicAngle -14.035 def
/isFixedPitch false def
end readonly def
/FontName /CMSY10 def
/PaintType 0 def
/FontType 1 def
/FontMatrix [0.001 0 0 0.001 0 0] readonly def
/Encoding 256 array
0 1 255 {1 index exch /.notdef put} for
dup 15 /bullet put
readonly def
/FontBBox{-29 -960 1116 775}readonly def
currentdict end
currentfile eexec
D9D66F633B846A97B686A97E45A3D0AA052F09F9C8ADE9D907C058B87E9B6964
7D53359E51216774A4EAA1E2B58EC3176BD1184A633B951372B4198D4E8C5EF4
A213ACB58AA0A658908035BF2ED8531779838A960DFE2B27EA49C37156989C85
E21B3ABF72E39A89232CD9F4237FC80C9E64E8425AA3BEF7DED60B122A52922A
221A37D9A807DD01161779DDE7D31FF2B87F97C73D63EECDDA4C49501773468A
27D1663E0B62F461F6E40A5D6676D1D12B51E641C1D4E8E2771864FC104F8CBF
5B78EC1D88228725F1C453A678F58A7E1B7BD7CA700717D288EB8DA1F57C4F09
0ABF1D42C5DDD0C384C7E22F8F8047BE1D4C1CC8E33368FB1AC82B4E96146730
DE3302B2E6B819CB6AE455B1AF3187FFE8071AA57EF8A6616B9CB7941D44EC7A
71A7BB3DF755178D7D2E4BB69859EFA4BBC30BD6BB1531133FD4D9438FF99F09
4ECC068A324D75B5F696B8688EEB2F17E5ED34CCD6D047A4E3806D000C199D7C
515DB70A8D4F6146FE068DC1E5DE8BC5703711DA090312BA3FC00A08C453C609
C627A8BECD6E1FA14A3B02476E90AAD8B4700C400380BC9AFFBF7847EB28661B
9DC3AA0F44C533F2E07DCC4DE19D367BF223E33DC321D0247A0E6EF6ABC8FA52
15AE044094EF678A8726CD7C011F02BFF8AB6EAEEE391AD837120823BED0B5D8
F8B15245377871A64F78378BB4330149D6941F7A86FBFFC49B93C94155F5FA7D
F22E7214511C0A92693F4CDBF38411651540572F2DD70D924AE0F18E1CD581F3
C871399127FF5D07A868885B5FF7CDEB50B8323B2533DEF8DC973B1AE84FA0A2

0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
cleartomark
%%EndFont 
TeXDict begin 40258431 52099146 1000 600 600 (flow-design.dvi)
@start /Fa 133[60 60 60 60 60 60 60 60 60 60 60 60 60
60 60 60 1[60 60 60 60 60 60 60 60 60 7[60 4[60 1[60
1[60 60 1[60 1[60 1[60 6[60 3[60 1[60 1[60 3[60 60 60
2[60 1[60 60 1[60 2[60 60 1[60 3[60 34[{TeXBase1Encoding ReEncodeFont}
48 99.6264 /Courier rf /Fb 135[60 86 60 66 40 47 53 1[66
60 66 100 33 2[33 66 60 1[53 66 53 66 60 11[86 5[93 8[73
80 86 2[86 9[60 2[60 60 60 60 2[30 4[40 40 36[66 3[{
TeXBase1Encoding ReEncodeFont}35 119.552 /Times-Bold
rf /Fc 133[39 44 44 66 44 50 28 39 39 1[50 50 50 72 28
2[28 50 50 28 44 50 44 50 50 12[55 50 2[61 72 66 83 3[33
4[72 66 19[28 5[33 33 36[50 50 2[{TeXBase1Encoding ReEncodeFont}37
99.6264 /Times-Italic rf /Fd 107[44 44 24[44 50 50 72
50 50 28 39 33 50 50 50 50 78 28 50 28 28 50 50 33 44
50 44 50 44 9[94 72 72 61 55 66 1[55 72 72 89 1[72 39
33 72 1[55 61 72 66 66 72 6[28 50 50 50 50 50 50 50 50
50 50 28 25 33 25 1[50 33 33 33 35[55 55 2[{
TeXBase1Encoding ReEncodeFont}69 99.6264 /Times-Roman
rf /Fe 240[50 15[{}1 99.6264 /CMSY10 rf /Ff 136[104 72
80 48 56 64 1[80 72 80 120 40 2[40 1[72 48 64 80 64 80
72 12[96 4[112 1[135 3[56 2[88 1[104 104 8[48 1[72 72
72 72 72 72 72 72 45[80 3[{TeXBase1Encoding ReEncodeFont}36
143.462 /Times-Bold rf /Fg 134[60 2[60 60 33 3[60 60
60 93 33 6[53 3[53 10[86 1[73 66 2[66 5[47 3[66 1[86
17[60 1[60 48[{TeXBase1Encoding ReEncodeFont}20 119.552
/Times-Roman rf /Fh 136[124 1[86 48 67 3[86 86 134 48
2[48 1[86 1[76 1[76 28[96 1[124 68[{TeXBase1Encoding ReEncodeFont}14
172.188 /Times-Roman rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%BeginPaperSize: Letter
/setpagedevice where
{ pop << /PageSize [612 792] >> setpagedevice }
{ /letter where { pop letter } if }
ifelse
%%EndPaperSize
 end
%%EndSetup
%%Page: 1 1
TeXDict begin 1 0 bop 1122 609 a Fh(Flo)l(w)43 b(Design)h(Document)1318
1007 y Fg(PVFS)32 b(De)m(v)n(elopment)e(T)-8 b(eam)1709
1341 y(July)29 b(2002)-149 1888 y Ff(1)144 b(T)m(ODO)-3
2153 y Fe(\017)48 b Fd(point)23 b(to)h(some)f(other)h(document)f(for)h
(e)o(xplanation)f(of)h(concepts)f(common)g(to)h(all)f(pvfs2)h(I/O)g
(interf)o(aces)g(\(con-)95 2274 y(te)o(xts,)g(max)g(idle)h(time,)e
(test)i(semantics,)e(etc.\))-149 2713 y Ff(2)144 b(Concepts)33
b(and)i(Moti)o(v)o(ation)-149 3036 y Fd(Flo)n(ws)i(are)h(a)g(high)e(le)
n(v)o(el)g(model)h(for)g(ho)n(w)g(PVFS2)h(system)e(components)g(will)g
(perform)i(I/O.)f(It)g(is)g(designed)g(to)-149 3156 y(abstractly)h(b)n
(ut)g(ef)n(\002ciently)g(mo)o(v)o(e)e(data)j(from)f(source)g(to)g
(destination,)i(where)f(source)f(and)g(destination)f(may)h(be)-149
3277 y(de\002ned)26 b(as)e(storage)h(de)n(vices,)f(netw)o(ork)h(de)n
(vices,)f(or)h(memory)f(re)o(gions.)-149 3497 y(Features)i(include:)-3
3825 y Fe(\017)48 b Fc(Combining)33 b(I/O)i(mec)o(hanisms)d
Fd(The)j(\003o)n(w)f(interf)o(ace)g(combines)g(netw)o(ork)f(I/O)h(and)h
(disk)e(I/O)h(into)g(a)g(single)95 3945 y(frame)n(w)o(ork)25
b(with)f(a)h(scheduler)g(that)f(tak)o(es)h(both)f(into)f(account.)-3
4148 y Fe(\017)48 b Fc(Multiple)32 b(pr)l(otocols)e Fd(Actual)j(I/O)f
(is)h(carried)g(out)f(underneath)h(the)f(\003o)n(w)h(interf)o(ace)g(by)
f Fc(\003ow)h(pr)l(otocols)p Fd(.)53 b(W)-8 b(e)95 4269
y(may)20 b(implement)e(se)n(v)o(eral)i(dif)n(ferent)g(protocols)f
(\(using)g(dif)n(ferent)h(I/O)g(or)g(b)n(uf)n(fering)f(techniques,)h
(for)h(e)o(xample\))95 4389 y(which)k(can)g(be)g(switched)f(at)h
(runtime.)-3 4593 y Fe(\017)48 b Fc(Simple)20 b(interface)f
Fd(The)i(application)e(interf)o(ace)i(to)f(this)f(system)h(will)f(be)i
(as)f(high)g(le)n(v)o(el)f(and)h(simple)f(as)i(possible.)95
4713 y(De)n(vice)f(selection,)g(scheduling,)g(b)n(uf)n(fer)g
(management,)g(and)g(request)g(pattern)g(processing)f(will)g(be)h
(transparent)95 4833 y(to)25 b(the)f(\003o)n(w)h(user)-5
b(.)-3 5037 y Fe(\017)48 b Fc(Datatypes)25 b Fd(Flo)n(ws)f(allo)n(w)h
(the)g(user)g(to)g(specify)g(both)g(memory)f(and)i(\002le)g(datatypes)e
(\(similar)h(to)g(those)f(used)i(in)95 5157 y(MPI\))f(,)g(and)g(will)f
(handle)g(breaking)h(do)n(wn)f(these)g(datatypes)g(into)g(a)h(format)g
(that)f(can)h(be)g(used)g(by)f(lo)n(wer)g(le)n(v)o(el)95
5278 y(I/O)h(interf)o(aces.)1918 5605 y(1)p eop end
%%Page: 2 2
TeXDict begin 2 1 bop -149 194 a Ff(3)144 b(Flo)o(ws)-149
546 y Fb(3.1)119 b(Ov)o(er)o(view)-149 833 y Fd(A)31
b(\003o)n(w)f(describes)g(a)h(mo)o(v)o(ement)d(of)i(data.)48
b(The)30 b(data)h(al)o(w)o(ays)f(mo)o(v)o(es)f(from)h(a)g(single)g
(source)g(to)g(a)h(single)f(destina-)-149 953 y(tion.)39
b(There)28 b(may)f(be)h(\(and)g(almost)f(al)o(w)o(ays)g(will)g(be\))h
(multiple)e(\003o)n(ws)h(in)g(progress)h(at)g(the)f(same)h(time)f(for)h
(dif)n(ferent)-149 1074 y(locations-)33 b(in)g(particular)h(for)f
(clients)g(that)g(are)i(talking)d(simultaneously)f(to)i(se)n(v)o(eral)g
(serv)o(ers,)i(or)f(serv)o(ers)f(that)g(are)-149 1194
y(handling)24 b(simultaneous)f(I/O)h(requests.)-149 1414
y(At)f(the)g(highest)f(le)n(v)o(el)g(abstraction,)h(it)g(is)f
(important)g(that)h(a)g(\003o)n(w)g(describes)g(a)h(mo)o(v)o(ement)d
(of)i(data)g(in)g(terms)g(of)g(\223what)-149 1535 y(to)f(do\224)g
(rather)g(than)f(\223ho)n(w)h(to)f(do)h(it\224.)29 b(F)o(or)22
b(e)o(xample,)g(when)f(a)i(user)e(sets)h(up)f(a)i(\003o)n(w)-6
b(,)21 b(it)h(may)f(indicate)h(that)f(the)h(\002rst)g(100)-149
1655 y(bytes)28 b(of)g(a)g(\002le)g(on)g(a)g(local)g(disk)f(should)f
(be)j(sent)e(to)h(a)g(particular)g(host)f(on)g(the)h(netw)o(ork.)39
b(It)28 b(will)f(not)h(specify)f(what)-149 1775 y(protocols)22
b(to)h(use,)g(ho)n(w)f(to)g(b)n(uf)n(fer)h(the)g(data,)g(or)g(ho)n(w)f
(to)g(schedule)h(the)f(I/O.)h(All)f(of)h(this)f(will)g(be)h(handled)f
(underneath)-149 1896 y(the)35 b(\003o)n(w)g(interf)o(ace.)62
b(The)35 b(user)g(just)f(requests)g(that)h(a)g(high)f(le)n(v)o(el)g
(I/O)h(task)f(be)h(performed)g(and)g(then)g(checks)g(for)-149
2016 y(completion)24 b(until)f(it)h(is)h(done.)-149 2236
y(Note)c(that)g(the)h(\223user\224)f(in)g(the)h(abo)o(v)o(e)e(e)o
(xample)h(is)f(most)h(lik)o(ely)f(a)i(system)e(interf)o(ace)i(or)f
(serv)o(er)h(implementer)e(in)h(pvfs2.)-149 2357 y(End)k(users)f(will)g
(be)h(una)o(w)o(are)g(of)g(this)f(API.)-149 2577 y(A)k(single)f(\003o)n
(w)g(created)i(on)e(a)h(serv)o(er)g(will)f(match)g(e)o(xactly)g(one)h
(\003o)n(w)f(on)h(a)g(client.)39 b(F)o(or)28 b(e)o(xample,)f(if)h(a)g
(single)f(client)-149 2697 y(performs)38 b(a)g(PVFS2)g(read,)k(the)37
b(serv)o(er)h(will)f(create)h(a)g(storage)g(to)f(netw)o(ork)g(\003o)n
(w)-6 b(,)40 b(and)e(the)f(client)h(will)e(create)j(a)-149
2817 y(netw)o(ork)29 b(to)h(memory)e(\003o)n(w)-6 b(.)44
b(If)30 b(a)g(client)f(communicates)f(with)h(N)g(serv)o(ers)h(to)f
(complete)g(an)g(I/O)h(operation,)g(then)f(it)-149 2938
y(will)24 b(issue)g(N)h(\003o)n(ws)g(simultaneously)-6
b(.)-149 3158 y(Flo)n(ws)26 b(will)f(not)g(be)h(used)g(for)g(e)o
(xchanging)f(request)h(protocol)f(messages)h(between)g(the)g(client)f
(and)h(serv)o(er)g(\(requests)-149 3278 y(or)g(ackno)n(wledgements\).)
31 b(The)o(y)25 b(will)f(only)h(be)h(used)f(for)h(data)f(transfer)-5
b(.)33 b(It)25 b(is)g(assumed)g(that)g(request)g(messages)g(will)-149
3398 y(be)g(used)g(for)g(handshaking)e(before)j(or)f(after)g(the)g
(\003o)n(w)f(as)h(needed.)-149 3786 y Fb(3.2)119 b(Ar)n(chitectur)n(e)
-149 4074 y Fd(There)36 b(are)f(tw)o(o)f(major)h(parts)f(of)h(the)g
(\003o)n(w)g(architecture,)i(as)e(seen)g(in)f(\002gure)i(1.)60
b(The)35 b(\002rst)g(is)f(the)h Fc(\003ow)g(interface)p
Fd(.)-149 4194 y(Applications)22 b(\(ie)h(PVFS)i(components\))c
(interact)j(with)e(this)g(interf)o(ace.)31 b(It)23 b(pro)o(vides)f(a)h
(consistent)f(API)i(re)o(gardless)e(of)-149 4314 y(what)j(protocols)f
(are)h(in)g(use,)f(what)h(scheduling)e(is)i(being)f(performed,)h(etc.)
-149 4534 y(The)h(second)g(major)g(component)e(of)i(the)g(architecture)
h(is)e(the)h Fc(\003ow)g(pr)l(otocol)p Fd(.)32 b(There)27
b(may)e(be)i(man)o(y)e(\003o)n(w)g(protocols)-149 4655
y(acti)n(v)o(e)38 b(within)f(one)h(\003o)n(w)h(interf)o(ace.)72
b(Each)39 b(\003o)n(w)f(protocol)f(implements)g(communication)f
(between)j(a)g(dif)n(ferent)-149 4775 y(pair)28 b(of)g(data)g(endpoint)
f(types.)39 b(F)o(or)28 b(e)o(xample,)g(one)g(\003o)n(w)f(protocol)g
(may)h(link)f(TCP/IP)i(to)e(asynchronous)g(unix)g(I/O,)-149
4896 y(while)e(another)f(may)g(link)g(VIA)h(to)f(memory)g(re)o(gions.)
30 b(F)o(or)25 b(tw)o(o)f(seperate)h(hosts)f(to)g(communicate,)f(the)o
(y)h(must)g(share)-149 5016 y(compatible)g(\003o)n(w)h(protocols)e
(\(as)i(indicated)f(by)h(the)g(dotted)f(line)g(at)h(the)f(bottom)g(of)h
(\002gure)g(1\).)-149 5236 y(Flo)n(w)31 b(protocols)f(all)h(adhere)h
(to)f(a)h(strict)e(interf)o(ace)i(and)f(must)f(pro)o(vide)h(the)g(same)
g(e)o(xpected)g(functionality)e(\(which)-149 5356 y(will)21
b(be)g(described)g(later\).)30 b(Flo)n(w)21 b(protocols)f(tak)o(e)h
(care)h(of)f(details)g(such)g(as)g(b)n(uf)n(fering)g(and)g(\003o)n(w)g
(control)f(if)h(necessary)-6 b(.)1918 5605 y(2)p eop
end
%%Page: 3 3
TeXDict begin 3 2 bop 1276 245 a Fd(Figure)25 b(1:)30
b(Basic)25 b(\003o)n(w)g(architecture)95 2480 y @beginspecial
0 @llx 0 @lly 739 @urx 441 @ury 4434 @rwi @setspecial
%%BeginDocument: figs/flow-arch.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: flow-arch.eps
%%Creator: fig2dev Version 3.2.3 Patchlevel 
%%CreationDate: Sun Jun 10 23:31:50 2001
%%For: pcarns@foodstamp (Carns Philip H)
%%BoundingBox: 0 0 739 441
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
newpath 0 441 moveto 0 0 lineto 739 0 lineto 739 441 lineto closepath clip newpath
-14.0 516.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y tr xrad yrad sc 0 0 1 startangle endangle arc
	closepath
	savematrix setmatrix
	} def

/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
%%Page: 1 1
10 setmiterlimit
 0.06299 0.06299 sc
% Polyline
7.500 slw
n 6810 5760 m 6705 5760 6705 6420 105 arcto 4 {pop} repeat
  6705 6525 8040 6525 105 arcto 4 {pop} repeat
  8145 6525 8145 5865 105 arcto 4 {pop} repeat
  8145 5760 6810 5760 105 arcto 4 {pop} repeat
 cp gs col0 s gr 
/Times-Roman ff 210.00 scf sf
6840 6165 m
gs 1 -1 sc (Flow Protocol) col0 sh gr
/Times-Roman ff 210.00 scf sf
6840 6420 m
gs 1 -1 sc (            1) col0 sh gr
% Ellipse
n 11520 6142 51 51 0 360 DrawEllipse gs col0 s gr

% Ellipse
n 11700 6120 51 51 0 360 DrawEllipse gs col0 s gr

% Ellipse
n 11880 6120 51 51 0 360 DrawEllipse gs col0 s gr

% Polyline
n 7680 3195 m 7560 3195 7560 4245 120 arcto 4 {pop} repeat
  7560 4365 10725 4365 120 arcto 4 {pop} repeat
  10845 4365 10845 3315 120 arcto 4 {pop} repeat
  10845 3195 7680 3195 120 arcto 4 {pop} repeat
 cp gs col0 s gr 
% Polyline
n 10845 3727 m 9585 3727 l
 9585 4365 l gs col0 s gr 
/Times-Roman ff 210.00 scf sf
9765 4099 m
gs 1 -1 sc (Scheduling) col0 sh gr
/Times-Roman ff 240.00 scf sf
8595 3567 m
gs 1 -1 sc (Flow Interface) col0 sh gr
% Polyline
n 510 5760 m 405 5760 405 6420 105 arcto 4 {pop} repeat
  405 6525 1740 6525 105 arcto 4 {pop} repeat
  1845 6525 1845 5865 105 arcto 4 {pop} repeat
  1845 5760 510 5760 105 arcto 4 {pop} repeat
 cp gs col0 s gr 
/Times-Roman ff 210.00 scf sf
540 6165 m
gs 1 -1 sc (Flow Protocol) col0 sh gr
/Times-Roman ff 210.00 scf sf
540 6420 m
gs 1 -1 sc (            1) col0 sh gr
% Ellipse
n 5220 6142 51 51 0 360 DrawEllipse gs col0 s gr

% Ellipse
n 5400 6120 51 51 0 360 DrawEllipse gs col0 s gr

% Ellipse
n 5580 6120 51 51 0 360 DrawEllipse gs col0 s gr

% Polyline
n 1380 3195 m 1260 3195 1260 4245 120 arcto 4 {pop} repeat
  1260 4365 4425 4365 120 arcto 4 {pop} repeat
  4545 4365 4545 3315 120 arcto 4 {pop} repeat
  4545 3195 1380 3195 120 arcto 4 {pop} repeat
 cp gs col0 s gr 
% Polyline
n 4545 3727 m 3285 3727 l
 3285 4365 l gs col0 s gr 
/Times-Roman ff 210.00 scf sf
3465 4099 m
gs 1 -1 sc (Scheduling) col0 sh gr
/Times-Roman ff 240.00 scf sf
2295 3567 m
gs 1 -1 sc (Flow Interface) col0 sh gr
% Arc
15.000 slw
gs  clippath
9091 6655 m 9023 6557 l 8731 6760 l 9012 6638 l 8799 6858 l cp
1192 6512 m 1122 6610 l 1411 6815 l 1202 6593 l 1481 6718 l cp
eoclip
 [90] 0 sd
n 5138.3 1206.2 6672.2 126.5 54.2 arcn
gs col0 s gr
 gr
 [] 0 sd
% arrowhead
n 8799 6858 m 9012 6638 l 8731 6760 l 8814 6775 l 8799 6858 l 
 cp gs col7 1.00 shd ef gr  col0 s
% arrowhead
n 1481 6718 m 1202 6593 l 1411 6815 l 1397 6732 l 1481 6718 l 
 cp gs col7 1.00 shd ef gr  col0 s
% Arc
gs  clippath
663 7810 m 781 7789 l 719 7440 l 713 7746 l 601 7461 l cp
1176 6603 m 1095 6515 l 835 6757 l 1096 6597 l 917 6845 l cp
eoclip
 [90] 0 sd
n 1800.0 7470.0 1125.0 -126.9 163.7 arcn
gs col0 s gr
 gr
 [] 0 sd
% arrowhead
n 601 7461 m 713 7746 l 719 7440 l 670 7509 l 601 7461 l 
 cp gs col7 1.00 shd ef gr  col0 s
% arrowhead
n 917 6845 m 1096 6597 l 835 6757 l 920 6760 l 917 6845 l 
 cp gs col7 1.00 shd ef gr  col0 s
% Arc
gs  clippath
9523 7838 m 9643 7851 l 9679 7498 l 9589 7791 l 9560 7486 l cp
9165 6561 m 9082 6648 l 9341 6891 l 9164 6642 l 9423 6804 l cp
eoclip
 [90] 0 sd
n 8385.9 7583.3 1224.2 -52.3 11.6 arc
gs col0 s gr
 gr
 [] 0 sd
% arrowhead
n 9560 7486 m 9589 7791 l 9679 7498 l 9613 7552 l 9560 7486 l 
 cp gs col7 1.00 shd ef gr  col0 s
% arrowhead
n 9423 6804 m 9164 6642 l 9341 6891 l 9338 6806 l 9423 6804 l 
 cp gs col7 1.00 shd ef gr  col0 s
% Polyline
7.500 slw
n 7710 1215 m 7605 1215 7605 2055 105 arcto 4 {pop} repeat
  7605 2160 10740 2160 105 arcto 4 {pop} repeat
  10845 2160 10845 1320 105 arcto 4 {pop} repeat
  10845 1215 7710 1215 105 arcto 4 {pop} repeat
 cp gs col0 s gr 
% Polyline
n 8385 5760 m 8280 5760 8280 6420 105 arcto 4 {pop} repeat
  8280 6525 9615 6525 105 arcto 4 {pop} repeat
  9720 6525 9720 5865 105 arcto 4 {pop} repeat
  9720 5760 8385 5760 105 arcto 4 {pop} repeat
 cp gs col0 s gr 
% Polyline
n 9960 5760 m 9855 5760 9855 6420 105 arcto 4 {pop} repeat
  9855 6525 11190 6525 105 arcto 4 {pop} repeat
  11295 6525 11295 5865 105 arcto 4 {pop} repeat
  11295 5760 9960 5760 105 arcto 4 {pop} repeat
 cp gs col0 s gr 
% Polyline
15.000 slw
gs  clippath
8871 4488 m 8790 4400 l 8530 4642 l 8791 4482 l 8612 4730 l cp
7463 5636 m 7544 5724 l 7804 5482 l 7544 5643 l 7722 5394 l cp
eoclip
n 7515 5670 m
 8820 4455 l gs col0 s gr gr

% arrowhead
n 7722 5394 m 7544 5643 l 7804 5482 l 7719 5479 l 7722 5394 l 
 cp gs 0.00 setgray ef gr  col0 s
% arrowhead
n 8612 4730 m 8791 4482 l 8530 4642 l 8615 4645 l 8612 4730 l 
 cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
8985 5730 m 9105 5730 l 9105 5375 l 9045 5675 l 8985 5375 l cp
9105 4440 m 8985 4440 l 8985 4795 l 9045 4495 l 9105 4795 l cp
eoclip
n 9045 4455 m
 9045 5715 l gs col0 s gr gr

% arrowhead
n 9105 4795 m 9045 4495 l 8985 4795 l 9045 4735 l 9105 4795 l 
 cp gs 0.00 setgray ef gr  col0 s
% arrowhead
n 8985 5375 m 9045 5675 l 9105 5375 l 9045 5435 l 8985 5375 l 
 cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
10501 5679 m 10581 5590 l 10316 5353 l 10500 5598 l 10236 5442 l cp
9253 4400 m 9173 4489 l 9438 4726 l 9255 4482 l 9518 4637 l cp
eoclip
n 9225 4455 m
 10530 5625 l gs col0 s gr gr

% arrowhead
n 9518 4637 m 9255 4482 l 9438 4726 l 9433 4642 l 9518 4637 l 
 cp gs 0.00 setgray ef gr  col0 s
% arrowhead
n 10236 5442 m 10500 5598 l 10316 5353 l 10321 5437 l 10236 5442 l 
 cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
9075 3165 m 9195 3165 l 9195 2810 l 9135 3110 l 9075 2810 l cp
9195 2190 m 9075 2190 l 9075 2545 l 9135 2245 l 9195 2545 l cp
eoclip
n 9135 2205 m
 9135 3150 l gs col0 s gr gr

% arrowhead
n 9195 2545 m 9135 2245 l 9075 2545 l 9135 2485 l 9195 2545 l 
 cp gs 0.00 setgray ef gr  col0 s
% arrowhead
n 9075 2810 m 9135 3110 l 9195 2810 l 9135 2870 l 9075 2810 l 
 cp gs 0.00 setgray ef gr  col0 s
% Polyline
7.500 slw
n 1410 1215 m 1305 1215 1305 2055 105 arcto 4 {pop} repeat
  1305 2160 4440 2160 105 arcto 4 {pop} repeat
  4545 2160 4545 1320 105 arcto 4 {pop} repeat
  4545 1215 1410 1215 105 arcto 4 {pop} repeat
 cp gs col0 s gr 
% Polyline
n 2085 5760 m 1980 5760 1980 6420 105 arcto 4 {pop} repeat
  1980 6525 3315 6525 105 arcto 4 {pop} repeat
  3420 6525 3420 5865 105 arcto 4 {pop} repeat
  3420 5760 2085 5760 105 arcto 4 {pop} repeat
 cp gs col0 s gr 
% Polyline
n 3660 5760 m 3555 5760 3555 6420 105 arcto 4 {pop} repeat
  3555 6525 4890 6525 105 arcto 4 {pop} repeat
  4995 6525 4995 5865 105 arcto 4 {pop} repeat
  4995 5760 3660 5760 105 arcto 4 {pop} repeat
 cp gs col0 s gr 
% Polyline
15.000 slw
gs  clippath
2571 4488 m 2490 4400 l 2230 4642 l 2491 4482 l 2312 4730 l cp
1163 5636 m 1244 5724 l 1504 5482 l 1244 5643 l 1422 5394 l cp
eoclip
n 1215 5670 m
 2520 4455 l gs col0 s gr gr

% arrowhead
n 1422 5394 m 1244 5643 l 1504 5482 l 1419 5479 l 1422 5394 l 
 cp gs 0.00 setgray ef gr  col0 s
% arrowhead
n 2312 4730 m 2491 4482 l 2230 4642 l 2315 4645 l 2312 4730 l 
 cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
2685 5730 m 2805 5730 l 2805 5375 l 2745 5675 l 2685 5375 l cp
2805 4440 m 2685 4440 l 2685 4795 l 2745 4495 l 2805 4795 l cp
eoclip
n 2745 4455 m
 2745 5715 l gs col0 s gr gr

% arrowhead
n 2805 4795 m 2745 4495 l 2685 4795 l 2745 4735 l 2805 4795 l 
 cp gs 0.00 setgray ef gr  col0 s
% arrowhead
n 2685 5375 m 2745 5675 l 2805 5375 l 2745 5435 l 2685 5375 l 
 cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
4201 5679 m 4281 5590 l 4016 5353 l 4200 5598 l 3936 5442 l cp
2953 4400 m 2873 4489 l 3138 4726 l 2955 4482 l 3218 4637 l cp
eoclip
n 2925 4455 m
 4230 5625 l gs col0 s gr gr

% arrowhead
n 3218 4637 m 2955 4482 l 3138 4726 l 3133 4642 l 3218 4637 l 
 cp gs 0.00 setgray ef gr  col0 s
% arrowhead
n 3936 5442 m 4200 5598 l 4016 5353 l 4021 5437 l 3936 5442 l 
 cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
2775 3165 m 2895 3165 l 2895 2810 l 2835 3110 l 2775 2810 l cp
2895 2190 m 2775 2190 l 2775 2545 l 2835 2245 l 2895 2545 l cp
eoclip
n 2835 2205 m
 2835 3150 l gs col0 s gr gr

% arrowhead
n 2895 2545 m 2835 2245 l 2775 2545 l 2835 2485 l 2895 2545 l 
 cp gs 0.00 setgray ef gr  col0 s
% arrowhead
n 2775 2810 m 2835 3110 l 2895 2810 l 2835 2870 l 2775 2810 l 
 cp gs 0.00 setgray ef gr  col0 s
/Times-Roman ff 210.00 scf sf
9990 6165 m
gs 1 -1 sc (Flow Protocol) col0 sh gr
/Times-Roman ff 210.00 scf sf
8415 6165 m
gs 1 -1 sc (Flow Protocol) col0 sh gr
/Times-Roman ff 210.00 scf sf
8415 6420 m
gs 1 -1 sc (            2) col0 sh gr
/Times-Roman ff 210.00 scf sf
9990 6420 m
gs 1 -1 sc (            3) col0 sh gr
/Times-Roman ff 210.00 scf sf
4050 8190 m
gs 1 -1 sc (Network Communication) col0 sh gr
/Times-Roman ff 210.00 scf sf
225 8010 m
gs 1 -1 sc (Storage Device) col0 sh gr
/Times-Roman ff 210.00 scf sf
3690 6165 m
gs 1 -1 sc (Flow Protocol) col0 sh gr
/Times-Roman ff 210.00 scf sf
2115 6165 m
gs 1 -1 sc (Flow Protocol) col0 sh gr
/Times-Roman ff 210.00 scf sf
2115 6420 m
gs 1 -1 sc (            2) col0 sh gr
/Times-Roman ff 210.00 scf sf
3690 6420 m
gs 1 -1 sc (            3) col0 sh gr
/Times-Roman ff 210.00 scf sf
9000 8100 m
gs 1 -1 sc (Local Memory) col0 sh gr
/Times-Roman ff 240.00 scf sf
2205 1575 m
gs 1 -1 sc (PVFS2 Component) col0 sh gr
/Times-Roman ff 210.00 scf sf
1980 1890 m
gs 1 -1 sc (\(In this case a server\)) col0 sh gr
/Times-Roman ff 240.00 scf sf
8550 1575 m
gs 1 -1 sc (PVFS2 Component) col0 sh gr
/Times-Roman ff 210.00 scf sf
8370 1890 m
gs 1 -1 sc (\(In this case a client\)) col0 sh gr
$F2psEnd
rs

%%EndDocument
 @endspecial -149 2853 a Fb(3.3)119 b(Describing)31 b(\003o)o(ws)-149
3141 y Fd(Indi)n(vidual)25 b(\003o)n(ws)h(are)h(represented)f(using)g
(structures)f(called)i Fc(\003ow)f(descriptor)o(s)p Fd(.)34
b(The)26 b(source)h(and)f(destination)e(of)j(a)-149 3261
y(gi)n(v)o(en)f(\003o)n(w)g(are)i(represented)f(by)g(structures)f
(called)h Fc(endpoints)p Fd(.)36 b(A)27 b(\003o)n(w)g(descriptor)f(may)
h(serv)o(e)g(man)o(y)e(roles.)37 b(First)-149 3381 y(of)27
b(all,)g(when)g(created)h(by)f(a)g(\003o)n(w)g(interf)o(ace)g(user)l(,)
h(it)e(describes)h(an)g(I/O)g(task)f(that)h(needs)g(to)f(be)h
(performed.)37 b(Once)28 b(it)-149 3502 y(is)d(submitted)e(to)h(the)h
(\003o)n(w)f(interf)o(ace,)i(it)e(may)g(k)o(eep)h(up)g(with)f(state)h
(or)f(progress)h(information.)k(When)c(the)g(descriptor)-149
3622 y(is)33 b(\002nally)h(completed)e(and)i(returned)g(to)f(the)g
(user)l(,)j(it)d(will)g(indicate)g(the)g(status)g(of)g(the)h(completed)
e(\003o)n(w)-6 b(,)35 b(whether)-149 3743 y(successful)25
b(or)g(in)f(error)-5 b(.)-149 3963 y(Flo)n(w)30 b(endpoints)f(describe)
h(the)h(memory)-6 b(,)30 b(storage,)h(or)g(netw)o(ork)f(locations)f
(for)i(the)f(mo)o(v)o(ement)e(of)i(data.)48 b(All)29
b(\003o)n(w)-149 4083 y(descriptors)24 b(must)g(ha)n(v)o(e)h(both)f(a)h
(source)g(and)f(a)i(destination)d(endpoint.)-149 4478
y Fb(3.4)119 b(Usage)30 b(assumptions)-149 4765 y Fd(It)g(is)g(assumed)
f(that)h(all)g(\003o)n(ws)f(in)h(PVFS2)h(will)e(be)i
Fc(pr)l(eceded)i Fd(by)d(a)g(PVFS2)h(request)f(protocol)f(e)o(xchange)h
(between)-149 4885 y(the)23 b(client)e(and)i(serv)o(er)-5
b(.)29 b(In)23 b(a)f(\002le)h(system)f(read)h(case,)g(the)f(client)g
(will)g(send)g(a)g(read)h(request,)g(and)f(the)h(serv)o(er)f(will)f
(send)-149 5006 y(an)31 b(ackno)n(wledgement)e(\(which)i(among)f(other)
g(things)f(indicates)h(ho)n(w)g(much)g(data)h(is)f(a)n(v)n(ailable)g
(to)g(be)h(read\).)49 b(In)31 b(a)-149 5126 y(\002le)d(system)f(write)g
(case,)i(the)f(client)f(will)g(send)g(a)h(write)g(request,)g(and)f(the)
h(serv)o(er)g(will)e(send)i(an)g(ackno)n(wledgement)-149
5247 y(that)i(indicates)f(when)g(it)g(is)h(safe)g(to)f(be)o(gin)g(the)h
(\003o)n(w)f(to)g(send)h(data)g(to)f(the)h(serv)o(er)-5
b(.)44 b(Once)31 b(the)e(\003o)n(w)h(is)f(completed,)h(a)1918
5605 y(3)p eop end
%%Page: 4 4
TeXDict begin 4 3 bop -149 194 a Fd(trailing)24 b(ackno)n(wledgment)f
(alerts)i(the)f(client)h(that)f(the)h(serv)o(er)g(has)f(completed)g
(the)h(write)f(operation.)-149 414 y(The)31 b(request)f(protocol)f
(will)g(transmit)g(information)g(such)h(as)g(\002le)h(size)f(and)g
(distrib)n(ution)e(parameters)i(that)g(may)g(be)-149
534 y(needed)25 b(to)g(coordinate)f(remote)h(\003o)n(ws.)-149
973 y Ff(4)144 b(Data)34 b(structur)m(es)-149 1325 y
Fb(4.1)119 b(Flo)o(w)30 b(descriptor)-149 1613 y Fd(Flo)n(w)19
b(descriptors)f(are)h(created)h(by)e(the)h(\003o)n(w)g(interf)o(ace)g
(user)-5 b(.)28 b(At)19 b(this)f(time,)h(the)g(caller)g(may)f(edit)h
(these)f(\002elds)h(directly)-6 b(.)-149 1733 y(Once)39
b(the)g(\003o)n(w)f(has)h(been)g(posted)e(for)i(service,)k(ho)n(we)n(v)
o(er)l(,)d(the)f(caller)g(may)f(only)g(interact)g(with)g(the)h
(descriptor)-149 1853 y(through)23 b(functions)f(de\002ned)i(in)f(the)g
(\003o)n(w)h(interf)o(ace.)30 b(It)24 b(is)f(not)g(safe)h(to)f
(directly)g(edit)g(a)h(\003o)n(w)f(descriptor)g(while)g(it)g(is)g(in)
-149 1974 y(progress.)-149 2194 y(Once)g(a)g(\003o)n(w)f(is)h
(complete,)f(it)g(is)g(again)g(safe)h(to)f(e)o(xamine)g(\002elds)h
(within)e(the)h(descriptor)g(\(for)h(e)o(xample,)f(to)h(determine)-149
2314 y(the)i(status)f(of)h(the)f(completed)g(\003o)n(w\).)-149
2534 y(Note)32 b(that)g(there)g(is)g(an)g(endpoint)f(speci\002c)i(to)e
(each)i(type)f(supported)f(by)h(the)g(\003o)n(w)g(interf)o(ace)h
(\(currently)f(memory)-6 b(,)-149 2655 y(BMI)25 b(\(netw)o(ork\),)g
(and)g(T)m(ro)o(v)o(e)e(\(storage\)\).)-149 2875 y(The)i(follo)n(wing)e
(\002elds)i(may)f(be)h(set)g(by)f(the)h(caller)g(prior)g(to)f(posting:)
-3 3178 y Fe(\017)48 b Fd(src:)31 b(source)25 b(endpoint)e(\(BMI,)j
(memory)-6 b(,)23 b(or)i(T)m(ro)o(v)o(e)e(addressing)h(information\))-3
3381 y Fe(\017)48 b Fd(dest:)30 b(destination)23 b(endpoint)h(\(BMI,)h
(memory)-6 b(,)24 b(or)h(T)m(ro)o(v)o(e)e(addressing)h(information\))-3
3584 y Fe(\017)48 b Fd(tag:)31 b(tag)24 b(used)h(to)f(match)h(up)f
(\003o)n(ws)g(with)g(particular)h(operation)f(sequences)-3
3788 y Fe(\017)48 b Fd(user)p 267 3788 30 4 v 36 w(ptr:)36
b(v)n(oid*)26 b(pointer)h(reserv)o(ed)g(for)h(use)f(by)g(the)h(caller)f
(\(may)h(associate)f(a)h(\003o)n(w)f(with)f(some)h(higher)g(le)n(v)o
(el)95 3908 y(state)e(structure,)f(for)h(e)o(xample\))-3
4112 y Fe(\017)48 b Fd(type:)30 b(speci\002es)25 b(what)g(kind)f(of)h
(\003o)n(w)f(protocol)g(to)h(use)g(for)g(this)e(\003o)n(w)-3
4315 y Fe(\017)48 b Fd(\002le)p 228 4315 V 36 w(req:)31
b(\002le)25 b(datatype)g(\(similar)f(to)g(MPI)h(datatype\))-3
4518 y Fe(\017)48 b Fd(\002le)p 228 4518 V 36 w(req)p
391 4518 V 36 w(of)n(fset:)30 b(of)n(fset)25 b(into)f(the)g(\002le)h
(datatype)-3 4722 y Fe(\017)48 b Fd(mem)p 301 4722 V
35 w(req:)31 b(memory)24 b(datatype)h(\(similar)e(to)i(MPI)g
(datatype\))f(\(optional\))-3 4925 y Fe(\017)48 b Fd(aggre)o(gate)p
487 4925 V 35 w(size:)31 b(total)24 b(amount)g(of)h(data)f(the)h(\003o)
n(w)g(should)e(transfer)i(\(optional\))-3 5129 y Fe(\017)48
b Fd(\002le)p 228 5129 V 36 w(data:)40 b(struct)29 b(containing)g
(state)g(information)f(about)h(the)g(\002le)h(to)f(access,)j(used)d(by)
g(the)g(distrib)n(ution)f(sub-)95 5249 y(system)1918
5605 y(4)p eop end
%%Page: 5 5
TeXDict begin 5 4 bop -149 194 a Fd(Special)24 b(notes:)29
b(Both)22 b(the)h(mem)p 1003 194 30 4 v 35 w(req)g(and)g(the)g(aggre)o
(gate)p 1886 194 V 35 w(size)g(\002elds)g(are)h(optional.)k(Ho)n(we)n
(v)o(er)l(,)22 b(at)h(least)g(one)g(of)g(them)-149 314
y Fc(must)j Fd(be)f(set.)31 b(Otherwise)24 b(the)h(\003o)n(w)f(has)h
(no)f(w)o(ay)h(to)g(calculate)g(ho)n(w)f(much)g(data)h(must)f(be)h
(transferred.)-149 534 y(The)g(follo)n(wing)e(\002elds)i(may)f(be)h
(read)h(by)e(the)h(caller)g(after)g(completion)f(of)g(a)i(\003o)n(w:)-3
830 y Fe(\017)48 b Fd(state:)30 b(\002nal)25 b(state)g(of)g(\003o)n(w)f
(\(see)i(enumerated)e(v)n(alues)g(in)h(\003o)n(w)-6 b(.h\))-3
1031 y Fe(\017)48 b Fd(error)p 294 1031 V 37 w(code:)30
b(error)c(code)f(\(nonzero)g(if)g(state)f(indicates)g(an)h(error\))-3
1232 y Fe(\017)48 b Fd(total)p 279 1232 V 35 w(transfered:)31
b(amount)24 b(of)h(data)g(mo)o(v)o(ed)e(by)h(the)h(\003o)n(w)-149
1528 y(The)g(follo)n(wing)e(\002elds)i(are)g(reserv)o(ed)g(for)g(use)g
(within)f(the)g(\003o)n(w)h(code:)-3 1824 y Fe(\017)48
b Fd(conte)o(xt)p 394 1824 V 35 w(id:)30 b(speci\002es)25
b(which)f(\003o)n(w)h(le)n(v)o(el)f(conte)o(xt)f(the)i(descriptor)f
(belongs)g(to)-3 2025 y Fe(\017)48 b Fd(\003o)n(wproto)p
487 2025 V 35 w(id:)30 b(internal)24 b(identi\002er)h(for)g(the)g
(\003o)n(wprotocol)e(used)-3 2226 y Fe(\017)48 b Fd(priority:)30
b(priority)23 b(le)n(v)o(el)h(of)h(\003o)n(w)f(\(unused)h(as)g(of)g
(yet\))-3 2427 y Fe(\017)48 b Fd(sched)p 328 2427 V 36
w(queue)p 602 2427 V 36 w(link:)29 b(for)c(use)g(by)g(internal)f
(scheduler)-3 2629 y Fe(\017)48 b Fd(\003o)n(w)p 276
2629 V 36 w(protocol)p 645 2629 V 35 w(data:)30 b(v)n(oid*)24
b(reserv)o(ed)h(for)g(\003o)n(w)g(protocol)e(use)-3 2830
y Fe(\017)48 b Fd(\002le)p 228 2830 V 36 w(req)p 391
2830 V 36 w(state:)31 b(current)25 b(state)f(of)h(\002le)g(datatype)g
(processing)-3 3031 y Fe(\017)48 b Fd(mem)p 301 3031
V 35 w(req)p 463 3031 V 36 w(state:)31 b(current)25 b(state)f(of)h
(memory)f(datatype)g(processing)-3 3232 y Fe(\017)48
b Fd(result:)30 b(result)24 b(of)h(each)h(datatype)e(processing)g
(iteration)-149 3670 y Ff(5)144 b(Flo)o(w)34 b(interface)-149
3993 y Fd(The)d(\003o)n(w)g(interf)o(ace)g(is)g(the)f(set)h(of)g
(functions)f(that)g(the)h(\003o)n(w)f(user)h(is)f(allo)n(wed)g(to)h
(interact)f(with.)48 b(These)31 b(functions)-149 4113
y(allo)n(w)24 b(you)g(to)h(do)f(such)h(things)e(as)i(create)h(\003o)n
(ws,)e(post)g(them)g(for)h(service,)g(and)g(check)g(for)g(completion.)
-3 4432 y Fe(\017)48 b Fc(PINT)p 316 4432 V 37 w(\003ow)p
519 4432 V 36 w(initialize\(\))p Fd(:)k(performs)36 b(initial)f(setup)g
(of)i(\003o)n(w)f(interf)o(ace)h(-)f(must)g(be)g(called)g(once)h
(before)g(an)o(y)95 4552 y(other)25 b(\003o)n(w)f(interf)o(ace)i
(functions)-3 4753 y Fe(\017)48 b Fc(PINT)p 316 4753
V 37 w(\003ow)p 519 4753 V 36 w(\002nalize\(\))p Fd(:)30
b(shuts)23 b(do)n(wn)h(the)h(\003o)n(w)f(interf)o(ace)-3
4954 y Fe(\017)48 b Fc(PINT)p 316 4954 V 37 w(\003ow)p
519 4954 V 36 w(alloc\(\))p Fd(:)30 b(creates)c(a)f(ne)n(w)f(\003o)n(w)
h(descriptor)-3 5155 y Fe(\017)48 b Fc(PINT)p 316 5155
V 37 w(\003ow)p 519 5155 V 36 w(fr)l(ee\(\))p Fd(:)31
b(frees)26 b(up)e(a)h(\003o)n(w)g(descriptor)f(that)g(is)h(no)f(longer)
h(needed)-3 5356 y Fe(\017)48 b Fc(PINT)p 316 5356 V
37 w(\003ow)p 519 5356 V 36 w(r)l(eset\(\))p Fd(:)31
b(resets)25 b(a)g(pre)n(viously)e(used)h(\003o)n(w)h(descriptor)f(to)h
(its)f(initial)f(state)i(and)f(v)n(alues.)1918 5605 y(5)p
eop end
%%Page: 6 6
TeXDict begin 6 5 bop -3 194 a Fe(\017)48 b Fc(PINT)p
316 194 30 4 v 37 w(\003ow)p 519 194 V 36 w(set)p 666
194 V 35 w(priority\(\))p Fd(:)32 b(sets)26 b(the)f(priority)g(of)h(a)h
(particular)f(\003o)n(w)f(descriptor)-5 b(.)33 b(May)26
b(be)g(called)g(e)n(v)o(en)f(when)95 314 y(a)g(\003o)n(w)g(is)f(in)h
(service.)-3 511 y Fe(\017)48 b Fc(PINT)p 316 511 V 37
w(\003ow)p 519 511 V 36 w(g)o(et)p 676 511 V 36 w(priority\(\))p
Fd(:)27 b(reads)20 b(the)h(priority)e(of)h(a)h(particular)f(\003o)n(w)g
(descriptor)-5 b(.)29 b(May)20 b(be)g(called)h(e)n(v)o(en)e(when)95
631 y(a)25 b(\003o)n(w)g(is)f(in)h(service.)-3 828 y
Fe(\017)48 b Fc(PINT)p 316 828 V 37 w(\003ow)p 519 828
V 36 w(post\(\))p Fd(:)30 b(submits)23 b(a)i(\003o)n(w)g(descriptor)f
(for)h(service)-3 1024 y Fe(\017)48 b Fc(PINT)p 316 1024
V 37 w(\003ow)p 519 1024 V 36 w(setinfo\(\))p Fd(:)30
b(used)24 b(to)g(set)h(optional)f(interf)o(ace)h(parameters.)-3
1221 y Fe(\017)48 b Fc(PINT)p 316 1221 V 37 w(\003ow)p
519 1221 V 36 w(g)o(etinfo\(\))p Fd(:)30 b(used)24 b(to)h(read)g
(optional)e(interf)o(ace)j(parameters.)-149 1521 y(Three)g(functions)d
(are)j(pro)o(vided)d(to)i(test)f(for)h(completion)e(of)i(posted)f
(\003o)n(ws:)-3 1822 y Fe(\017)48 b Fc(PINT)p 316 1822
V 37 w(\003ow)p 519 1822 V 36 w(test\(\))p Fd(:)30 b(tests)24
b(for)h(completion)f(of)g(a)i(single)d(\003o)n(w)-3 2019
y Fe(\017)48 b Fc(PINT)p 316 2019 V 37 w(\003ow)p 519
2019 V 36 w(testsome\(\))p Fd(:)30 b(tests)24 b(for)h(completion)e(of)i
(an)o(y)f(\003o)n(ws)h(from)f(a)h(speci\002ed)h(set)e(of)h(\003o)n(ws)
-3 2215 y Fe(\017)48 b Fc(PINT)p 316 2215 V 37 w(\003ow)p
519 2215 V 36 w(testconte)n(xt\(\))p Fd(:)30 b(tests)24
b(for)h(completion)e(of)i(an)o(y)f(\003o)n(ws)h(that)f(are)i(in)e
(service)h(in)g(the)f(interf)o(ace)-149 2651 y Ff(6)144
b(Flo)o(w)34 b(pr)m(otocol)g(interface)-149 2974 y Fd(The)20
b(\003o)n(w)f(protocols)f(are)i(modular)e(components)g(capable)i(of)f
(mo)o(ving)f(data)h(between)g(particular)h(types)e(of)i(endpoints.)-149
3094 y(\(See)28 b(section)f(3.2)f(for)h(an)g(o)o(v)o(ervie)n(w\).)36
b(An)o(y)26 b(\003o)n(w)g(protocol)g(implementation)f(must)h(conform)g
(to)h(a)g(prede\002ned)g(\003o)n(w)-149 3215 y(protocol)d(interf)o(ace)
i(in)e(order)h(to)g(interoperate)f(with)g(the)h(\003o)n(w)g(system.)-3
3515 y Fe(\017)48 b Fc(\003owpr)l(oto)p 480 3515 V 35
w(initialize\(\))p Fd(:)28 b(Initializes)c(the)h(\003o)n(w)f(protocol)g
(\(called)h(e)o(xactly)f(once)h(before)h(posting)d(an)o(y)h(\003o)n
(ws\))-3 3712 y Fe(\017)48 b Fc(\003owpr)l(oto)p 480
3712 V 35 w(\002nalize\(\))p Fd(:)29 b(shuts)24 b(do)n(wn)g(the)g
(\003o)n(w)h(protocol)f(\(forceful)h(terminating)f(an)o(y)g(pending)g
(\003o)n(ws\))-3 3908 y Fe(\017)48 b Fc(\003owpr)l(oto)p
480 3908 V 35 w(post\(\))p Fd(:)30 b(posts)23 b(a)i(\003o)n(w)g
(descriptor)-3 4105 y Fe(\017)48 b Fc(\003owpr)l(oto)p
480 4105 V 35 w(\002nd)p 665 4105 V 35 w(serviceable\(\))p
Fd(:)36 b(returns)27 b(an)h(array)g(of)f(acti)n(v)o(e)g(\003o)n(ws)g
(from)g(the)g(\003o)n(w)g(protocol)g(that)g(are)h(either)95
4225 y(completed)c(or)h(in)f(need)h(of)g(service)-3 4422
y Fe(\017)48 b Fc(\003owpr)l(oto)p 480 4422 V 35 w(service\(\))p
Fd(:)29 b(performs)22 b(w)o(ork)f(on)h(a)g(single)f(\003o)n(w)g
(descriptor)h(that)f(is)g(ready)i(for)f(service)g(\(as)g(indicated)95
4542 y(by)j(a)g(\003o)n(wproto)p 681 4542 V 35 w(\002nd)p
871 4542 V 36 w(serviceable\(\))g(function\))-3 4739
y Fe(\017)48 b Fc(\003owpr)l(oto)p 480 4739 V 35 w(g)o(etinfo\(\))p
Fd(:)29 b(reads)c(optional)f(parameters)h(from)f(the)h(protocol)-3
4935 y Fe(\017)48 b Fc(\003owpr)l(oto)p 480 4935 V 35
w(setinfo\(\))p Fd(:)29 b(sets)c(optional)e(protocol)h(parameters)-149
5236 y(The)h(follo)n(wing)d(section)i(describing)g(the)g(interaction)g
(between)g(the)h(\003o)n(w)f(component)f(and)i(the)f(\003o)n(w)g
(protocols)g(may)-149 5356 y(be)h(helpful)f(in)h(clarifying)f(ho)n(w)g
(the)h(abo)o(v)o(e)f(functions)f(will)h(be)h(used.)1918
5605 y(6)p eop end
%%Page: 7 7
TeXDict begin 7 6 bop -149 194 a Ff(7)144 b(Interaction)33
b(between)h(\003o)o(w)g(component)f(and)i(\003o)o(w)g(pr)m(otocols)-149
517 y Fd(The)27 b(\003o)n(w)g(code)g(that)g(resides)g(abo)o(v)o(e)f
(the)g(\003o)n(w)h(protocols)f(serv)o(es)h(tw)o(o)f(primary)h
(functions:)33 b(multiple)o(xing)24 b(between)-149 637
y(the)h(v)n(arious)f(\003o)n(w)g(protocols,)g(and)h(scheduling)e(w)o
(ork.)-149 857 y(The)i(multiple)o(xing)d(is)i(handled)h(by)f(simply)g
(tracking)g(all)h(acti)n(v)o(e)f(\003o)n(w)g(protocols)g(and)h
(directing)f(\003o)n(w)g(descriptors)h(to)-149 978 y(the)g(appropriate)
g(one.)-149 1198 y(The)31 b(scheduling)f(functionality)f(is)h(the)h
(more)f(complicated)g(of)h(the)g(tw)o(o)f(responsibilities)e(of)j(the)g
(\003o)n(w)f(code.)49 b(This)-149 1318 y(responsibility)27
b(leads)h(to)h(the)g(design)f(of)g(the)h(\003o)n(w)g(protocol)f(interf)
o(ace)h(and)g(the)g(states)f(of)h(the)f(\003o)n(w)h(descriptors.)42
b(In)-149 1438 y(order)32 b(to)e(understand)h(these)g(states,)h(it)e
(is)h(important)e(to)i(understand)f(that)h(\003o)n(w)g(protocols)f
(typically)g(operate)h(with)-149 1559 y(a)h(certain)g(granularity)e
(that)h(is)g(de\002ned)h(by)f(the)h(\003o)n(w)f(protocol)f
(implementation.)49 b(F)o(or)31 b(e)o(xample,)h(a)g(\003o)n(w)f
(protocol)-149 1679 y(may)26 b(transfer)h(data)g(128)f(KB)h(of)f(data)h
(at)g(a)f(time.)35 b(A)27 b(simple)e(implementation)f(of)j(a)g(memory)e
(to)h(netw)o(ork)g(\003o)n(w)h(may)-149 1799 y(post)k(a)h(netw)o(ork)f
(send)g(of)g(128)g(KB,)h(w)o(ait)f(for)g(it)g(to)g(complete,)i(then)e
(post)f(the)h(ne)o(xt)g(send)g(of)g(128)g(KB,)h(and)g(so)f(on.)-149
1920 y(Each)g(of)g(these)g(iterations)f(is)g(dri)n(v)o(en)g(by)h(the)f
(top)h(le)n(v)o(el)e(\003o)n(w)i(component.)48 b(In)31
b(other)f(w)o(ords,)i(the)f(\003o)n(w)g(protocol)f(is)-149
2040 y(not)f(autonomous.)40 b(Rather)30 b(than)e(w)o(ork)h
(continuously)d(once)j(it)f(recei)n(v)o(es)h(a)g(\003o)n(w)f
(descriptor)l(,)h(it)g(only)f(performs)g(one)-149 2161
y(iteration)d(of)h(w)o(ork)f(at)g(a)h(time,)f(and)h(then)f(w)o(aits)g
(for)g(the)h(\003o)n(w)f(component)f(to)h(tell)g(it)g(to)g(continue.)32
b(This)25 b(pro)o(vides)f(the)-149 2281 y(\003o)n(w)h(interf)o(ace)g
(with)f(an)h(opportunity)e(to)i(schedule)f(\003o)n(ws)g(and)h(choose)g
(which)f(ones)h(to)f(service)h(at)g(each)g(iteration.)-149
2501 y(When)34 b(a)f(\003o)n(w)g(descriptor)g(is)g(w)o(aiting)f(for)h
(the)g(\003o)n(w)g(component)g(to)f(allo)n(w)h(it)f(to)h(continue,)i
(then)e(it)f(is)h(\223ready)h(for)-149 2621 y(service\224.)45
b(The)29 b(\003o)n(w)g(component)f(may)h(then)g(call)g(the)g(\003o)n
(wproto)p 2225 2621 30 4 v 34 w(service\(\))h(function)f(to)f(allo)n(w)
h(it)f(to)h(continue.)43 b(In)-149 2742 y(the)25 b(abo)o(v)o(e)f(e)o
(xample,)g(this)g(w)o(ould)g(cause)h(the)f(\003o)n(w)h(protocol)f(to)g
(post)g(another)h(netw)o(ork)f(send.)-149 2962 y(In)34
b(order)h(to)e(disco)o(v)o(er)g(which)h(\003o)n(w)f(descriptors)h(are)g
(\223ready)h(for)f(service\224)h(\(and)f(therefore)h(must)d(be)j
(scheduled\),)-149 3082 y(it)j(calls)g(\003o)n(wproto)p
558 3082 V 34 w(\002nd)p 747 3082 V 36 w(serviceable\(\))h(for)f(each)h
(acti)n(v)o(e)e(\003o)n(w)h(protocol.)69 b(Thus,)41 b(the)d(service)g
(loop)f(of)i(the)e(\003o)n(w)-149 3202 y(component)24
b(looks)g(something)f(lik)o(e)h(this:)-28 3477 y(1.)48
b(call)25 b(\003o)n(wproto)p 656 3477 V 35 w(\002nd)p
846 3477 V 36 w(serviceable\(\))g(for)g(each)h(acti)n(v)o(e)d(\003o)n
(w)i(protocol)f(to)g(generate)i(a)f(list)f(of)g(\003o)n(ws)h(to)f
(service)-28 3667 y(2.)48 b(run)25 b(scheduling)f(algorithm)f(to)h(b)n
(uild)g(list)g(of)h(scheduled)f(\003o)n(ws)-28 3856 y(3.)48
b(call)25 b(\003o)n(wproto)p 656 3856 V 35 w(service\(\))g(for)g(each)h
(scheduled)e(\003o)n(w)h(\(in)f(order\))-28 4046 y(4.)48
b(if)37 b(a)h(\003o)n(w)f(descriptor)g(reaches)g(the)g(completed)g(or)g
(error)h(state)f(\(at)g(an)o(y)g(time\),)i(then)e(mo)o(v)o(e)f(it)h(to)
f(a)i(list)e(of)95 4167 y(completed)24 b(\003o)n(w)h(descriptors)f(to)g
(be)h(returned)g(to)f(the)h(caller)-149 4441 y(The)19
b(scheduling)f(\002lter)h(\(at)g(the)g(time)f(of)h(this)f(writing\))g
(does)h(nothing)e(b)n(ut)h(service)i(all)e(\003o)n(ws)h(in)f(order)-5
b(.)29 b(More)18 b(adv)n(anced)-149 4561 y(schedulers)25
b(will)f(be)h(added)f(later)-5 b(.)-149 4949 y Fb(7.1)119
b(Example)30 b(\003o)o(w)g(pr)n(otocol)g(\(implementation\))-149
5236 y Fd(The)f(def)o(ault)g(\003o)n(w)g(protocol)g(is)f(called)h
(\224\003o)n(wproto)p 1704 5236 V 35 w(bmi)p 1895 5236
V 35 w(tro)o(v)o(e\224)f(and)i(is)e(capable)i(of)f(handling)f(the)h
(follo)n(wing)e(end-)-149 5356 y(point)d(combinations:)1918
5605 y(7)p eop end
%%Page: 8 8
TeXDict begin 8 7 bop -3 194 a Fe(\017)48 b Fd(BMI)25
b(to)g(memory)-3 395 y Fe(\017)48 b Fd(memory)24 b(to)h(BMI)-3
595 y Fe(\017)48 b Fd(BMI)25 b(to)g(T)m(ro)o(v)o(e)-3
796 y Fe(\017)48 b Fd(T)m(ro)o(v)o(e)24 b(to)g(BMI)-149
1114 y(The)h(follo)n(wing)e(summarizes)h(what)g(the)h(principle)f
(\003o)n(w)h(protocol)f(interf)o(ace)h(functions)f(do)g(in)h(this)f
(protocol:)-3 1432 y Fe(\017)48 b Fd(\003o)n(wproto)p
487 1432 30 4 v 35 w(post\(\):)28 b(allocates)22 b(an)o(y)f
(intermediate)g(b)n(uf)n(fers)g(that)g(may)g(be)h(needed,)g(be)o(gins)f
(datatype)g(processing)-3 1633 y Fe(\017)48 b Fd(\003o)n(wproto)p
487 1633 V 35 w(service\(\):)31 b(posts)24 b(the)g(ne)o(xt)g(necessary)
i(BMI)f(and)f(T)m(ro)o(v)o(e)g(operations)-3 1834 y Fe(\017)48
b Fd(\003o)n(wproto)p 487 1834 V 35 w(\002nd)p 677 1834
V 36 w(serviceable\(\):)35 b(tests)26 b(for)h(completion)e(of)i
(pending)f(BMI)h(and)g(tro)o(v)o(e)f(operations,)g(dri)n(v)o(es)f(the)
95 1955 y(state)i(of)f(an)o(y)h(\003o)n(w)f(descriptors)g(af)n(fected)h
(by)g(completion,)e(and)i(returns)f(\003o)n(w)h(descriptors)f(ready)h
(for)g(service)95 2075 y(to)e(caller)-149 2393 y(The)20
b(\003o)n(w)f(protocol)g(performs)g(double)f(b)n(uf)n(fering)h(to)g(k)o
(eep)h(both)f(the)g(T)m(ro)o(v)o(e)f(and)h(BMI)h(interf)o(aces)g(as)f
(b)n(usy)g(as)h(possible)-149 2513 y(when)25 b(transferring)g(between)g
(the)f(tw)o(o.)-149 2733 y(The)35 b(\003o)n(w)f(protocol)f(does)h(not)g
(ha)n(v)o(e)g(an)h(internal)f(thread.)59 b(Ho)n(we)n(v)o(er)l(,)35
b(if)g(it)f(detects)g(that)g(the)g(job)f(interf)o(ace)i(is)f(us-)-149
2854 y(ing)27 b(threads)g(\(through)g(the)p 847 2854
V 883 2854 V 99 w(PVFS2)p 1206 2854 V 37 w(JOB)p 1420
2854 V 36 w(THREADED)p 1993 2854 V 2028 2854 V 99 w(de\002ne\),)h(then)
f(it)g(will)g(use)g(the)g(job)g(interf)o(ace')-5 b(s)27
b(thread)-149 2974 y(manager)e(to)f(push)f(on)h(BMI)g(and)h(T)m(ro)o(v)
o(e)d(operations.)30 b(The)24 b(\002nd)p 2104 2974 V
36 w(serviceable\(\))h(function)e(then)h(just)f(checks)i(for)f(com-)
-149 3094 y(pletion)30 b(noti\002cations)h(from)g(the)g(thread)g
(callback)g(functions,)h(rather)g(than)f(testing)f(the)h(BMI)h(or)f(T)m
(ro)o(v)o(e)f(interf)o(aces)-149 3215 y(directly)-6 b(.)-149
3435 y(T)m(ro)o(v)o(e)22 b(support)g(is)h(compiled)f(out)h(if)g(the)p
1298 3435 V 1334 3435 V 95 w(PVFS2)p 1657 3435 V 36 w(TR)l(O)-5
b(VE)p 2016 3435 V 36 w(SUPPOR)f(T)p 2482 3435 V 2520
3435 V 97 w(de\002ne)24 b(is)e(not)h(detected.)30 b(This)23
b(is)f(mainly)-149 3555 y(done)j(in)f(client)h(libraries)f(which)g(do)h
(not)f(need)h(to)g(use)f(T)m(ro)o(v)o(e)g(in)g(order)h(to)g(reduce)g
(library)f(dependencies.)-149 3993 y Ff(8)144 b(Implementation)32
b(note:)43 b(a)l(v)o(oiding)34 b(\003o)o(ws)-149 4316
y Fd(The)d(\003o)n(w)g(interf)o(ace)h(will)e(introduce)g(o)o(v)o
(erhead)h(for)g(small)f(operations)g(that)h(w)o(ould)f(not)g(otherwise)
h(be)g(present.)49 b(It)-149 4437 y(may)27 b(therefore)h(be)f(helpful)g
(to)g(e)n(v)o(entually)e(introduce)h(an)i(optimization)d(to)h(a)n(v)n
(oid)h(the)g(use)g(of)g(\003o)n(ws)g(for)g(small)g(read)-149
4557 y(or)e(write)g(operations.)-149 4995 y Fa(text)59
b(of)h(an)f(email)g(discussion)e(on)i(this)g(topic)g(\(>)g(part)g(by)g
(Phil,)g(non)g(>)-149 5116 y(part)g(by)h(Rob\):)-149
5356 y(>)g(Yeah,)f(we)g(need)g(to)g(get)g(these)g(ideas)f(documented)g
(somewhere.)117 b(There)59 b(may)g(actually)1918 5605
y Fd(8)p eop end
%%Page: 9 9
TeXDict begin 9 8 bop -149 194 a Fa(>)60 b(be)f(a)h(couple)e(of)i
(eager)e(modes.)118 b(By)60 b(default,)e(BMI)h(only)g(allows)f
(unexpected)-149 314 y(>)i(messages)e(<)h(16K)h(or)f(so.)119
b(That)59 b(places)f(a)i(cap)f(on)g(the)g(eager)g(write)f(size,)-149
434 y(>)i(unless)e(we)i(had)f(a)g(second)g(eager)f(mode)h(that)g
(consists)f(of)h(a\))h(send)f(write)f(request)-149 555
y(>)i(b\))f(send)g(write)g(data)g(c\))g(receive)f(ack...)-149
796 y(Yes.)119 b(These)59 b(two)g(modes)f(are)i(usually)e
(differentiated)e(by)k(the)f(terms)f("short")h(and)-149
916 y("eager",)f(where)h(the)g("short")f(one)h(puts)g(the)g(data)g
(actually)f(into)h(the)g(same)-149 1036 y(packet/message)e(\(depending)
h(on)h(the)g(network)f(layer)h(at)g(which)g(we)g(are)g(working\).)-149
1277 y(>)h(Of)f(course)g(all)g(of)g(this)g(would)g(need)f(to)i(be)f
(tunable)f(so)i(that)f(we)g(can)g(see)g(what)-149 1397
y(>)h(works)f(well.)118 b(Maybe)59 b(rules)f(like:)-149
1518 y(>)-149 1638 y(>)i(contig)e(writes)h(<)g(15K)g(:)h(simple)e
(eager)h(write)-149 1759 y(>)h(15K)f(<)h(contig)e(writes)g(<)i(64K)f(:)
h(two)f(part)g(eager)f(write)-149 1879 y(>)i(writes)e(>)i(64K)f(&&)g
(noncontig)f(writes)g(:)i(flow)-149 1999 y(>)-149 2120
y(>)g(contig)e(reads)h(<)h(64K)f(:)g(eager)g(read)-149
2240 y(>)h(contig)e(reads)h(>)h(64K)f(&&)g(noncontig)f(reads)g(:)i
(flow)-149 2481 y(Yeah,)f(something)f(like)h(that.)1918
5605 y Fd(9)p eop end
%%Trailer

userdict /end-hook known{end-hook}if
%%EOF
