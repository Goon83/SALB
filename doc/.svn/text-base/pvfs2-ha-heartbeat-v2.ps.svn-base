%!PS-Adobe-2.0
%%Creator: dvips(k) 5.96.1 Copyright 2007 Radical Eye Software
%%Title: pvfs2-ha-heartbeat-v2.dvi
%%CreationDate: Thu Feb  4 12:40:17 2010
%%Pages: 9
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Roman Times-Bold CMSY10 CMR10 CMMI10 Courier
%%+ Times-Italic
%%DocumentPaperSizes: Letter
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -t letter pvfs2-ha-heartbeat-v2.dvi -o
%+ pvfs2-ha-heartbeat-v2.ps
%DVIPSParameters: dpi=600
%DVIPSSource:  TeX output 2010.02.04:1240
%%BeginProcSet: tex.pro 0 0
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/CharBuilder{save 3 1 roll S A/base get 2 index get S
/BitMaps get S get/Cd X pop/ctr 0 N Cdx 0 Cx Cy Ch sub Cx Cw add Cy
setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx sub Cy .1 sub]{Ci}imagemask
restore}B/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc 0 0
% File 8r.enc  TeX Base 1 Encoding  Revision 2.0  2002-10-30
%
% @@psencodingfile@{
%   author    = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry,
%                W. Schmidt, P. Lehman",
%   version   = "2.0",
%   date      = "27nov06",
%   filename  = "8r.enc",
%   email     = "tex-fonts@@tug.org",
%   docstring = "This is the encoding vector for Type1 and TrueType
%                fonts to be used with TeX.  This file is part of the
%                PSNFSS bundle, version 9"
% @}
% 
% The idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard encoding, ISO Latin 1, Windows ANSI including the euro symbol,
% MacRoman, and some extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% These are /dotlessj /ff /ffi /ffl.
% 
% (4) hyphen appears twice for compatibility with both ASCII and Windows.
%
% (5) /Euro was assigned to 128, as in Windows ANSI
%
% (6) Missing characters from MacRoman encoding incorporated as follows:
%
%     PostScript      MacRoman        TeXBase1
%     --------------  --------------  --------------
%     /notequal       173             0x16
%     /infinity       176             0x17
%     /lessequal      178             0x18
%     /greaterequal   179             0x19
%     /partialdiff    182             0x1A
%     /summation      183             0x1B
%     /product        184             0x1C
%     /pi             185             0x1D
%     /integral       186             0x81
%     /Omega          189             0x8D
%     /radical        195             0x8E
%     /approxequal    197             0x8F
%     /Delta          198             0x9D
%     /lozenge        215             0x9E
%
/TeXBase1Encoding [
% 0x00
 /.notdef /dotaccent /fi /fl
 /fraction /hungarumlaut /Lslash /lslash
 /ogonek /ring /.notdef /breve
 /minus /.notdef /Zcaron /zcaron
% 0x10
 /caron /dotlessi /dotlessj /ff
 /ffi /ffl /notequal /infinity
 /lessequal /greaterequal /partialdiff /summation
 /product /pi /grave /quotesingle
% 0x20
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus
 /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three
 /four /five /six /seven
 /eight /nine /colon /semicolon
 /less /equal /greater /question
% 0x40
 /at /A /B /C
 /D /E /F /G
 /H /I /J /K
 /L /M /N /O
% 0x50
 /P /Q /R /S
 /T /U /V /W
 /X /Y /Z /bracketleft
 /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c
 /d /e /f /g
 /h /i /j /k
 /l /m /n /o
% 0x70
 /p /q /r /s
 /t /u /v /w
 /x /y /z /braceleft
 /bar /braceright /asciitilde /.notdef
% 0x80
 /Euro /integral /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /Omega /radical /approxequal
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /Delta /lozenge /Ydieresis
% 0xA0
 /.notdef /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot /hyphen /registered /macron
% 0xB0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde
 /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def


%%EndProcSet
%%BeginProcSet: texps.pro 0 0
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]FontType 0
ne{/Metrics exch def dict begin Encoding{exch dup type/integertype ne{
pop pop 1 sub dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get
div def}ifelse}forall Metrics/Metrics currentdict end def}{{1 index type
/nametype eq{exit}if exch pop}loop}ifelse[2 index currentdict end
definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{dup
sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1 roll
mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def dup[
exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}if}
forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}def
end

%%EndProcSet
%%BeginFont: CMMI10
%!PS-AdobeFont-1.1: CMMI10 1.100
%%CreationDate: 1996 Jul 23 07:53:57
% Copyright (C) 1997 American Mathematical Society. All Rights Reserved.
11 dict begin
/FontInfo 7 dict dup begin
/version (1.100) readonly def
/Notice (Copyright (C) 1997 American Mathematical Society. All Rights Reserved) readonly def
/FullName (CMMI10) readonly def
/FamilyName (Computer Modern) readonly def
/Weight (Medium) readonly def
/ItalicAngle -14.04 def
/isFixedPitch false def
end readonly def
/FontName /CMMI10 def
/PaintType 0 def
/FontType 1 def
/FontMatrix [0.001 0 0 0.001 0 0] readonly def
/Encoding 256 array
0 1 255 {1 index exch /.notdef put} for
dup 61 /slash put
dup 78 /N put
readonly def
/FontBBox{-32 -250 1048 750}readonly def
currentdict end
currentfile eexec
D9D66F633B846A97B686A97E45A3D0AA0529731C99A784CCBE85B4993B2EEBDE
3B12D472B7CF54651EF21185116A69AB1096ED4BAD2F646635E019B6417CC77B
532F85D811C70D1429A19A5307EF63EB5C5E02C89FC6C20F6D9D89E7D91FE470
B72BEFDA23F5DF76BE05AF4CE93137A219ED8A04A9D7D6FDF37E6B7FCDE0D90B
986423E5960A5D9FBB4C956556E8DF90CBFAEC476FA36FD9A5C8175C9AF513FE
D919C2DDD26BDC0D99398B9F4D03D5993DFC0930297866E1CD0A319B6B1FD958
9E394A533A081C36D456A09920001A3D2199583EB9B84B4DEE08E3D12939E321
990CD249827D9648574955F61BAAA11263A91B6C3D47A5190165B0C25ABF6D3E
6EC187E4B05182126BB0D0323D943170B795255260F9FD25F2248D04F45DFBFB
DEF7FF8B19BFEF637B210018AE02572B389B3F76282BEB29CC301905D388C721
59616893E774413F48DE0B408BC66DCE3FE17CB9F84D205839D58014D6A88823
D9320AE93AF96D97A02C4D5A2BB2B8C7925C4578003959C46E3CE1A2F0EAC4BF
8B9B325E46435BDE60BC54D72BC8ACB5C0A34413AC87045DC7B84646A324B808
6FD8E34217213E131C3B1510415CE45420688ED9C1D27890EC68BD7C1235FAF9
1DAB3A369DD2FC3BE5CF9655C7B7EDA7361D7E05E5831B6B8E2EEC542A7B38EE
03BE4BAC6079D038ACB3C7C916279764547C2D51976BABA94BA9866D79F13909
95AA39B0F03103A07CBDF441B8C5669F729020AF284B7FF52A29C6255FCAACF1
74109050FBA2602E72593FBCBFC26E726EE4AEF97B7632BC4F5F353B5C67FED2
3EA752A4A57B8F7FEFF1D7341D895F0A3A0BE1D8E3391970457A967EFF84F6D8
47750B1145B8CC5BD96EE7AA99DDC9E06939E383BDA41175233D58AD263EBF19
AFC0E2F840512D321166547B306C592B8A01E1FA2564B9A26DAC14256414E4C8
42616728D918C74D13C349F4186EC7B9708B86467425A6FDB3A396562F7EE4D8
40B43621744CF8A23A6E532649B66C2A0002DD04F8F39618E4F572819DD34837
B5A08E643FDCA1505AF6A1FA3DDFD1FA758013CAED8ACDDBBB334D664DFF5B53
95601766777978D01677B8D19E1B10A078432D2884BB5080C003B1DEC0457896
1DE60A811BFE149D444E8F50323862364E2A46E2A3A73E830F342E6495EDA478
31827972397373A98221DD07D660D7AA7218FB0A384C5AD2D1234D5BD0A787D7
91DE0AFF87A59E2AB4EB98C1BC5D41A8EBF9A23A3CE8CFA233CE5D5096503FCC
1C8FA1B67932DEBC52FDC1B943A6C66C81E8523109CF2D3F8CE78A323F3286C4
C7CA842B3FF62736D837C1CC8E3AF5E64717B1F46FAA9E08F80A5AA076EB7112
2EDD159796EB4C62150F7B744AD9787B8A5A1BDCCF004BE76D2E30468A4EC817
6144066D51BC5A2814A987BDB15E0382125AE77CF5B64AC7D56EBEAF0E7B01A7
87BA5F643B708E698B2718979D9381A25521231E10B7C4A3C3CF8CEF1B24411F
579123CE5BE51C2286D67FCE4FC9226AA428EAA85145A27E9E103B73BDF17543
5BDBD7B8C2C1D81D8510237C4A13B791E330BC043CEE62523A57EDAEC847D3C3
E57DF75EC1A505FCA22EF37943C13B1A1900C974D75E7F4C2E57978104C9C01D
745A20E42DE87AA4770029D5731F0E364602292EA386F687F3F0548CC474B445
DDEE3BDA6BCB3CC3AC26C0C3659D69DE761A08BA560BE909ADFE5FA7AC78126A
6540113E8A7EC2B9F297A340
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
cleartomark
%%EndFont 
%%BeginFont: CMR10
%!PS-AdobeFont-1.1: CMR10 1.00B
%%CreationDate: 1992 Feb 19 19:54:52
% Copyright (C) 1997 American Mathematical Society. All Rights Reserved.
11 dict begin
/FontInfo 7 dict dup begin
/version (1.00B) readonly def
/Notice (Copyright (C) 1997 American Mathematical Society. All Rights Reserved) readonly def
/FullName (CMR10) readonly def
/FamilyName (Computer Modern) readonly def
/Weight (Medium) readonly def
/ItalicAngle 0 def
/isFixedPitch false def
end readonly def
/FontName /CMR10 def
/PaintType 0 def
/FontType 1 def
/FontMatrix [0.001 0 0 0.001 0 0] readonly def
/Encoding 256 array
0 1 255 {1 index exch /.notdef put} for
dup 40 /parenleft put
dup 41 /parenright put
dup 49 /one put
dup 50 /two put
readonly def
/FontBBox{-251 -250 1009 969}readonly def
currentdict end
currentfile eexec
D9D66F633B846A97B686A97E45A3D0AA052A014267B7904EB3C0D3BD0B83D891
016CA6CA4B712ADEB258FAAB9A130EE605E61F77FC1B738ABC7C51CD46EF8171
9098D5FEE67660E69A7AB91B58F29A4D79E57022F783EB0FBBB6D4F4EC35014F
D2DECBA99459A4C59DF0C6EBA150284454E707DC2100C15B76B4C19B84363758
469A6C558785B226332152109871A9883487DD7710949204DDCF837E6A8708B8
2BDBF16FBC7512FAA308A093FE5CF7158F1163BC1F3352E22A1452E73FECA8A4
87100FB1FFC4C8AF409B2067537220E605DA0852CA49839E1386AF9D7A1A455F
D1F017CE45884D76EF2CB9BC5821FD25365DDEA6E45F332B5F68A44AD8A530F0
92A36FAC8D27F9087AFEEA2096F839A2BC4B937F24E080EF7C0F9374A18D565C
295A05210DB96A23175AC59A9BD0147A310EF49C551A417E0A22703F94FF7B75
409A5D417DA6730A69E310FA6A4229FC7E4F620B0FC4C63C50E99E179EB51E4C
4BC45217722F1E8E40F1E1428E792EAFE05C5A50D38C52114DFCD24D54027CBF
2512DD116F0463DE4052A7AD53B641A27E81E481947884CE35661B49153FA19E
0A2A860C7B61558671303DE6AE06A80E4E450E17067676E6BBB42A9A24ACBC3E
B0CA7B7A3BFEA84FED39CCFB6D545BB2BCC49E5E16976407AB9D94556CD4F008
24EF579B6800B6DC3AAF840B3FC6822872368E3B4274DD06CA36AF8F6346C11B
43C772CC242F3B212C4BD7018D71A1A74C9A94ED0093A5FB6557F4E0751047AF
D72098ECA301B8AE68110F983796E581F106144951DF5B750432A230FDA3B575
5A38B5E7972AABC12306A01A99FCF8189D71B8DBF49550BAEA9CF1B97CBFC7CC
96498ECC938B1A1710B670657DE923A659DB8757147B140A48067328E7E3F9C3
7D1888B284904301450CE0BC15EEEA00E48CCD6388F3FC3C8578EF9A20A0E06E
4F7ADDAF0E7D1E182D115BF1AD931977325AD391E72E2B13CC108E3726C11099
E2000623188AAAC9F3E233EB253BDD8B0A4759A66A113E066238B0086AC1B634
5ABFF90E4B5ED3FA69C22541981B2BFC9710AEF6B50A8BB53431C7B4D380D721
639E005D6B4688EE16BFF48443E7C9E5FB5BC5883E271CB03428948F9221D912
2E2F3750D1A1AE5FF546535E1DEBF69B458DF49EA3817D9612E5C9A0B7A698E7
5F576FB653DE1297A8C417599917F9D75D42234E54B4B1E99669BA5A40B4AA21
43CE5634719D8F3536694F15E4F8E5B7D9CFE15B68A7D53FF47B923F0AB3CD4F
FEC1BAA7036B5936213BB109CA9425C69A28B7221E68FC79848CD6AFB220F45A
A0D21EC1020DA99816247E6B49FE263926782D00E5B3A57151761303FEA24487
F85FB9B6E6C83B05B38B3BA7F81776B082204C032D467B91767AAD865BBF0F1C
271649C2ED9F8111C5637017470B3F6C3DAA3AF1705DF2B7838968B4EA7F9E62
BE7DA1AD8D81D3608EE86352BEA38DB87A0D57A5DD28829D8728077ED4C16931
59E158F9155CFCD1CE098395826D7D29C56EE27BF71132F6F9BB9713D12E2E66
6E4436B75B3A099D08D5055831FA7E1A317F6262D47330660CDD404AF607E403
A1E7EAB8FA5CCE4682D6D98C389A62F5AEFC6CC8B0F7ED3CB28B9DF8E1396597
E02560F82AA44DF1C07C8E3CA6BBFDBB02813CA762FBC66B5D7EC5D91FDE2AD3
14758317DDF5E0294E92CA54A9C800F71639CD8C34456914BE09D4AEFAE8B7C5
0CFFDEC23D1A39C761F50DD833E00014BA95304DCEB96F0911F752EB07646451
095184558A01E4DD5D7E8CE3FFBA784B1B3DDA3233CC8573B648B14D4D53D14C
506301F42A744C9907226C66F7B4F6EFA2C5ED3E5D23AC924E9833B842CD612E
326D16BF54A663A990E21E0BD5364BD086703E0549B8D354C8F495912B34C980
63571DEB6AC08BA3DAAEC7C6881CC35FA59F2B8FE4F9C8525EAE69850517E092
7AB36A00C11B0A53056F7FDE49E196A6448A969848573B4B478831B2D2708E31
C233FB84F043F94E743778CF0769938196FD60C6F89D7521A27CC9958B445779
41201D321B6879E30553E921BFB82B344851
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
cleartomark
%%EndFont 
%%BeginFont: CMSY10
%!PS-AdobeFont-1.1: CMSY10 1.0
%%CreationDate: 1991 Aug 15 07:20:57
% Copyright (C) 1997 American Mathematical Society. All Rights Reserved.
11 dict begin
/FontInfo 7 dict dup begin
/version (1.0) readonly def
/Notice (Copyright (C) 1997 American Mathematical Society. All Rights Reserved) readonly def
/FullName (CMSY10) readonly def
/FamilyName (Computer Modern) readonly def
/Weight (Medium) readonly def
/ItalicAngle -14.035 def
/isFixedPitch false def
end readonly def
/FontName /CMSY10 def
/PaintType 0 def
/FontType 1 def
/FontMatrix [0.001 0 0 0.001 0 0] readonly def
/Encoding 256 array
0 1 255 {1 index exch /.notdef put} for
dup 0 /minus put
dup 15 /bullet put
dup 100 /ceilingleft put
dup 101 /ceilingright put
dup 102 /braceleft put
dup 103 /braceright put
readonly def
/FontBBox{-29 -960 1116 775}readonly def
currentdict end
currentfile eexec
D9D66F633B846A97B686A97E45A3D0AA052F09F9C8ADE9D907C058B87E9B6964
7D53359E51216774A4EAA1E2B58EC3176BD1184A633B951372B4198D4E8C5EF4
A213ACB58AA0A658908035BF2ED8531779838A960DFE2B27EA49C37156989C85
E21B3ABF72E39A89232CD9F4237FC80C9E64E8425AA3BEF7DED60B122A52922A
221A37D9A807DD01161779DDE7D31FF2B87F97C73D63EECDDA4C49501773468A
27D1663E0B62F461F6E40A5D6676D1D12B51E641C1D4E8E2771864FC104F8CBF
5B78EC1D88228725F1C453A678F58A7E1B7BD7CA700717D288EB8DA1F57C4F09
0ABF1D42C5DDD0C384C7E22F8F8047BE1D4C1CC8E33368FB1AC82B4E96146730
DE3302B2E6B819CB6AE455B1AF3187FFE8071AA57EF8A6616B9CB7941D44EC7A
71A7BB3DF755178D7D2E4BB69859EFA4BBC30BD6BB1531133FD4D9438FF99F09
4ECC068A324D75B5F696B8688EEB2F17E5ED34CCD6D047A4E3806D000C199D7C
515DB70A8D4F6146FE068DC1E5DE8BC57032092296D5371C275E56FB4903A60E
73A22818DE22EB78EEE0E69EDE2E31BA367FE9AFFF8C7D74AB1E2400953F643B
7BC604F821A4CCC56FC4E40E0B40B8CB82A045EFB4B9F681EDBD012AC35166EF
62940137319D3082A033F939A0715024F66640DEBDC99C9E943657E6856418A1
F9348B36092089EC24A09C1AD82AAE28782BAC696A8716CB991CC8423B30DB87
9D0316E79E3C95C9C7146B99A2254529C6D7EFB2C3D8370DF8B65491CA409E0F
3E2EF5974A816A0F05CFE5751F65FC88FBC6A8E297686DCED3007BE6E356B397
384EAA3B5C6129E6B54F635E2856A9B7C7EADBE6D7A6131C35FC225064CAB2F1
5B5DA8EB9F8F07291AB4D256AF6AEAFB64583DAF83DEC4D60AD5B84AAF29B532
43D832E25D7A993230C8FA04AC65B3683F242CE3CB473971076506EE25B3894F
0F2DC9724755D31B5B1E019B35722D390C70E7E12A063549226C6BF9B9DB73D2
5C5FB9CA2B06D662762D74C9256EB1105D00011F6463C0FC541921705360917B
10BE3F03C15F6667AE9165961DAEFE5160355631F1144D8BAEE7B244A83F374E
21CDE5EAF785D7C9A9462F0E655A56516C89D4DED672CCE9D4AF029A86E27002
0BF29C239D9BC29ED1F543BBCC4EFAD6F23021F95190AE0B2D85E766A5E8D4DF
F6F0109AABC3E60CBAB6CC16D9AD50A950F9D27D671FA462E6D164A2ABF7AFAE
070C6422418E5F34FC6543B529AA4D984CF9E44E56E62ED106BE97CE85A9A9F8
592A6F0FA359142898DBE052660E9E64339E20C14F12A7A072152DEBF40D5079
32F5EABC62D34C33D1DC27710C96A0BE36E5823461CAFAAE71ED4EDD29AFE421
2C2C54DF08F85027A382A55169C6E9D86642EDBDF59A6430E937EC1DDAB090B3
96F425632A3EF6FD7BFA05420FB81516B6E01C9089AC8A66D292330859EB016D
BC613C2D7D0E90D58655A3F04D63CAF6F1C0504DBDEFD15017E123096235D864
53A8D526841EA51A71AAFA2CE3F85467FE9A7C3EFB9A89EF87CD2170C0FA7C2B
2613DF22E582315994D27927E9EF193439B0CBDF3E090FDA78E16948F3AF0C40
D8A2190E9162DBED88403E89BBB5B1020EBD3D9ECBA8B0ECF40BAD989060BFF7
B2A731E6A27A2D001C56CB1A8DC91BD473E273C31C89A83E17EA9BE472286270
FFEB13BE89E8BF886F7F412E0B84014BF3251307A6D16A
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
cleartomark
%%EndFont 
TeXDict begin 40258431 52099146 1000 600 600 (pvfs2-ha-heartbeat-v2.dvi)
@start /Fa 139[25 4[45 45 110[{TeXBase1Encoding ReEncodeFont}3
90.9091 /Times-Italic rf /Fb 139[30 35 40 2[45 51 4[25
51 45 1[40 51 2[45 13[51 4[66 26[45 45 45 2[23 46[{
TeXBase1Encoding ReEncodeFont}17 90.9091 /Times-Bold
rf /Fc 134[50 1[72 1[55 33 39 44 1[55 50 55 83 28 55
1[28 55 50 33 44 55 44 1[50 10[72 2[55 2[61 1[72 4[39
78 1[61 12[50 50 50 50 50 50 50 50 50 2[25 43[55 2[{
TeXBase1Encoding ReEncodeFont}38 99.6264 /Times-Bold
rf /Fd 131[55 2[55 55 55 55 55 55 55 55 55 55 55 55 55
55 55 1[55 55 55 55 55 55 55 55 55 1[55 2[55 5[55 55
55 55 55 55 55 2[55 55 1[55 55 55 1[55 1[55 55 55 55
2[55 55 55 1[55 55 55 55 55 55 55 55 55 55 55 55 55 55
1[55 55 5[55 55 35[{TeXBase1Encoding ReEncodeFont}65
90.9091 /Courier rf /Fe 177[73 16[45 61[{}2 90.9091 /CMMI10
rf /Ff 205[45 45 7[35 35 40[{}4 90.9091 /CMR10 rf /Fg
152[45 45 40 40 84[45 14[71{}6 90.9091 /CMSY10 rf /Fh
107[40 40 24[40 45 45 66 45 45 25 35 30 45 45 45 45 71
25 45 25 25 45 45 30 40 45 40 45 40 7[66 66 86 66 66
56 51 61 66 51 66 66 81 56 2[30 66 66 51 56 66 61 61
66 6[25 45 45 45 45 45 45 45 45 45 45 25 23 30 23 2[30
30 36[51 51 2[{TeXBase1Encoding ReEncodeFont}70 90.9091
/Times-Roman rf /Fi 134[42 1[60 1[42 23 32 28 1[42 42
42 65 23 42 1[23 42 42 28 37 42 37 1[37 10[60 2[46 2[46
1[60 4[28 60 1[46 12[42 42 42 42 42 42 42 42 42 2[21
43[46 2[{TeXBase1Encoding ReEncodeFont}38 83.022 /Times-Roman
rf /Fj 134[42 42 1[42 46 28 32 37 46 46 42 46 69 23 2[23
46 42 28 37 46 37 46 42 9[83 60 2[46 60 1[51 2[78 3[32
65 1[51 1[60 60 55 60 7[42 42 42 42 42 42 42 42 42 42
45[46 2[{TeXBase1Encoding ReEncodeFont}46 83.022 /Times-Bold
rf /Fk 134[60 60 1[60 66 40 47 53 66 66 60 66 100 33
2[33 66 60 40 53 66 53 66 60 9[120 86 2[66 86 1[73 2[113
3[47 93 1[73 1[86 86 80 86 7[60 60 60 60 60 60 60 60
60 60 45[66 2[{TeXBase1Encoding ReEncodeFont}46 119.552
/Times-Bold rf /Fl 199[50 5[50 1[50 48[{TeXBase1Encoding ReEncodeFont}3
99.6264 /Times-Roman rf /Fm 134[72 2[72 72 40 56 48 3[72
1[40 2[40 72 72 1[64 2[72 64 10[104 2[80 2[80 7[104 1[80
2[96 1[104 14[72 1[72 1[36 46[{TeXBase1Encoding ReEncodeFont}24
143.462 /Times-Roman rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%BeginPaperSize: Letter
/setpagedevice where
{ pop << /PageSize [612 792] >> setpagedevice }
{ /letter where { pop letter } if }
ifelse
%%EndPaperSize
 end
%%EndSetup
%%Page: 1 1
TeXDict begin 1 0 bop 369 456 a Fm(PVFS)35 b(High)g(A)-11
b(v)l(ailability)34 b(Clustering)f(using)i(Heartbeat)f(2.0)1850
912 y Fl(2008)0 1298 y Fk(Contents)0 1483 y Fj(1)83 b(Intr)o(oduction)
3281 b(2)0 1666 y(2)83 b(Requir)o(ements)3236 b(2)125
1765 y Fi(2.1)85 b(Hardw)o(are)63 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)143 b(2)315 1865 y(2.1.1)98 b(Nodes)36
b(.)41 b(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)143
b(2)315 1965 y(2.1.2)98 b(Storage)56 b(.)42 b(.)f(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)143 b(2)315 2064 y(2.1.3)98 b(Stonith)70
b(.)42 b(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)143 b(2)125
2164 y(2.2)85 b(Softw)o(are)28 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)143 b(3)125 2264 y(2.3)85 b(Netw)o(ork)37
b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)143
b(3)0 2446 y Fj(3)83 b(Con\002guring)19 b(PVFS)3076 b(3)0
2629 y(4)83 b(Con\002guring)19 b(storage)3024 b(4)0 2812
y(5)83 b(Con\002guring)19 b(stonith)3039 b(5)0 2994 y(6)83
b(Distrib)n(uting)20 b(Heartbeat)f(scripts)2665 b(5)0
3177 y(7)83 b(Base)20 b(Heartbeat)f(con\002guration)2689
b(5)0 3359 y(8)83 b(CIB)21 b(con\002guration)3088 b(5)125
3459 y Fi(8.1)85 b(crm)p 450 3459 25 4 v 29 w(con\002g)23
b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)143
b(6)125 3559 y(8.2)85 b(nodes)71 b(.)41 b(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)143 b(6)125 3658 y(8.3)85
b(resources)20 b(and)f(groups)61 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)143
b(6)125 3758 y(8.4)85 b(IP)o(addr)44 b(.)d(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)143 b(6)125 3858 y(8.5)85
b(Filesystem)31 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)143 b(7)125 3957 y(8.6)85 b(PVFS)68 b(.)41 b(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)143 b(7)125 4057
y(8.7)85 b(rsc)p 417 4057 V 30 w(location)57 b(.)41 b(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)143 b(7)125 4156 y(8.8)85
b(rsc)p 417 4156 V 30 w(order)24 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)143 b(7)125 4256 y(8.9)85
b(stonith)39 b(.)i(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)143 b(8)0 4439 y Fj(9)83 b(Starting)19 b(Heartbeat)3060
b(8)0 4621 y(10)41 b(Mounting)20 b(the)g(\002le)h(system)2864
b(8)0 4804 y(11)41 b(What)20 b(happens)h(during)f(failo)o(v)o(er)2666
b(8)0 4987 y(12)41 b(Contr)o(olling)18 b(Heartbeat)2942
b(9)0 5169 y(13)41 b(Additional)20 b(examples)3006 b(9)1927
5499 y Fh(1)p eop end
%%Page: 2 2
TeXDict begin 2 1 bop 0 91 a Fk(1)119 b(Intr)n(oduction)0
298 y Fh(This)35 b(document)h(describes)i(ho)n(w)c(to)h(con\002gure)h
(PVFS)c(for)j(high)h(a)n(v)n(ailability)i(using)e(Heartbeat)g(v)o
(ersion)h(2.x)d(from)0 411 y(www)-6 b(.linux-ha.or)n(g.)141
524 y(The)24 b(combination)i(of)e(PVFS)e(and)i(Heartbeat)i(can)e
(support)i(an)e(arbitrary)i(number)f(of)f(acti)n(v)o(e)h(serv)o(er)f
(nodes)i(and)e(an)0 637 y(arbitrary)f(number)f(of)f(passi)n(v)o(e)h
(spare)g(nodes.)29 b(Spare)21 b(nodes)i(are)e(not)g(required)i(unless)g
(you)e(wish)g(to)g(a)n(v)n(oid)i(performance)0 750 y(de)o(gradation)h
(upon)e(f)o(ailure.)30 b(As)20 b(con\002gured)k(in)d(this)h(document,)h
(PVFS)c(will)h(be)i(able)g(to)f(tolerate)i Fg(d)p Ff(\(\()p
Fe(N)r(=)p Ff(2\))12 b Fg(\000)g Ff(1\))p Fg(e)23 b Fh(node)0
863 y(f)o(ailures,)k(where)e(N)e(is)i(the)g(number)g(of)g(nodes)h
(present)h(in)d(the)h(Heartbeat)h(cluster)h(including)g(spares.)34
b(Ov)o(er)24 b(half)h(of)g(the)0 976 y(nodes)g(must)e(be)h(a)n(v)n
(ailable)i(in)d(order)i(to)e(reach)i(a)e(quorum)h(and)g(decide)h(if)f
(another)h(node)f(has)g(f)o(ailed.)141 1089 y(Heartbeat)j(can)e(be)g
(con\002gured)i(to)e(monitor)h(IP)e(connecti)n(vity)-6
b(,)28 b(storage)f(hardw)o(are)g(connecti)n(vity)-6 b(,)28
b(and)e(responsi)n(v)o(e-)0 1202 y(ness)33 b(of)f(the)h(PVFS)d
(daemons.)57 b(F)o(ailure)33 b(of)f(an)o(y)g(of)h(these)g(components)i
(will)d(trigger)i(a)e(node)i(le)n(v)o(el)e(f)o(ailo)o(v)o(er)i(e)n(v)o
(ent.)0 1315 y(PVFS)21 b(clients)k(will)e(transparently)28
b(continue)d(operation)i(follo)n(wing)e(a)e(f)o(ailo)o(v)o(er)-5
b(.)141 1427 y(No)29 b(modi\002cations)i(of)e(PVFS)d(are)k(required.)47
b(Example)30 b(scripts)g(referenced)i(in)d(this)h(document)h(are)e(a)n
(v)n(ailable)i(in)0 1540 y(the)24 b Fd(examples/heart)o(bea)o(t)16
b Fh(directory)26 b(of)e(the)g(PVFS)d(source)k(tree.)0
1828 y Fk(2)119 b(Requir)n(ements)0 2038 y Fc(2.1)99
b(Hard)o(war)n(e)0 2213 y Fb(2.1.1)92 b(Nodes)0 2387
y Fh(An)o(y)22 b(number)i(of)f(nodes)h(may)e(be)h(con\002gured,)i
(although)g(you)e(need)h(at)f(least)g(three)h(total)g(in)e(order)i(to)f
(tolerate)i(a)d(f)o(ailure.)0 2500 y(Y)-10 b(ou)25 b(may)f(also)i(use)f
(an)o(y)g(number)h(of)e(spare)i(nodes.)34 b(A)24 b(spare)i(node)g(is)e
(a)h(node)g(that)h(does)g(not)f(run)g(an)o(y)g(services)i(until)f(a)0
2613 y(f)o(ailo)o(v)o(er)e(occurs.)31 b(If)22 b(you)i(ha)n(v)o(e)g(one)
g(or)f(more)g(spares,)h(then)g(the)o(y)g(will)f(be)g(selected)i
(\002rst)e(to)g(run)g(resources)j(in)d(a)g(f)o(ailo)o(v)o(er)0
2726 y(situation.)49 b(If)30 b(you)g(ha)n(v)o(e)g(no)g(spares)h(\(or)f
(all)g(spares)h(are)f(e)o(xhausted\),)j(then)e(at)e(least)i(one)f(node)
g(will)g(ha)n(v)o(e)g(to)g(run)g(tw)o(o)0 2839 y(services)c
(simultaneously)-6 b(,)27 b(which)d(may)f(de)o(grade)i(performance.)141
2952 y(The)20 b(e)o(xamples)h(in)f(this)h(document)h(will)e(use)g(4)g
(acti)n(v)o(e)h(nodes)h(and)e(1)g(spare)h(node,)h(for)e(a)g(total)h(of)
f(5)g(nodes.)29 b(Heartbeat)0 3064 y(has)24 b(been)g(tested)h(with)e
(up)h(to)g(16)f(nodes)i(in)e(con\002gurations)k(similar)e(to)e(the)h
(one)g(outlined)i(in)d(this)h(document.)0 3305 y Fb(2.1.2)92
b(Storage)0 3480 y Fh(A)26 b(shared)i(storage)h(de)n(vice)f(is)f
(required.)42 b(The)26 b(storage)j(must)e(be)g(con\002gured)i(to)e
(allocate)i(a)e(separate)i(block)f(de)n(vice)g(to)0 3593
y(each)c(PVFS)d(daemon,)k(and)f(all)f(nodes)i(\(including)h(spares\))g
(must)d(be)h(capable)h(of)f(accessing)i(all)d(block)i(de)n(vices.)141
3706 y(One)e(w)o(ay)f(of)h(achie)n(ving)i(this)f(is)e(by)h(using)h(a)f
(SAN.)d(In)j(the)g(e)o(xamples)h(used)g(in)e(this)i(document,)g(the)f
(SAN)e(has)i(been)0 3818 y(di)n(vided)k(into)f(4)f(LUNs.)33
b(Each)25 b(of)g(the)h(5)f(nodes)h(in)g(the)f(cluster)i(is)e(capable)i
(of)f(mounting)h(all)e(4)g(LUNs.)33 b(The)25 b(Heartbeat)0
3931 y(softw)o(are)g(will)e(insure)i(that)f(a)f(gi)n(v)o(en)h(LUN)e(is)
h(mounted)i(in)e(only)i(one)f(location)h(at)f(a)f(time.)141
4044 y(Each)34 b(block)h(de)n(vice)g(should)h(be)e(formatted)i(with)d
(a)h(local)h(\002le)e(system.)61 b(This)34 b(document)h(assumes)h(the)e
(use)g(of)0 4157 y(e)o(xt3.)40 b(Unique)28 b(labels)h(should)f(be)g
(set)f(on)g(each)h(\002le)f(system)h(\(for)f(e)o(xample,)i(using)f(the)
g Fd(-L)d Fh(ar)n(gument)k(to)f Fd(mke2fs)23 b Fh(or)0
4270 y Fd(tune2fs)p Fh(\).)34 b(This)26 b(will)h(allo)n(w)f(the)h
(block)h(de)n(vices)g(to)e(be)h(mounted)h(by)f(consistent)i(labels)f
(re)o(gardless)g(of)f(ho)n(w)f(Linux)0 4383 y(assigned)g(de)n(vice)f
(\002le)d(names)i(to)g(the)g(de)n(vices.)0 4624 y Fb(2.1.3)92
b(Stonith)0 4798 y Fh(Heartbeat)28 b(needs)f(some)f(mechanism)h(to)f
(fence)h(or)f(stonith)i(a)d(f)o(ailed)j(node.)37 b(T)-7
b(w)o(o)24 b(popular)k(w)o(ays)e(to)g(do)g(this)h(are)f(either)0
4911 y(to)e(use)h(IPMI)f(or)g(a)g(netw)o(ork)i(controllable)i(po)n(wer)
d(strip.)32 b(Each)25 b(node)g(needs)h(to)e(ha)n(v)o(e)h(a)f(mechanism)
i(a)n(v)n(ailable)h(to)d(reset)0 5024 y(an)o(y)g(other)g(node)h(in)e
(the)h(cluster)-5 b(.)30 b(The)23 b(e)o(xample)i(con\002guration)h(in)e
(this)g(document)h(uses)f(IPMI.)141 5137 y(It)g(is)h(possible)h(to)f
(con\002gure)h(PVFS)21 b(and)k(Heartbeat)h(without)g(a)e(po)n(wer)g
(control)i(de)n(vice.)33 b(Ho)n(we)n(v)o(er)l(,)24 b(if)g(you)h(deplo)o
(y)0 5250 y(this)f(con\002guration)i(for)e(an)o(y)f(purpose)i(other)g
(than)f(e)n(v)n(aluation,)h(then)f(you)g(run)g(a)f(v)o(ery)g(serious)i
(risk)f(of)g(data)g(corruption.)1927 5499 y(2)p eop end
%%Page: 3 3
TeXDict begin 3 2 bop 0 91 a Fh(W)l(ithout)38 b(stonith,)k(there)37
b(is)g(no)g(w)o(ay)f(to)h(guarantee)i(that)e(a)f(f)o(ailed)i(node)g
(has)f(completely)i(shutdo)n(wn)f(and)f(stopped)0 204
y(accessing)26 b(its)e(storage)h(de)n(vice)g(before)g(f)o(ailing)g(o)o
(v)o(er)-5 b(.)0 453 y Fc(2.2)99 b(Softwar)n(e)0 627
y Fh(This)24 b(document)i(assumes)g(that)e(you)h(are)g(using)g
(Heartbeat)h(v)o(ersion)g(2.1.3,)e(and)h(PVFS)d(v)o(ersion)j(2.7.x)g
(or)f(greater)-5 b(.)32 b(Y)-10 b(ou)0 740 y(may)35 b(also)h(wish)f(to)
g(use)g(e)o(xample)h(scripts)h(included)g(in)e(the)h
Fd(examples/heart)o(be)o(at)28 b Fh(directory)37 b(of)e(the)h(PVFS)0
853 y(source)25 b(tree.)0 1102 y Fc(2.3)99 b(Netw)o(ork)0
1276 y Fh(There)23 b(are)g(tw)o(o)f(special)j(issues)f(re)o(garding)g
(the)f(netw)o(ork)h(con\002guration)i(to)d(be)f(used)i(with)f
(Heartbeat.)30 b(First)22 b(of)h(all,)g(you)0 1389 y(must)h(allocate)h
(a)e(multicast)i(address)h(to)d(use)h(for)g(communication)i(within)e
(the)g(cluster)h(nodes.)141 1502 y(Secondly)-6 b(,)23
b(you)e(need)h(to)f(allocate)i(an)e(e)o(xtra)g(IP)f(address)j(and)e
(hostname)i(for)e(each)g(PVFS)e(daemon.)28 b(In)21 b(the)g(e)o(xample)0
1615 y(that)29 b(this)h(document)g(uses,)h(we)d(must)h(allocate)i(4)d
(e)o(xtra)i(IP)e(addresses,)k(along)e(with)f(4)f(hostnames)j(in)e(DNS)e
(for)i(those)0 1728 y(IP)e(addresses.)43 b(In)28 b(this)g(document,)j
(we)26 b(will)i(refer)g(to)g(these)h(as)e(\223virtual)j(addresses\224)g
(or)e(\223virtual)i(hostnames\224.)43 b(Each)0 1841 y(acti)n(v)o(e)31
b(PVFS)d(serv)o(er)k(will)e(be)h(con\002gured)h(to)f(automatically)j
(bring)d(up)g(one)g(of)g(these)g(virtual)h(addresses)h(to)e(use)g(for)0
1954 y(communication.)g(If)22 b(the)h(node)h(f)o(ails,)f(then)g(that)g
(IP)f(address)i(is)e(migrated)i(to)e(another)j(node)e(so)g(that)g
(clients)h(will)e(appear)0 2067 y(to)h(communicate)h(with)f(the)g(same)
f(serv)o(er)i(re)o(gardless)h(of)d(where)h(it)g(f)o(ails)g(o)o(v)o(er)g
(to.)28 b(It)23 b(is)f(important)j(that)e(you)g Fa(not)i
Fh(use)e(the)0 2180 y(primary)i(IP)d(address)j(of)f(each)g(node)h(for)e
(this)h(purpose.)141 2292 y(In)30 b(the)g(e)o(xample)g(in)g(this)g
(document,)j(we)c(use)h(225.0.0.1)h(as)e(the)h(multicast)h(address,)i
(node)p Fg(f)p Fh(1-5)p Fg(g)g Fh(as)c(the)h(normal)0
2405 y(node)24 b(hostnames,)i(virtual)p Fg(f)p Fh(1-4)p
Fg(g)h Fh(as)c(the)h(virtual)h(hostnames,)h(and)e(192.168.0.)p
Fg(f)p Fh(1-4)p Fg(g)j Fh(as)c(the)h(virtual)h(addresses.)141
2518 y(Note)f(that)g(the)f(virtual)j(addresses)g(must)d(be)h(on)f(the)h
(same)g(subnet)h(as)e(the)h(true)g(IP)f(addresses)j(for)e(the)f(nodes.)
0 2810 y Fk(3)119 b(Con\002guring)32 b(PVFS)0 3017 y
Fh(Do)n(wnload,)22 b(b)n(uild,)i(and)e(install)h(PVFS)c(on)j(all)g
(serv)o(er)h(nodes.)29 b(Con\002gure)23 b(PVFS)c(for)j(use)g(on)g(each)
g(of)g(the)g(acti)n(v)o(e)g(nodes.)141 3130 y(There)i(are)g(a)f(fe)n(w)
f(points)j(to)f(consider)i(when)d(con\002guring)j(PVFS:)136
3316 y Fg(\017)46 b Fh(Use)23 b(the)h(virtual)h(hostnames)h(when)d
(specifying)k(meta)c(serv)o(ers)i(and)f(I/O)f(serv)o(ers)136
3503 y Fg(\017)46 b Fh(Synchronize)26 b(\002le)d(data)i(on)e(e)n(v)o
(ery)h(operation)i(\(necessary)h(for)c(consistenc)o(y)k(on)d(f)o(ailo)o
(v)o(er\))136 3690 y Fg(\017)46 b Fh(Synchronize)39 b(meta)e(data)g(on)
f(e)n(v)o(ery)h(operation)i(\(necessary)g(for)d(consistenc)o(y)k(on)c
(f)o(ailo)o(v)o(er\).)69 b(Coalescing)38 b(is)227 3803
y(allo)n(wed.)136 3990 y Fg(\017)46 b Fh(Use)29 b(the)g
Fd(TCPBindSpecifi)o(c)22 b Fh(option)30 b(\(this)g(allo)n(ws)f
(multiple)h(daemons)g(to)f(run)g(on)g(the)g(same)g(node)h(using)227
4103 y(dif)n(ferent)c(virtual)f(addresses\))136 4289
y Fg(\017)46 b Fh(T)l(une)27 b(retry)g(and)g(timeout)h(v)n(alues)f
(appropriately)k(for)26 b(your)i(system.)38 b(This)26
b(may)h(depend)h(on)f(ho)n(w)f(long)h(it)f(tak)o(es)227
4402 y(for)e(your)g(po)n(wer)g(control)h(de)n(vice)g(to)e(safely)i
(shutdo)n(wn)g(a)e(node.)141 4588 y(An)g(e)o(xample)h(PVFS)d
(con\002guration)27 b(is)c(sho)n(wn)h(belo)n(w)g(including)i(the)e
(sections)h(rele)n(v)n(ant)g(to)f(Heartbeat:)0 4798 y
Fd(<Defaults>)436 4911 y(...)436 5024 y(ServerJobBMITime)o(ou)o(tS)o
(ec)o(s)48 b(30)436 5137 y(ServerJobFlowTim)o(eo)o(ut)o(Se)o(cs)g(30)
436 5250 y(ClientJobBMITime)o(ou)o(tS)o(ec)o(s)g(30)1927
5499 y Fh(3)p eop end
%%Page: 4 4
TeXDict begin 4 3 bop 436 91 a Fd(ClientJobFlowTim)o(eo)o(ut)o(Se)o(cs)
48 b(30)436 204 y(ClientRetryLimit)g(5)436 317 y(ClientRetryDelay)o(Mi)
o(ll)o(iS)o(ec)o(s)h(33000)436 430 y(TCPBindSpecific)f(yes)436
543 y(...)0 656 y(</Defaults>)0 882 y(<Aliases>)436 995
y(Alias)53 b(virtual1_tcp33)o(34)48 b(tcp://virtual1:)o(33)o(34)436
1108 y(Alias)53 b(virtual2_tcp33)o(34)48 b(tcp://virtual2:)o(33)o(34)
436 1220 y(Alias)53 b(virtual3_tcp33)o(34)48 b(tcp://virtual3:)o(33)o
(34)436 1333 y(Alias)53 b(virtual4_tcp33)o(34)48 b(tcp://virtual4:)o
(33)o(34)0 1446 y(</Aliases>)0 1672 y(<Filesystem>)436
1785 y(...)436 1898 y(<MetaHandleRange)o(s>)873 2011
y(Range)k(virtual1_tcp333)o(4)c(4-536870914)873 2124
y(Range)k(virtual2_tcp333)o(4)c(536870915-10737)o(418)o(25)873
2237 y(Range)k(virtual3_tcp333)o(4)c(1073741826-1610)o(612)o(73)o(6)873
2350 y(Range)k(virtual4_tcp333)o(4)c(1610612737-2147)o(483)o(64)o(7)436
2462 y(</MetaHandleRang)o(es)o(>)436 2575 y(<DataHandleRange)o(s>)873
2688 y(Range)k(virtual1_tcp333)o(4)c(2147483648-2684)o(354)o(55)o(8)873
2801 y(Range)k(virtual2_tcp333)o(4)c(2684354559-3221)o(225)o(46)o(9)873
2914 y(Range)k(virtual3_tcp333)o(4)c(3221225470-3758)o(096)o(38)o(0)873
3027 y(Range)k(virtual4_tcp333)o(4)c(3758096381-4294)o(967)o(29)o(1)436
3140 y(</DataHandleRang)o(es)o(>)436 3253 y(<StorageHints>)873
3366 y(TroveSyncMeta)g(yes)873 3479 y(TroveSyncData)g(yes)436
3592 y(</StorageHints>)141 3804 y Fh(Do)n(wnload,)25
b(b)n(uild,)h(and)f(install)h(Heartbeat)g(follo)n(wing)g(the)e
(instructions)k(on)d(their)g(web)f(site.)32 b(No)24 b(special)i
(parame-)0 3917 y(ters)e(or)f(options)j(are)e(required.)30
b(Do)23 b(not)h(start)g(the)g(Heartbeat)h(service.)0
4210 y Fk(4)119 b(Con\002guring)32 b(storage)0 4417 y
Fh(Mak)o(e)c(sure)g(that)g(there)g(is)f(a)g(block)i(de)n(vice)g
(allocated)g(for)f(each)g(acti)n(v)o(e)g(serv)o(er)h(in)e(the)h(\002le)
f(system.)41 b(F)o(ormat)27 b(each)h(one)0 4530 y(with)22
b(e)o(xt3.)28 b(Do)22 b(not)g(create)h(a)f(PVFS)d(storage)24
b(space)f(yet,)g(b)n(ut)f(you)h(can)f(create)h(subdirectories)k(within)
22 b(each)h(\002le)e(system)0 4642 y(if)i(you)h(wish.)141
4755 y(Con\002rm)d(that)i(each)f(block)h(de)n(vice)g(can)f(be)g
(mounted)h(from)f(e)n(v)o(ery)g(node)h(using)g(the)f(\002le)f(system)h
(label.)29 b(Do)21 b(this)i(one)0 4868 y(node)h(at)g(a)f(time.)28
b(Ne)n(v)o(er)c(mount)g(the)g(same)f(block)i(de)n(vice)g(concurrently)i
(on)c(tw)o(o)h(nodes.)1927 5499 y(4)p eop end
%%Page: 5 5
TeXDict begin 5 4 bop 0 91 a Fk(5)119 b(Con\002guring)32
b(stonith)0 298 y Fh(Mak)o(e)23 b(sure)h(that)f(your)h(stonith)g(de)n
(vice)g(is)f(accessible)j(and)d(responding)j(from)d(each)g(node)h(in)f
(the)g(cluster)-5 b(.)30 b(F)o(or)22 b(the)h(IPMI)0 411
y(stonith)34 b(e)o(xample)f(used)g(in)f(this)h(document,)j(this)d
(means)g(con\002rming)g(that)g Fd(ipmitool)28 b Fh(is)k(capable)i(of)e
(monitoring)0 524 y(each)24 b(node.)30 b(Each)23 b(node)i(will)e(ha)n
(v)o(e)h(its)g(o)n(wn)f(IPMI)f(IP)h(address,)i(username,)g(and)f(passw)
o(ord.)0 737 y Fd($)54 b(ipmitool)d(-I)j(lan)f(-U)g(Administrator)c(-P)
54 b(password)d(-H)i(192.168.0.10)c(power)k(status)0
850 y(Chassis)e(Power)i(is)g(on)0 1142 y Fk(6)119 b(Distrib)n(uting)31
b(Heartbeat)f(scripts)0 1349 y Fh(The)23 b(PVFS2)f(resource)j(script)g
(must)e(be)h(installed)i(and)e(set)g(as)f(runnable)j(on)d(e)n(v)o(ery)h
(cluster)i(node)e(as)f(follo)n(ws:)0 1562 y Fd($)54 b(mkdir)e(-p)i
(/usr/lib/ocf/re)o(so)o(ur)o(ce)o(.d)0 1675 y($)g(cp)g(examples/heart)o
(be)o(at/)o(PV)o(FS)o(2)48 b(/usr/lib/ocf/res)o(ou)o(rc)o(e.)o(d/)o
(ext)o(er)o(na)o(l/)0 1788 y($)54 b(chmod)e(a+x)i(/usr/lib/ocf/r)o(es)o
(ou)o(rc)o(e.d)o(/e)o(xt)o(er)o(na)o(l/P)o(VF)o(S2)0
2080 y Fk(7)119 b(Base)29 b(Heartbeat)h(con\002guration)0
2287 y Fh(This)23 b(section)i(describes)h(ho)n(w)d(to)g(con\002gure)i
(the)e(basic)i(Heartbeat)f(daemon)h(parameters,)g(which)e(include)j(an)
d(authenti-)0 2400 y(cation)i(k)o(e)o(y)f(and)g(a)f(list)h(of)f(nodes)i
(that)f(will)f(participate)k(in)c(the)h(cluster)-5 b(.)141
2513 y(Be)o(gin)32 b(by)f(generating)k(a)c(random)i(sha1)f(k)o(e)o(y)-6
b(,)34 b(which)d(is)h(used)g(to)g(secure)h(communication)h(between)f
(the)f(cluster)0 2626 y(nodes.)j(Then)25 b(run)h(the)f
(pvfs2-ha-heartbeat)q(-co)q(n\002gu)q(re.sh)31 b(script)c(on)e(e)n(v)o
(ery)h(node)g(\(both)g(acti)n(v)o(e)g(and)f(spare\))i(as)e(sho)n(wn)0
2739 y(belo)n(w)-6 b(.)29 b(Mak)o(e)23 b(sure)g(to)g(use)g(the)g
(multicast)i(address,)f(sha1)g(k)o(e)o(y)-6 b(,)23 b(and)g(list)g(of)g
(nodes)h(\(including)i(spares\))e(appropriate)i(for)0
2852 y(your)e(en)l(vironment.)0 3064 y Fd($)54 b(dd)g(if=/dev/urando)o
(m)48 b(count=4)k(2>/dev/null)d(|)54 b(openssl)e(dgst)h(-sha1)0
3177 y(dcdebc13c41977e)o(ac)o(8c)o(ca)o(002)o(32)o(66)o(a8)o(b1)o(6d2)o
(34)o(26)o(2)0 3403 y($)h(examples/heartb)o(ea)o(t/)o(pvf)o(s2)o(-h)o
(a-)o(he)o(art)o(be)o(at)o(-c)o(on)o(fig)o(ur)o(e.)o(sh)48
b(/etc/ha.d)i(225.0.0.1)h(\\)109 3516 y(dcdebc13c41977e)o(ac)o(8c)o
(ca0)o(02)o(32)o(66)o(a8)o(b16)o(d2)o(34)o(26)o(2)d(\\)109
3629 y(node1)k(node2)h(node3)f(node4)g(node5)141 3841
y Fh(Y)-10 b(ou)31 b(can)g(vie)n(w)g(the)h(con\002guration)i(\002le)c
(that)i(this)g(generates)h(in)e(/etc/ha.d/ha.cf.)55 b(An)30
b(e)o(xample)i(ha.cf)g(\002le)e(\(with)0 3954 y(comments\))k(is)f(pro)o
(vided)i(with)e(the)g(Heartbeat)i(package)g(if)e(you)g(wish)g(to)g(in)l
(v)o(estigate)j(ho)n(w)c(to)h(add)h(or)e(change)j(an)o(y)0
4067 y(settings.)0 4360 y Fk(8)119 b(CIB)30 b(con\002guration)0
4567 y Fd(Cluster)51 b(Information)f(Base)19 b Fh(\(CIB\))h(is)h(the)h
(the)f(mechanism)i(that)f(Heartbeat)g(2.x)f(uses)h(to)g(store)g
(information)0 4680 y(about)27 b(the)f(resources)i(that)e(are)g
(con\002gured)i(for)e(high)g(a)n(v)n(ailability)-6 b(.)39
b(The)25 b(con\002guration)k(is)c(stored)i(in)f(an)g(XML)e(format)0
4793 y(and)g(automatically)j(synchronized)g(across)e(all)f(of)f(the)h
(cluster)h(nodes.)141 4906 y(It)f(is)h(possible)h(to)e(start)i(the)e
(Heartbeat)i(services)h(and)e(then)g(con\002gure)h(the)e(CIB,)f(b)n(ut)
i(it)f(is)h(simpler)g(to)f(be)o(gin)h(with)g(a)0 5018
y(populated)h(XML)c(\002le)h(on)h(all)f(nodes.)141 5131
y Fd(cib.xml.example)e Fh(pro)o(vides)31 b(an)d(e)o(xample)h(of)g(a)f
(fully)h(populated)j(Heartbeat)e(con\002guration)h(with)e(5)f(nodes)0
5244 y(and)c(4)f(acti)n(v)o(e)h(PVFS)d(serv)o(ers.)30
b(Rele)n(v)n(ant)25 b(portions)g(of)f(the)g(XML)d(\002le)i(are)h
(outlined)i(belo)n(w)-6 b(.)1927 5499 y(5)p eop end
%%Page: 6 6
TeXDict begin 6 5 bop 141 91 a Fh(This)23 b(\002le)g(should)i(be)e
(modi\002ed)h(to)f(re\003ect)h(your)g(con\002guration.)32
b(Y)-10 b(ou)23 b(can)g(test)h(the)g(v)n(alidity)h(of)e(the)g(XML)f
(with)h(the)0 204 y(follo)n(wing)i(commands)f(before)g(installing)i
(it.)i(The)23 b(former)g(checks)i(generic)g(XML)c(syntax,)j(while)f
(the)h(latter)g(performs)0 317 y(Heartbeat)h(speci\002c)g(checking:)0
530 y Fd($)54 b(xmllint)d(--noout)h(cib.xml)0 643 y($)i(crm_verify)c
(-x)k(cib.xml)141 855 y Fh(Once)21 b(your)g(XML)e(is)h(\002lled)h(in)f
(correctly)-6 b(,)23 b(it)e(must)f(be)h(copied)h(into)f(the)g(correct)h
(location)h(\(with)d(correct)i(o)n(wnership\))0 968 y(on)i(each)g(node)
g(in)g(the)g(cluster:)0 1181 y Fd($)54 b(mkdir)e(-p)i(/var/lib/heartb)o
(ea)o(t/)o(cr)o(m)0 1293 y($)g(cp)g(cib.xml)d(/var/lib/heartb)o(ea)o
(t/)o(crm)0 1406 y($)j(chown)e(-R)i(hacluster:hacli)o(en)o(t)48
b(/var/lib/heartbe)o(at)o(/c)o(rm)141 1619 y Fh(Please)29
b(note)g(that)g(once)h(Heartbeat)g(has)f(been)g(started,)i(it)d(is)g
(no)h(longer)h(le)o(gal)f(to)f(modify)h(cib)l(.xml)h(by)e(hand.)45
b(See)0 1732 y(the)21 b Fd(cibadmin)c Fh(command)22 b(line)f(tool)h
(and)g(Heartbeat)g(information)i(on)d(making)h(modi\002cations)h(to)e
(e)o(xisting)i(or)e(online)0 1845 y(CIB)h(con\002gurations.)0
2094 y Fc(8.1)99 b(crm)p 401 2094 30 4 v 36 w(con\002g)0
2268 y Fh(The)26 b Fd(crm)p 337 2268 28 4 v 31 w(config)d
Fh(portion)28 b(of)e(the)g(CIB)f(is)h(used)h(to)f(set)h(global)g
(parameters)i(for)d(Heartbeat.)38 b(This)26 b(includes)i(beha)n(v-)0
2381 y(ioral)34 b(settings)h(\(such)g(as)e(ho)n(w)g(to)g(respond)i(if)e
(quorum)i(is)e(lost\))h(as)f(well)g(as)g(tunable)i(parameters)h(\(such)
e(as)f(timeout)0 2494 y(v)n(alues\).)141 2607 y(The)k(options)h
(selected)h(in)e(this)h(section)g(should)h(w)o(ork)e(well)g(as)f(a)h
(starting)i(point,)i(b)n(ut)c(you)h(may)e(refer)i(to)f(the)0
2720 y(Heartbeat)25 b(documentation)i(for)d(more)f(details.)0
2969 y Fc(8.2)99 b(nodes)0 3143 y Fh(The)23 b Fd(nodes)e
Fh(section)k(is)e(empty)h(on)g(purpose.)31 b(This)23
b(will)g(be)h(\002lled)f(in)h(dynamically)i(by)e(the)f(Heartbeat)i
(daemons.)0 3392 y Fc(8.3)99 b(r)n(esour)n(ces)26 b(and)g(gr)n(oups)0
3567 y Fh(The)h Fd(resources)c Fh(section)30 b(describes)g(all)e
(resources)j(that)d(the)g(Heartbeat)i(softw)o(are)f(needs)g(to)f
(manage)h(for)f(f)o(ailo)o(v)o(er)0 3680 y(purposes.)41
b(This)26 b(includes)j(IP)d(addresses,)k(SAN)25 b(mount)i(points,)i
(and)e Fd(pvfs2-server)20 b Fh(processes.)41 b(The)27
b(resources)0 3793 y(are)e(or)n(ganized)j(into)e(groups,)h(such)f(as)f
Fd(server0)p Fh(,)c(to)k(indicate)i(that)f(certain)g(groups)h(of)e
(resources)j(should)f(be)e(treated)0 3905 y(as)h(a)f(single)i(unit.)37
b(F)o(or)25 b(e)o(xample,)i(if)e(a)g(node)i(were)f(to)g(f)o(ail,)g(you)
h(cannot)g(just)f(migrate)h(its)f Fd(pvfs2-server)20
b Fh(process.)0 4018 y(Y)-10 b(ou)24 b(must)g(also)g(migrate)h(the)g
(associated)h(IP)d(address)j(and)f(SAN)d(mount)i(point)h(at)f(the)h
(same)f(time.)30 b(Groups)24 b(also)h(mak)o(e)0 4131
y(it)e(easier)i(to)e(start)i(or)e(stop)h(all)g(associated)i(resources)g
(for)e(a)f(node)i(with)e(one)h(uni\002ed)g(command.)141
4244 y(In)30 b(the)g(e)o(xample)h Fd(cib.xml)p Fh(,)c(there)k(are)f(4)g
(groups)h(\(serv)o(er0)h(through)g(serv)o(er3\).)49 b(These)30
b(represent)j(the)d(4)g(acti)n(v)o(e)0 4357 y(PVFS)21
b(serv)o(ers)k(that)f(will)f(run)h(on)g(the)f(cluster)-5
b(.)0 4606 y Fc(8.4)99 b(IP)o(addr)0 4781 y Fh(The)26
b Fd(IPaddr)d Fh(resources,)29 b(such)e(as)f Fd(server0)p
1595 4781 V 30 w(address)p Fh(,)c(are)27 b(used)g(to)f(indicate)i(what)
e(virtual)i(IP)d(address)k(should)0 4894 y(be)19 b(used)h(with)f(each)g
(group.)29 b(In)19 b(this)g(e)o(xample,)i(all)e(IP)f(addresses)j(are)e
(allocated)j(from)d(a)f(pri)n(v)n(ate)i(range,)h(b)n(ut)f(these)g
(should)0 5006 y(be)27 b(replaced)j(with)d(IP)f(addresses)k(that)d(are)
h(appropriate)i(for)e(use)f(on)h(your)g(netw)o(ork.)41
b(See)26 b(the)i(netw)o(ork)g(requirements)0 5119 y(section)d(for)f
(more)g(details.)1927 5499 y(6)p eop end
%%Page: 7 7
TeXDict begin 7 6 bop 0 91 a Fc(8.5)99 b(Filesystem)0
266 y Fh(The)23 b Fd(Filesystem)c Fh(resources,)26 b(such)f(as)f
Fd(server0)p 1801 266 28 4 v 29 w(fs)p Fh(,)e(are)j(used)f(to)g
(describe)i(the)e(shared)i(storage)g(block)f(de)n(vices)0
379 y(that)34 b(serv)o(e)h(as)f(back)g(end)h(storage)g(for)f(PVFS.)e
(This)h(is)h(where)g(the)g(PVFS)e(storage)j(space)g(for)f(each)h(serv)o
(er)g(will)e(be)0 491 y(created.)c(In)19 b(this)g(e)o(xample,)i(the)e
(de)n(vice)h(names)g(are)f(labeled)i(as)e Fd(label0)c
Fh(through)21 b Fd(label3)p Fh(.)j(The)o(y)19 b(are)g(each)h(mounted)0
604 y(on)35 b(directories)i(such)e(as)g Fd(/san)p 1077
604 V 31 w(mount0)c Fh(through)36 b Fd(/san)p 2005 604
V 31 w(mount3)p Fh(.)59 b(Please)35 b(note)g(that)g(each)g(de)n(vice)h
(should)g(be)0 717 y(mounted)30 b(on)f(a)f(dif)n(ferent)i(mount)g
(point)f(to)g(allo)n(w)f(multiple)i Fd(pvfs2-server)23
b Fh(processes)31 b(to)d(operate)j(on)d(the)h(same)0
830 y(node)e(without)f(collision.)38 b(The)25 b(\002le)g(system)h(type)
h(can)f(be)f(changed)j(to)e(re\003ect)g(the)g(use)g(of)f(alternati)n(v)
o(e)j(underlying)h(\002le)0 943 y(systems.)0 1192 y Fc(8.6)99
b(PVFS)0 1367 y Fh(The)29 b Fd(PVFS2)d Fh(resources,)33
b(such)d(as)g Fd(server0)p 1557 1367 V 29 w(daemon)p
Fh(,)d(are)j(used)g(to)f(describe)i(each)g Fd(pvfs2-server)23
b Fh(process.)0 1479 y(This)29 b(resource)h(is)f(pro)o(vided)i(by)d
(the)h(PVFS2)e(script)j(in)f(the)g(e)o(xamples)g(directory)-6
b(.)47 b(The)28 b(parameters)j(to)e(this)g(resource)0
1592 y(are)24 b(listed)g(belo)n(w:)136 1780 y Fg(\017)46
b Fd(fsconfig)p Fh(:)25 b(location)h(of)d(PVFS)e(fs)j(con\002guration)i
(\002le)136 1968 y Fg(\017)46 b Fd(port)p Fh(:)27 b(TCP/IP)21
b(port)k(that)f(the)g(serv)o(er)g(will)f(listen)i(on)f(\(must)f(match)h
(serv)o(er)h(con\002guration)h(\002le\))136 2155 y Fg(\017)46
b Fd(ip)p Fh(:)38 b(IP)28 b(address)i(that)g(the)e(serv)o(er)i(will)e
(listen)i(on)f(\(must)g(match)g(both)h(the)f(\002le)f(system)h
(con\002guration)j(\002le)c(and)227 2268 y(the)c(IP)-8
b(Addr)23 b(resource\))136 2456 y Fg(\017)46 b Fd(pidfile)p
Fh(:)26 b(Location)e(where)g(a)f(pid)h(\002le)f(can)h(be)g(written)136
2643 y Fg(\017)46 b Fd(alias)p Fh(:)26 b(alias)f(to)e(identify)j(this)e
(PVFS)d(daemon)j(instance)141 2831 y(Also)31 b(notice)i(that)e(there)h
(is)f(a)g(monitor)h(operation)h(associated)h(with)d(the)g(PVFS)e
(resource.)53 b(This)31 b(will)g(cause)h(the)0 2944 y
Fd(pvfs2-check-ser)o(ve)o(r)20 b Fh(utility)28 b(to)e(be)h(triggered)i
(periodically)h(to)d(mak)o(e)g(sure)g(that)g(the)g Fd(pvfs2-server)21
b Fh(pro-)0 3057 y(cess)k(is)g(not)g(only)g(running,)i(b)n(ut)e(is)f
(correctly)j(responding)h(to)d(PVFS)d(protocol)27 b(requests.)34
b(This)24 b(allo)n(ws)h(problems)h(such)0 3170 y(as)d(hung)i
Fd(pvfs2-server)17 b Fh(processes)26 b(to)e(be)f(treated)i(as)f(f)o
(ailure)h(conditions.)141 3283 y(Please)32 b(note)f(that)h(the)f(PVFS2)
e(script)k(pro)o(vided)g(in)e(the)g(e)o(xamples)h(will)f(attempt)h(to)f
(create)h(a)f(storage)i(space)f(on)0 3396 y(startup)25
b(for)f(each)g(serv)o(er)h(if)e(it)g(is)h(not)f(already)j(present.)0
3645 y Fc(8.7)99 b(rsc)p 357 3645 30 4 v 36 w(location)0
3819 y Fh(The)24 b Fd(rsc)p 335 3819 28 4 v 31 w(location)c
Fh(constraints,)27 b(such)e(as)f Fd(run)p 1720 3819 V
32 w(server0)p Fh(,)c(are)k(used)h(to)f(e)o(xpress)i(a)e(preference)j
(for)d(where)g(each)0 3932 y(resource)i(group)f(should)h(run)f(\(if)f
(possible\).)32 b(It)24 b(may)g(be)g(useful)h(for)f(administrati)n(v)o
(e)j(purposes)g(to)d(ha)n(v)o(e)g(the)h(\002rst)e(serv)o(er)0
4045 y(group)k(def)o(ault)h(to)e(run)g(on)g(the)g(\002rst)g(node)g(of)g
(your)h(cluster)l(,)h(for)e(e)o(xample.)37 b(Otherwise)26
b(the)h(placement)g(will)f(be)g(left)g(up)0 4158 y(to)d(Heartbeat.)0
4407 y Fc(8.8)99 b(rsc)p 357 4407 30 4 v 36 w(order)0
4581 y Fh(The)33 b Fd(rsc)p 344 4581 28 4 v 32 w(order)d
Fh(constraints,)39 b(such)c(as)f Fd(server0)p 1827 4581
V 29 w(order)p 2131 4581 V 31 w(start)p 2437 4581 V 30
w(fs)e Fh(can)i(be)g(used)h(to)e(dictate)j(the)e(order)g(in)0
4694 y(which)28 b(resources)j(must)d(be)g(started)i(or)e(stopped.)44
b(The)28 b(resources)i(are)f(already)h(or)n(ganized)g(into)f(groups,)i
(b)n(ut)d(without)0 4807 y(ordering)g(constraints,)h(the)d(resources)i
(within)e(a)f(group)i(may)e(be)h(started)h(in)e(an)o(y)h(order)g
(relati)n(v)o(e)h(to)f(each)g(other)-5 b(.)36 b(These)0
4920 y(constraints)26 b(are)c(necessary)k(because)e(a)e
Fd(pvfs2-server)17 b Fh(process)24 b(will)e(not)h(start)h(properly)g
(until)g(its)f(IP)e(address)k(and)0 5033 y(storage)g(are)f(a)n(v)n
(ailable.)1927 5499 y(7)p eop end
%%Page: 8 8
TeXDict begin 8 7 bop 0 91 a Fc(8.9)99 b(stonith)0 266
y Fh(The)25 b Fd(external/ipmi)18 b Fh(stonith)27 b(de)n(vice)f(is)f
(used)h(in)f(this)h(e)o(xample.)34 b(Please)26 b(see)f(the)h(Heartbeat)
g(documentation)j(for)0 379 y(instructions)e(on)d(con\002guring)i
(other)e(types)h(of)e(de)n(vices.)141 491 y(There)i(is)g(one)h(IPMI)e
(stonith)j(de)n(vice)g(for)e(each)h(node.)34 b(The)25
b(attrib)n(utes)j(for)d(that)h(resources)i(specify)f(which)e(node)h(is)
0 604 y(being)f(controlled,)h(and)e(the)g(username,)g(passw)o(ord,)h
(and)f(IP)f(address)i(of)f(corresponding)k(IPMI)22 b(de)n(vice.)0
897 y Fk(9)119 b(Starting)31 b(Heartbeat)0 1104 y Fh(Once)19
b(the)h(CIB)e(\002le)g(is)h(completed)j(and)d(installed)j(in)d(the)h
(correct)g(location,)i(then)e(the)g(Heartbeat)h(services)g(can)e(be)h
(started)0 1217 y(on)27 b(e)n(v)o(ery)h(node.)41 b(The)26
b Fd(crm)p 918 1217 28 4 v 32 w(mon)f Fh(command,)j(when)g(run)f(with)g
(the)h(ar)n(guments)h(sho)n(wn,)f(will)f(pro)o(vide)i(a)e(periodically)
0 1330 y(updated)g(vie)n(w)e(of)f(the)i(state)f(of)g(each)h(resource)h
(con\002gured)g(within)e(Heartbeat.)35 b(Check)25 b Fd(/var/log/messag)
o(es)17 b Fh(if)0 1443 y(an)o(y)24 b(of)f(the)h(groups)h(f)o(ail)f(to)g
(start.)0 1655 y Fd($)54 b(/etc/init.d/hea)o(rt)o(be)o(at)48
b(start)0 1768 y($)54 b(#)g(wait)f(a)h(few)f(minutes)f(for)h(heartbeat)
d(services)h(to)j(start)0 1881 y($)g(crm_mon)d(-r)0 2174
y Fk(10)119 b(Mounting)31 b(the)f(\002le)h(system)0 2381
y Fh(Mounting)24 b(PVFS)d(with)h(high)i(a)n(v)n(ailability)h(is)e(no)g
(dif)n(ferent)h(than)g(mounting)g(a)e(normal)h(PVFS)e(\002le)h(system,)
h(e)o(xcept)h(that)0 2494 y(you)g(must)g(use)g(the)f(virtual)i
(hostname)h(for)d(the)h(PVFS)d(serv)o(er)k(rather)f(than)h(the)e
(primary)i(hostname)g(of)f(the)f(node:)0 2706 y Fd($)54
b(mount)e(-t)i(pvfs2)e(tcp://virtual1:)o(333)o(4/)o(pv)o(fs)o(2-)o(fs)c
(/mnt/pvfs2)0 2999 y Fk(11)119 b(What)30 b(happens)h(during)g(failo)o
(v)o(er)0 3206 y Fh(The)23 b(follo)n(wing)i(e)o(xample)f(illustrates)j
(the)d(steps)g(that)g(occur)h(when)e(a)h(node)g(f)o(ails:)114
3418 y(1.)45 b(Node2)24 b(\(which)h(is)e(running)i(a)f
Fd(pvfs2-server)17 b Fh(on)23 b(the)h(virtual2)i(IP)c(address\))k(suf)n
(fers)f(a)e(f)o(ailure)114 3606 y(2.)45 b(Client)24 b(node)h(be)o(gins)
f(timeout/retry)j(c)o(ycle)114 3794 y(3.)45 b(Heartbeat)25
b(services)h(running)f(on)f(remaining)h(nodes)g(notice)g(that)f(node2)h
(is)f(not)f(responding)114 3981 y(4.)45 b(After)24 b(a)f(timeout)h(has)
g(elapsed,)h(remaining)g(nodes)f(reach)h(a)e(quorum)h(and)g(v)n(ote)g
(to)g(treat)g(node2)g(as)g(a)f(f)o(ailed)h(node)114 4169
y(5.)45 b(Node1)24 b(sends)h(a)e(stonith)i(command)g(to)e(reset)i
(node2)114 4356 y(6.)45 b(Node2)24 b(either)h(reboots)g(or)f(remains)g
(po)n(wered)h(of)n(f)e(\(depending)k(on)d(nature)h(of)e(f)o(ailure\))
114 4544 y(7.)45 b(Once)24 b(stonith)h(command)f(succeeds,)i(node5)f
(is)e(selected)j(to)d(replace)i(it)114 4732 y(8.)45 b(The)23
b(virtual2)j(IP)c(address,)k(mount)e(point,)g(and)g Fd(pvfs2-server)17
b Fh(service)25 b(are)f(started)h(on)f(node5)114 4919
y(9.)45 b(Client)24 b(node)h(retry)f(e)n(v)o(entually)i(succeeds,)f(b)n
(ut)g(no)n(w)e(the)g(netw)o(ork)i(traf)n(\002c)f(is)f(routed)i(to)e
(node5)1927 5499 y(8)p eop end
%%Page: 9 9
TeXDict begin 9 8 bop 0 91 a Fk(12)119 b(Contr)n(olling)31
b(Heartbeat)0 298 y Fh(The)22 b(Heartbeat)i(softw)o(are)f(comes)g(with)
f(a)g(wide)g(v)n(ariety)i(of)e(tools)h(for)f(managing)i(resources.)31
b(The)22 b(follo)n(wing)i(are)e(a)g(fe)n(w)0 411 y(useful)j(e)o
(xamples:)136 599 y Fg(\017)46 b Fd(cibadmin)51 b(-Q)p
Fh(:)22 b(Display)j(the)f(current)h(CIB)d(information)136
786 y Fg(\017)46 b Fd(crm)p 397 786 28 4 v 32 w(mon)53
b(-r)g(-1)p Fh(:)28 b(Display)d(the)e(current)j(resource)f(status)136
974 y Fg(\017)46 b Fd(crm)p 397 974 V 32 w(standby)p
Fh(:)25 b(Used)f(to)g(manually)h(tak)o(e)g(a)e(node)i(in)e(an)h(out)g
(of)g(standby)i(mode.)j(This)24 b(can)g(be)g(used)g(to)g(tak)o(e)h(a)
227 1087 y(node)g(of)n(\003ine)f(for)f(maintenance)j(without)f(a)e
(true)h(f)o(ailure)h(e)n(v)o(ent.)136 1275 y Fg(\017)46
b Fd(crm)p 397 1275 V 32 w(resource)p Fh(:)23 b(Modify)e(resource)h
(information.)30 b(F)o(or)19 b(e)o(xample,)j Fd(crm)p
2674 1275 V 31 w(resource)51 b(-r)j(server0)d(-p)227
1388 y(target)p 562 1388 V 30 w(role)i(-v)h(stopped)19
b Fh(will)k(stop)i(a)e(particular)j(resource)f(group.)136
1575 y Fg(\017)46 b Fd(crm)p 397 1575 V 32 w(verify)p
Fh(:)25 b(can)f(be)g(used)g(to)g(con\002rm)f(if)g(the)h(CIB)f
(information)j(is)d(v)n(alid)h(and)g(consistent)0 1868
y Fk(13)119 b(Additional)32 b(examples)0 2075 y Fh(The)18
b Fd(examples/heart)o(be)o(at)o(/ha)o(rd)o(wa)o(re)o(-s)o(pec)o(if)o
(ic)11 b Fh(directory)20 b(contains)g(additional)h(e)o(xample)e
(scripts)h(that)0 2188 y(may)j(be)h(helpful)h(in)f(some)f(scenarios:)
136 2400 y Fg(\017)46 b Fd(pvfs2-stonith-p)o(lug)o(in)o
Fh(:)22 b(An)e(e)o(xample)j(stonith)g(plugin)g(that)f(can)g(use)g(an)f
(arbitrary)j(script)e(to)g(po)n(wer)f(of)n(f)227 2513
y(nodes.)29 b(May)20 b(be)h(used)g(\(for)g(e)o(xample\))g(with)f(the)h
Fd(apc)1956 2529 y(*)2029 2513 y Fh(and)f Fd(baytech)2564
2529 y(*)2635 2513 y Fh(scripts)i(to)e(control)i(remote)f(controlled)
227 2626 y(po)n(wer)j(strips)h(if)e(the)h(scripts)h(pro)o(vided)g(by)f
(Heartbeat)h(are)f(not)g(suf)n(\002cient.)136 2814 y
Fg(\017)46 b Fd(Filesystem-qla-)o(mon)o(it)o(or)o Fh(:)33
b(A)27 b(modi\002ed)i(v)o(ersion)h(of)e(the)h(standard)i(FileSystem)e
(resource)h(that)f(uses)227 2927 y(the)f Fd(qla-monitor.pl)20
b Fh(script)28 b(to)f(pro)o(vide)i(additional)h(monitoring)f
(capability)h(for)d(QLogic)g(\002bre)g(channel)227 3040
y(cards.)136 3227 y Fg(\017)46 b Fd(PVFS2-notify)p Fh(:)g(An)34
b(e)o(xample)i(of)f(a)f(dummy)h(resource)i(that)f(could)g(be)f(added)h
(to)f(the)g(con\002guration)j(to)227 3340 y(perform)25
b(additional)h(logging)g(or)d(noti\002cation)j(steps)f(on)e(startup.)
1927 5499 y(9)p eop end
%%Trailer

userdict /end-hook known{end-hook}if
%%EOF
