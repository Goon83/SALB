%!PS-Adobe-2.0
%%Creator: dvips(k) 5.96.1 Copyright 2007 Radical Eye Software
%%Title: pvfs2-guide.dvi
%%CreationDate: Thu Feb  4 12:40:16 2010
%%Pages: 25
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Roman Times-Bold Courier CMSY10 Times-Italic
%%+ CMMI10 CMR10 Courier-Bold
%%DocumentPaperSizes: Letter
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -t letter pvfs2-guide.dvi -o pvfs2-guide.ps
%DVIPSParameters: dpi=600
%DVIPSSource:  TeX output 2010.02.04:1240
%%BeginProcSet: tex.pro 0 0
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/CharBuilder{save 3 1 roll S A/base get 2 index get S
/BitMaps get S get/Cd X pop/ctr 0 N Cdx 0 Cx Cy Ch sub Cx Cw add Cy
setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx sub Cy .1 sub]{Ci}imagemask
restore}B/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc 0 0
% File 8r.enc  TeX Base 1 Encoding  Revision 2.0  2002-10-30
%
% @@psencodingfile@{
%   author    = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry,
%                W. Schmidt, P. Lehman",
%   version   = "2.0",
%   date      = "27nov06",
%   filename  = "8r.enc",
%   email     = "tex-fonts@@tug.org",
%   docstring = "This is the encoding vector for Type1 and TrueType
%                fonts to be used with TeX.  This file is part of the
%                PSNFSS bundle, version 9"
% @}
% 
% The idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard encoding, ISO Latin 1, Windows ANSI including the euro symbol,
% MacRoman, and some extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% These are /dotlessj /ff /ffi /ffl.
% 
% (4) hyphen appears twice for compatibility with both ASCII and Windows.
%
% (5) /Euro was assigned to 128, as in Windows ANSI
%
% (6) Missing characters from MacRoman encoding incorporated as follows:
%
%     PostScript      MacRoman        TeXBase1
%     --------------  --------------  --------------
%     /notequal       173             0x16
%     /infinity       176             0x17
%     /lessequal      178             0x18
%     /greaterequal   179             0x19
%     /partialdiff    182             0x1A
%     /summation      183             0x1B
%     /product        184             0x1C
%     /pi             185             0x1D
%     /integral       186             0x81
%     /Omega          189             0x8D
%     /radical        195             0x8E
%     /approxequal    197             0x8F
%     /Delta          198             0x9D
%     /lozenge        215             0x9E
%
/TeXBase1Encoding [
% 0x00
 /.notdef /dotaccent /fi /fl
 /fraction /hungarumlaut /Lslash /lslash
 /ogonek /ring /.notdef /breve
 /minus /.notdef /Zcaron /zcaron
% 0x10
 /caron /dotlessi /dotlessj /ff
 /ffi /ffl /notequal /infinity
 /lessequal /greaterequal /partialdiff /summation
 /product /pi /grave /quotesingle
% 0x20
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus
 /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three
 /four /five /six /seven
 /eight /nine /colon /semicolon
 /less /equal /greater /question
% 0x40
 /at /A /B /C
 /D /E /F /G
 /H /I /J /K
 /L /M /N /O
% 0x50
 /P /Q /R /S
 /T /U /V /W
 /X /Y /Z /bracketleft
 /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c
 /d /e /f /g
 /h /i /j /k
 /l /m /n /o
% 0x70
 /p /q /r /s
 /t /u /v /w
 /x /y /z /braceleft
 /bar /braceright /asciitilde /.notdef
% 0x80
 /Euro /integral /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /Omega /radical /approxequal
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /Delta /lozenge /Ydieresis
% 0xA0
 /.notdef /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot /hyphen /registered /macron
% 0xB0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde
 /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def


%%EndProcSet
%%BeginProcSet: texps.pro 0 0
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]FontType 0
ne{/Metrics exch def dict begin Encoding{exch dup type/integertype ne{
pop pop 1 sub dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get
div def}ifelse}forall Metrics/Metrics currentdict end def}{{1 index type
/nametype eq{exit}if exch pop}loop}ifelse[2 index currentdict end
definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{dup
sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1 roll
mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def dup[
exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}if}
forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}def
end

%%EndProcSet
%%BeginFont: CMR10
%!PS-AdobeFont-1.1: CMR10 1.00B
%%CreationDate: 1992 Feb 19 19:54:52
% Copyright (C) 1997 American Mathematical Society. All Rights Reserved.
11 dict begin
/FontInfo 7 dict dup begin
/version (1.00B) readonly def
/Notice (Copyright (C) 1997 American Mathematical Society. All Rights Reserved) readonly def
/FullName (CMR10) readonly def
/FamilyName (Computer Modern) readonly def
/Weight (Medium) readonly def
/ItalicAngle 0 def
/isFixedPitch false def
end readonly def
/FontName /CMR10 def
/PaintType 0 def
/FontType 1 def
/FontMatrix [0.001 0 0 0.001 0 0] readonly def
/Encoding 256 array
0 1 255 {1 index exch /.notdef put} for
dup 40 /parenleft put
dup 41 /parenright put
dup 49 /one put
readonly def
/FontBBox{-251 -250 1009 969}readonly def
currentdict end
currentfile eexec
D9D66F633B846A97B686A97E45A3D0AA052A014267B7904EB3C0D3BD0B83D891
016CA6CA4B712ADEB258FAAB9A130EE605E61F77FC1B738ABC7C51CD46EF8171
9098D5FEE67660E69A7AB91B58F29A4D79E57022F783EB0FBBB6D4F4EC35014F
D2DECBA99459A4C59DF0C6EBA150284454E707DC2100C15B76B4C19B84363758
469A6C558785B226332152109871A9883487DD7710949204DDCF837E6A8708B8
2BDBF16FBC7512FAA308A093FE5CF7158F1163BC1F3352E22A1452E73FECA8A4
87100FB1FFC4C8AF409B2067537220E605DA0852CA49839E1386AF9D7A1A455F
D1F017CE45884D76EF2CB9BC5821FD25365DDEA6E45F332B5F68A44AD8A530F0
92A36FAC8D27F9087AFEEA2096F839A2BC4B937F24E080EF7C0F9374A18D565C
295A05210DB96A23175AC59A9BD0147A310EF49C551A417E0A22703F94FF7B75
409A5D417DA6730A69E310FA6A4229FC7E4F620B0FC4C63C50E99E179EB51E4C
4BC45217722F1E8E40F1E1428E792EAFE05C5A50D38C52114DFCD24D54027CBF
2512DD116F0463DE4052A7AD53B641A27E81E481947884CE35661B49153FA19E
0A2A860C7B61558671303DE6AE06A80E4E450E17067676E6BBB42A9A24ACBC3E
B0CA7B7A3BFEA84FED39CCFB6D545BB2BCC49E5E16976407AB9D94556CD4F008
24EF579B6800B6DC3AAF840B3FC6822872368E3B4274DD06CA36AF8F6346C11B
43C772CC242F3B212C4BD7018D71A1A74C9A94ED0093A5FB6557F4E0751047AF
D72098ECA301B8AE68110F983796E581F106144951DF5B750432A230FDA3B575
5A38B5E7972AABC12306A01A99FCF8189D71B8DBF49550BAEA9CF1B97CBFC7CC
96498ECC938B1A1710B670657DE923A659DB8757147B140A48067328E7E3F9C3
7D1888B284904301450CE0BC15EEEA00E48CCD6388F3FC3C8578EF9A20A0E06E
4F7ADDAF0E7D1E182D115BF1AD931977325AD391E72E2B13CC108E3726C11099
E2000623188AAAC9F3E233EB253BDD8B0A4759A66A113E066238B0086AC1B634
5ABFF90E4B5ED3FA69C22541981B2BFC9710AEF6B50A8BB53431C7B4D380D721
639E005D6B4688EE16BFF48443E7C9E5FB5BC5883E271CB03428955D5B6A6C01
F9D9F44C93F0C94D9D0728D2B98C558E20C6DF38DA980247CC7320494E0ADE56
B2F1936E624CA50F8DD14C4674BD8164D73715D01E4845C4D0F9B44DFF396A3C
73954C42DB561C79655F0ACFB39BDEF99E91B69C462AE7D188A88871FC02E84F
B64D11F20453799F19073DAFCDA6BE29A327CA3A1B7B475033E246866AD6A5C9
CE63E677E66AE9EE18E12C91BF75ED357C599C9A3444E1595FBF981120D00727
B85DCAD9DE4BA1211A167D9AD853DC4CE60691A761FEEC7306D80D36CCA55E80
26D1B1AC2FB42CFA5B30DA798C0A830C69BB2C71F7428375D75CD6C9AA1D742B
8A2BBB915E4CCDB69681C7726D78EF2C675DFCE211C6ED0F44B35EFBA9DAE2DC
765D21E1164E195825B688B71A9296EA8873B321A64BD8B7B9CF577C5A409826
D9CCB21608000E55E32E00F9F9D4A79AD8F4580DF55477E646397C6465F72382
BEC236286A4868E3B0305A73DCB8857C0C231D1E7C42613E6F78E8EC3F1A585C
8C46D29F3E83CEE1C5B50AE02019CA8B0229C4109448000AC189DC0A1CA65539
EB61BD25005EF5111DB1AAD57FA8DE27D945F157EA7FEA635E762250AC1EF905
5A2777B7CD9049372E389F68D0454B0FF807021919B461C8D0F89AD4FF52EEF5
F8E9271804084363F8ECB61042AE72ACD11A7A2E5BC06F043B34A60E602AB924
8A3CB682F7B734DB7983F75C7BCC9542A62CA5F3714E4FCB8D6E3F54D1
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
cleartomark
%%EndFont 
%%BeginFont: CMMI10
%!PS-AdobeFont-1.1: CMMI10 1.100
%%CreationDate: 1996 Jul 23 07:53:57
% Copyright (C) 1997 American Mathematical Society. All Rights Reserved.
11 dict begin
/FontInfo 7 dict dup begin
/version (1.100) readonly def
/Notice (Copyright (C) 1997 American Mathematical Society. All Rights Reserved) readonly def
/FullName (CMMI10) readonly def
/FamilyName (Computer Modern) readonly def
/Weight (Medium) readonly def
/ItalicAngle -14.04 def
/isFixedPitch false def
end readonly def
/FontName /CMMI10 def
/PaintType 0 def
/FontType 1 def
/FontMatrix [0.001 0 0 0.001 0 0] readonly def
/Encoding 256 array
0 1 255 {1 index exch /.notdef put} for
dup 79 /O put
readonly def
/FontBBox{-32 -250 1048 750}readonly def
currentdict end
currentfile eexec
D9D66F633B846A97B686A97E45A3D0AA0529731C99A784CCBE85B4993B2EEBDE
3B12D472B7CF54651EF21185116A69AB1096ED4BAD2F646635E019B6417CC77B
532F85D811C70D1429A19A5307EF63EB5C5E02C89FC6C20F6D9D89E7D91FE470
B72BEFDA23F5DF76BE05AF4CE93137A219ED8A04A9D7D6FDF37E6B7FCDE0D90B
986423E5960A5D9FBB4C956556E8DF90CBFAEC476FA36FD9A5C8175C9AF513FE
D919C2DDD26BDC0D99398B9F4D03D5993DFC0930297866E1CD0A319B6B1FD958
9E394A533A081C36D456A09920001A3D2199583EB9B84B4DEE08E3D12939E321
990CD249827D9648574955F61BAAA11263A91B6C3D47A5190165B0C25ABF6D3E
6EC187E4B05182126BB0D0323D943170B795255260F9FD25F2248D04F45DFBFB
DEF7FF8B19BFEF637B210018AE02572B389B3F76282BEB29CC301905D388C721
59616893E774413F48DE0B408BC66DCE3FE17CB9F84D205839D58014D6A88823
D9320AE93AF96D97A02C4D5A2BB2B8C7925C4578003959C46E3CE1A2F0EAC4BF
8B9B325E46435BDE60BC54D72BC8ACB5C0A34413AC87045DC7B84646A324B808
6FD8E34217213E131C3B1510415CE45420688ED9C1D27890EC68BD7C1235FAF9
1DAB3A369DD2FC3BE5CF9655C7B7EDA7361D7E05E5831B6B8E2EEC542A7B38EE
03BE4BAC6079D038ACB3C7C916279764547C2D51976BABA94BA9866D79F13909
95AA39B0F03103A07CBDF441B8C5669F729020AF284B7FF52A29C6255FCAACF1
74109050FBA2602E72593FBCBFC26E726EE4AEF97B7632BC4F5F353B5C67FED2
3EA752A4A57B8F7FEFF1D7341D895F0A3A0BE1D8E3391970457A967EFF84F6D8
47750B1145B8CC5BD96EE7AA99DDC9E06939E383BDA41175233D58AD263EBF19
AFC0E2F840512D321166547B306C592B8A01E1FA2564B9A26DAC14256414E4C8
42616728D918C74D13C349F4186EC7B9708B86467425A6FDB3A396562F7EE4D8
40B43621744CF8A23A6E532649B66C2A0002DD04F8F39618E4F572819DD34837
B5A08E643FDCA1505AF6A1FA3DDFD1FA758013CAED8ACDDBBB334D664DFF5B53
9560176676ABB71BBD0EE56B4CC492C0652750227CEC5393ED83025E6E643625
68DEE8B1DE4A8E26DAED117C699ED1E48C0D7ABE7BEAC67E886F9EA348EF24C5
E72B21D5A9243147FA3CD2B1F1E8ACC54F591EDD615A7CD20956DD05B0402B50
A7DB7182DBD1B2DDD122658600CA47BD09B350520E67CBA709B6A2DB897CB922
F32BD200C00A0AC37A0AB13E3631CF581907BCA1F011C74625A20A0FBE7C680E
1C21655E482B51619B756CCEEBF7C0598BC56666B3D4DF519642EB286EB36794
FA55F9340FCF78D41FABF86846DB7317BB69B4D5B18A35A96D462B6A36937607
419529FB6D28E7C2394BB60A92C789B340DBBEBA2DB0FB1529D30CF8EF0C393A
F06F062C545BEA0D2BC2961A273A597DACB9A9BF1D2D871A6B0B8E
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
cleartomark
%%EndFont 
%%BeginFont: CMSY10
%!PS-AdobeFont-1.1: CMSY10 1.0
%%CreationDate: 1991 Aug 15 07:20:57
% Copyright (C) 1997 American Mathematical Society. All Rights Reserved.
11 dict begin
/FontInfo 7 dict dup begin
/version (1.0) readonly def
/Notice (Copyright (C) 1997 American Mathematical Society. All Rights Reserved) readonly def
/FullName (CMSY10) readonly def
/FamilyName (Computer Modern) readonly def
/Weight (Medium) readonly def
/ItalicAngle -14.035 def
/isFixedPitch false def
end readonly def
/FontName /CMSY10 def
/PaintType 0 def
/FontType 1 def
/FontMatrix [0.001 0 0 0.001 0 0] readonly def
/Encoding 256 array
0 1 255 {1 index exch /.notdef put} for
dup 15 /bullet put
readonly def
/FontBBox{-29 -960 1116 775}readonly def
currentdict end
currentfile eexec
D9D66F633B846A97B686A97E45A3D0AA052F09F9C8ADE9D907C058B87E9B6964
7D53359E51216774A4EAA1E2B58EC3176BD1184A633B951372B4198D4E8C5EF4
A213ACB58AA0A658908035BF2ED8531779838A960DFE2B27EA49C37156989C85
E21B3ABF72E39A89232CD9F4237FC80C9E64E8425AA3BEF7DED60B122A52922A
221A37D9A807DD01161779DDE7D31FF2B87F97C73D63EECDDA4C49501773468A
27D1663E0B62F461F6E40A5D6676D1D12B51E641C1D4E8E2771864FC104F8CBF
5B78EC1D88228725F1C453A678F58A7E1B7BD7CA700717D288EB8DA1F57C4F09
0ABF1D42C5DDD0C384C7E22F8F8047BE1D4C1CC8E33368FB1AC82B4E96146730
DE3302B2E6B819CB6AE455B1AF3187FFE8071AA57EF8A6616B9CB7941D44EC7A
71A7BB3DF755178D7D2E4BB69859EFA4BBC30BD6BB1531133FD4D9438FF99F09
4ECC068A324D75B5F696B8688EEB2F17E5ED34CCD6D047A4E3806D000C199D7C
515DB70A8D4F6146FE068DC1E5DE8BC5703711DA090312BA3FC00A08C453C609
C627A8BECD6E1FA14A3B02476E90AAD8B4700C400380BC9AFFBF7847EB28661B
9DC3AA0F44C533F2E07DCC4DE19D367BF223E33DC321D0247A0E6EF6ABC8FA52
15AE044094EF678A8726CD7C011F02BFF8AB6EAEEE391AD837120823BED0B5D8
F8B15245377871A64F78378BB4330149D6941F7A86FBFFC49B93C94155F5FA7D
F22E7214511C0A92693F4CDBF38411651540572F2DD70D924AE0F18E1CD581F3
C871399127FF5D07A868885B5FF7CDEB50B8323B2533DEF8DC973B1AE84FA0A2

0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000
cleartomark
%%EndFont 
TeXDict begin 40258431 52099146 1000 600 600 (pvfs2-guide.dvi)
@start /Fa 139[60 60 60 1[60 60 1[60 3[60 3[60 1[60 1[60
49[60 47[{TeXBase1Encoding ReEncodeFont}11 99.6264 /Courier-Bold
rf /Fb 206[45 7[35 35 40[{}3 90.9091 /CMR10 rf /Fc 176[69
79[{}1 90.9091 /CMMI10 rf /Fd 133[35 40 40 61 40 45 25
35 35 45 45 45 45 66 25 40 25 25 45 45 25 40 45 40 45
45 18[61 4[30 9[45 4[30 7[45 4[30 23 40[45 45 2[{
TeXBase1Encoding ReEncodeFont}35 90.9091 /Times-Italic
rf /Fe 240[45 15[{}1 90.9091 /CMSY10 rf /Ff 134[50 50
72 50 55 33 39 44 1[55 50 55 83 28 55 33 28 55 50 33
44 55 44 55 50 8[72 100 72 72 66 55 2[61 78 72 94 2[50
39 78 1[61 1[72 72 66 2[50 7[50 50 50 50 50 50 50 1[28
25 33 5[33 39[{TeXBase1Encoding ReEncodeFont}53 99.6264
/Times-Bold rf /Fg 133[55 55 55 55 55 55 55 55 55 1[55
55 55 55 55 55 55 55 55 55 55 55 55 55 55 55 10[55 55
55 55 55 55 55 55 1[55 55 2[55 55 1[55 55 55 55 55 11[55
3[55 1[55 55 55 55 3[55 55 4[55 35[{TeXBase1Encoding ReEncodeFont}51
90.9091 /Courier rf /Fh 134[45 45 66 45 51 30 35 40 1[51
45 51 76 25 51 1[25 51 45 30 40 51 40 51 45 10[66 66
61 51 66 1[56 71 1[86 61 2[35 2[56 61 66 66 1[66 7[45
45 45 45 45 45 45 45 45 45 25 23 30 42[51 2[{
TeXBase1Encoding ReEncodeFont}52 90.9091 /Times-Bold
rf /Fi 134[60 3[66 40 47 53 2[60 66 100 33 2[33 66 60
40 53 66 53 66 60 10[86 86 80 66 2[73 93 5[47 2[73 2[86
1[86 10[60 60 60 60 60 60 1[33 47[{TeXBase1Encoding ReEncodeFont}35
119.552 /Times-Bold rf /Fj 105[45 1[40 40 24[40 45 45
66 45 45 25 35 30 45 45 45 45 71 25 45 25 25 45 45 30
40 45 40 45 40 8[66 86 66 66 56 51 61 66 51 66 66 81
56 1[35 30 66 66 51 56 66 61 61 66 1[40 1[51 1[25 25
45 45 45 45 45 45 45 45 45 45 25 23 30 23 1[45 30 30
30 1[76 3[30 29[51 51 2[{TeXBase1Encoding ReEncodeFont}78
90.9091 /Times-Roman rf /Fk 137[50 1[28 1[33 1[50 50
50 78 28 6[44 2[50 44 10[72 1[61 55 2[55 9[55 1[72 16[50
50 1[50 3[25 44[{TeXBase1Encoding ReEncodeFont}21 99.6264
/Times-Roman rf /Fl 134[72 3[72 40 56 48 2[72 72 112
40 2[40 3[64 3[64 10[104 2[80 2[80 9[80 19[72 5[36 44[{
TeXBase1Encoding ReEncodeFont}18 143.462 /Times-Roman
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%BeginPaperSize: Letter
/setpagedevice where
{ pop << /PageSize [612 792] >> setpagedevice }
{ /letter where { pop letter } if }
ifelse
%%EndPaperSize
 end
%%EndSetup
%%Page: 1 1
TeXDict begin 1 0 bop 848 576 a Fl(P)n(arallel)34 b(V)-9
b(irtual)34 b(File)h(System,)g(V)-16 b(ersion)34 b(2)1405
828 y Fk(PVFS2)26 b(De)n(v)o(elopment)c(T)-7 b(eam)1614
1032 y(September)l(,)25 b(2003)1927 5619 y Fj(1)p eop
end
%%Page: 2 2
TeXDict begin 2 1 bop 0 211 a Fi(Contents)0 418 y Fh(1)91
b(An)22 b(intr)n(oduction)i(to)g(PVFS2)2701 b(3)136 531
y Fj(1.1)96 b(Why)23 b(re)n(write?)71 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)128
b(3)136 644 y(1.2)96 b(What')-5 b(s)25 b(dif)n(ferent?)71
b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)128 b(3)136 757 y(1.3)96 b(When)24
b(will)f(this)i(be)e(a)n(v)n(ailable?)82 b(.)45 b(.)g(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)128 b(8)0 961
y Fh(2)91 b(The)23 b(basics)h(of)f(PVFS2)2917 b(9)136
1074 y Fj(2.1)96 b(Serv)o(ers)90 b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)128 b(9)136 1187 y(2.2)96 b(Netw)o(orks)77 b(.)45
b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(10)136 1300 y(2.3)96
b(Interf)o(aces)74 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82
b(10)136 1413 y(2.4)96 b(Client-serv)o(er)26 b(interactions)57
b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)82 b(10)136 1525 y(2.5)96 b(Consistenc)o(y)26
b(from)e(the)g(client)g(point)h(of)e(vie)n(w)81 b(.)45
b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(11)136 1638 y(2.6)96
b(File)24 b(system)g(consistenc)o(y)46 b(.)f(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(11)0
1842 y Fh(3)91 b(PVFS2)22 b(terminology)2910 b(13)136
1955 y Fj(3.1)96 b(File)24 b(system)g(components)29 b(.)45
b(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)82 b(13)136 2068 y(3.2)96 b(PVFS2)22 b(Objects)70
b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(14)136 2181 y(3.3)96
b(Handles)64 b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82
b(14)136 2294 y(3.4)96 b(Handle)25 b(ranges)43 b(.)i(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
g(.)82 b(14)136 2407 y(3.5)96 b(File)24 b(system)g(IDs)61
b(.)45 b(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(15)0 2611 y Fh(4)91 b(PVFS2)22
b(inter)o(nal)h(I/O)g(API)g(terminology)2247 b(16)136
2723 y Fj(4.1)96 b(Internal)26 b(I/O)d(interf)o(aces)38
b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)82 b(16)136 2836 y(4.2)96 b(Job)24 b(interf)o(ace)33
b(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(16)136 2949 y(4.3)96
b(Posting)25 b(and)f(testing)79 b(.)45 b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82
b(16)136 3062 y(4.4)96 b(T)-6 b(est)23 b(v)n(ariations)38
b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(17)136 3175 y(4.5)96
b(Conte)o(xts)40 b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82
b(17)136 3288 y(4.6)96 b(User)24 b(pointers)79 b(.)45
b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)g(.)82 b(17)136 3401 y(4.7)96 b(T)m(ime)23
b(outs)h(and)g(max)f(idle)i(time)70 b(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)
g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(17)0 3605 y Fh(5)91
b(PVFS2)22 b(User)h(APIs)g(and)f(Semantics)2396 b(19)136
3718 y Fj(5.1)96 b(UNIX)22 b(I/O)h(Interf)o(ace)56 b(.)45
b(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)g(.)82 b(19)136 3831 y(5.2)96 b(MPI-IO)23 b(Interf)o(ace)70
b(.)46 b(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h
(.)f(.)g(.)g(.)g(.)g(.)82 b(21)0 4034 y Fh(6)91 b(The)23
b(code)g(tr)n(ee)3151 b(22)136 4147 y Fj(6.1)96 b(The)24
b(top)f(le)n(v)o(el)89 b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82
b(22)136 4260 y(6.2)96 b Fg(src)58 b Fj(.)45 b(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)
f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f
(.)g(.)g(.)g(.)g(.)82 b(23)136 4373 y(6.3)96 b Fg(src/io)30
b Fj(.)45 b(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g
(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)
h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(24)136
4486 y(6.4)96 b Fg(test)71 b Fj(.)46 b(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)82 b(24)136 4599 y(6.5)96 b(State)24 b(machines)h(and)f
Fg(statecomp)i Fj(.)45 b(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g
(.)g(.)82 b(25)136 4712 y(6.6)96 b(Build)24 b(system)88
b(.)45 b(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82 b(25)136 4825 y(6.7)96
b(Out-of-tree)26 b(b)n(uilds)50 b(.)c(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g
(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)
g(.)g(.)h(.)f(.)g(.)g(.)g(.)h(.)f(.)g(.)g(.)g(.)g(.)82
b(25)1927 5619 y(2)p eop end
%%Page: 3 3
TeXDict begin 3 2 bop 0 211 a Fi(1)119 b(An)31 b(intr)n(oduction)g(to)f
(PVFS2)0 510 y Fj(Since)25 b(the)h(mid-1990s)h(we)d(ha)n(v)o(e)i(been)g
(in)f(the)g(b)n(usiness)j(of)d(parallel)h(I/O.)f(Our)f(\002rst)h
(parallel)i(\002le)d(system,)i(the)g(P)o(arallel)0 623
y(V)-5 b(irtual)21 b(File)g(System)g(\(PVFS\),)e(has)i(been)h(the)f
(most)g(successful)j(parallel)f(\002le)d(system)i(on)f(Linux)g
(clusters)i(to)e(date.)28 b(This)0 735 y(code)g(base)g(has)g(been)h
(used)f(both)g(in)f(production)k(mode)d(at)f(lar)n(ge)i(scienti\002c)g
(computing)g(centers)g(and)f(as)f(a)g(launching)0 848
y(point)e(for)e(man)o(y)h(research)h(endea)n(v)n(ors.)0
1053 y(Ho)n(we)n(v)o(er)l(,)i(the)f(PVFS)e(\(or)i(PVFS1\))f(code)i
(base)g(is)f(a)g(terrible)i(mess!)37 b(F)o(or)26 b(the)g(last)h(fe)n(w)
e(years)j(we)d(ha)n(v)o(e)i(been)g(pushing)0 1166 y(it)35
b(well)h(be)o(yond)h(the)f(en)l(vironment)i(for)e(which)g(it)f(w)o(as)h
(originally)i(designed.)67 b(The)35 b(core)i(of)e(PVFS1)f(is)h(no)h
(longer)0 1278 y(appropriate)27 b(for)c(the)h(en)l(vironment)j(in)c
(which)h(we)f(no)n(w)g(see)h(parallel)h(\002le)e(systems)i(being)f
(deplo)o(yed.)0 1483 y(While)i(we)e(ha)n(v)o(e)i(been)g(k)o(eeping)h
(PVFS1)c(rele)n(v)n(ant,)k(we)e(ha)n(v)o(e)h(also)f(been)h(interacting)
j(with)c(application)j(groups,)f(other)0 1596 y(parallel)c(I/O)e
(researchers,)k(and)c(implementors)j(of)d(system)h(softw)o(are)h(such)f
(as)g(message)g(passing)h(libraries.)30 b(As)21 b(a)g(result)0
1708 y(ha)n(v)o(e)29 b(learned)h(a)e(great)h(deal)g(about)h(ho)n(w)d
(applications)32 b(use)d(these)g(\002le)f(systems)h(and)g(ho)n(w)f(we)g
(might)g(better)i(le)n(v)o(erage)0 1821 y(the)24 b(underlying)i(hardw)o
(are.)0 2026 y(Ev)o(entually)36 b(we)c(reached)k(a)d(point)i(where)f
(it)g(w)o(as)f(ob)o(vious)j(to)d(us)h(that)h(a)e(ne)n(w)g(design)i(w)o
(as)f(in)g(order)-5 b(.)60 b(The)33 b(PVFS2)0 2139 y(design)f(embodies)
h(the)e(principles)i(that)f(we)e(belie)n(v)o(e)i(are)f(k)o(e)o(y)g(to)g
(a)f(successful,)35 b(rob)n(ust,)f(high-performance)h(parallel)0
2251 y(\002le)29 b(system.)48 b(It)30 b(is)f(being)i(implemented)h
(primarily)f(by)f(a)f(distrib)n(uted)k(team)d(at)f(Ar)n(gonne)j
(National)f(Laboratory)h(and)0 2364 y(Clemson)e(Uni)n(v)o(ersity)-6
b(.)47 b(Early)29 b(collaborations)k(ha)n(v)o(e)d(already)h(be)o(gun)f
(with)f(Ohio)g(Supercomputer)j(Center)e(and)f(Ohio)0
2477 y(State)24 b(Uni)n(v)o(ersity)-6 b(,)24 b(and)g(we)f(look)h(forw)o
(ard)h(to)e(additional)k(participation)g(by)d(interested)i(and)e(moti)n
(v)n(ated)h(parties.)0 2682 y(In)36 b(this)h(section)h(we)d(discuss)j
(the)f(moti)n(v)n(ation)h(behind)f(and)g(the)g(k)o(e)o(y)f
(characteristics)k(of)d(our)f(parallel)i(\002le)e(system,)0
2794 y(PVFS2.)0 3130 y Ff(1.1)99 b(Wh)o(y)24 b(r)n(ewrite?)0
3395 y Fj(There)32 b(are)g(lots)h(of)f(reasons)h(why)f(we')-5
b(v)o(e)32 b(chosen)i(to)e(re)n(write)g(the)g(code.)55
b(W)-7 b(e)31 b(were)h(bored)h(with)f(the)g(old)g(code.)55
b(W)-7 b(e)0 3508 y(were)27 b(tired)h(of)f(trying)h(to)f(w)o(ork)g
(around)i(inherent)g(problems)g(in)e(the)g(design.)41
b(But)26 b(mostly)i(we)e(felt)i(hamstrung)h(by)e(the)0
3621 y(design.)46 b(It)29 b(w)o(as)g(too)g(sock)o(et-centric,)34
b(too)29 b(ob)o(viously)j(single-threaded,)i(w)o(ouldn')n(t)d(support)g
(heterogeneous)i(systems)0 3734 y(with)23 b(dif)n(ferent)j
(endian-ness,)g(and)e(relied)h(too)f(thoroughly)j(on)c(OS)f(b)n(uf)n
(fering)k(and)e(\002le)f(system)h(characteristics.)0
3938 y(The)d(ne)n(w)g(code)i(base)g(is)e(much)h(bigger)h(and)g(more)e
(\003e)o(xible.)29 b(De\002nitely)23 b(there')-5 b(s)23
b(the)f(opportunity)j(for)d(us)g(to)g(suf)n(fer)g(from)0
4051 y(second)29 b(system)g(syndrome)g(here!)43 b(But)27
b(we')-5 b(re)29 b(willing)f(to)g(risk)g(this)h(in)e(order)i(to)f
(position)i(ourselv)o(es)g(to)e(use)g(the)g(ne)n(w)0
4164 y(code)c(base)h(for)e(man)o(y)h(years)g(to)g(come.)0
4499 y Ff(1.2)99 b(What')l(s)25 b(differ)n(ent?)0 4765
y Fj(The)e(ne)n(w)g(design)i(has)f(a)f(number)i(of)e(important)i
(features,)g(including:)136 5016 y Fe(\017)46 b Fj(modular)25
b(netw)o(orking)h(and)e(storage)h(subsystems,)136 5193
y Fe(\017)46 b Fj(po)n(werful)25 b(request)g(format)f(for)g(structured)
i(non-contiguous)j(accesses,)136 5370 y Fe(\017)46 b
Fj(\003e)o(xible)24 b(and)g(e)o(xtensible)i(data)f(distrib)n(ution)i
(modules,)1927 5619 y(3)p eop end
%%Page: 4 4
TeXDict begin 4 3 bop 136 211 a Fe(\017)46 b Fj(distrib)n(uted)27
b(metadata,)136 399 y Fe(\017)46 b Fj(stateless)26 b(serv)o(ers)f(and)f
(clients)h(\(no)f(locking)h(subsystem\),)136 586 y Fe(\017)46
b Fj(e)o(xplicit)25 b(concurrenc)o(y)i(support,)136 774
y Fe(\017)46 b Fj(tunable)26 b(semantics,)136 962 y Fe(\017)46
b Fj(\003e)o(xible)24 b(mapping)h(from)f(\002le)f(references)j(to)d
(serv)o(ers,)136 1149 y Fe(\017)46 b Fj(tight)25 b(MPI-IO)d(inte)o
(gration,)k(and)136 1337 y Fe(\017)46 b Fj(support)26
b(for)d(data)i(and)f(metadata)h(redundanc)o(y)-6 b(.)0
1674 y Fh(1.2.1)92 b(Modular)23 b(netw)o(orking)g(and)f(storage)0
1940 y Fj(One)36 b(shortcoming)j(of)e(the)f(PVFS1)f(system)i(is)f(its)h
(reliance)h(on)e(the)h(sock)o(et)h(netw)o(orking)h(interf)o(ace)g(and)d
(local)i(\002le)0 2052 y(systems)25 b(for)e(data)i(and)f(metadata)g
(storage.)0 2257 y(If)30 b(we)g(look)h(at)f(most)h(cluster)h(computers)
g(today)g(we)d(see)i(a)f(v)n(ariety)i(of)e(netw)o(orking)j
(technologies)h(in)d(place.)50 b(IP)-10 b(,)29 b(IB,)0
2370 y(Myrinet,)23 b(and)f(Quadrics)h(are)f(some)g(of)f(the)h(more)g
(popular)i(ones)e(at)g(the)g(time)f(of)h(writing,)g(b)n(ut)h(surely)g
(more)e(will)h(appear)0 2482 y Fd(and)30 b(disappear)k
Fj(in)c(the)f(near)h(future.)48 b(As)29 b(groups)i(attempt)f(to)g
(remotely)g(access)h(data)f(at)g(high)g(data)g(rates)g(across)h(the)0
2595 y(wide)26 b(area,)h(approaches)i(such)e(as)f(reliable)h(UDP)d
(protocols)29 b(might)d(become)h(an)f(important)i(component)g(of)e(a)f
(parallel)0 2708 y(\002le)e(system)h(as)g(well.)k(Supporting)e
(multiple)f(netw)o(orking)h(technologies,)h(and)d(supporting)i(them)e
Fd(ef)n(\002ciently)i Fj(is)e(k)o(e)o(y)-6 b(.)0 2913
y(Lik)o(e)n(wise)35 b(man)o(y)f(dif)n(ferent)i(storage)g(technologies)i
(are)c(no)n(w)g(a)n(v)n(ailable.)64 b(W)-7 b(e')i(re)34
b(still)h(getting)h(our)f(feet)g(wet)e(in)i(this)0 3025
y(area,)e(b)n(ut)f(it)f(is)g(clear)h(that)g(some)g(\003e)o(xibility)g
(on)g(this)g(front)g(will)f(pay)g(of)n(f)h(in)f(terms)g(of)g(our)h
(ability)h(to)e(le)n(v)o(erage)i(ne)n(w)0 3138 y(technologies)c(as)d
(the)o(y)g(appear)-5 b(.)37 b(In)26 b(the)g(mean)f(time)h(we)f(are)h
(certainly)i(going)f(to)e(le)n(v)o(erage)j(database)g(technologies)h
(for)0 3251 y(metadata)c(storage)g(\226)e(that)h(just)h(mak)o(es)f
(good)g(sense.)0 3455 y(In)e(PVFS2)e(the)j(Buf)n(fered)g(Messaging)i
(Interf)o(ace)f(\(BMI\))e(and)h(the)f(T)m(ro)o(v)o(e)g(storage)i
(interf)o(ace)h(pro)o(vide)e(APIs)f(to)g(netw)o(ork)0
3568 y(and)i(storage)h(technologies)j(respecti)n(v)o(ely)-6
b(.)0 3906 y Fh(1.2.2)92 b(Structur)n(ed)23 b(non-contiguous)h(data)f
(access)0 4171 y Fj(Scienti\002c)f(applications)j(are)d(complicated)i
(entities)g(constructed)g(from)e(numerous)h(libraries)h(and)e
(operating)i(on)e(highly)0 4284 y(structured)35 b(data.)57
b(This)33 b(data)g(is)g(often)h(stored)g(using)g(high-le)n(v)o(el)h
(I/O)d(libraries)j(that)e(manage)h(access)g(to)e(traditional)0
4397 y(byte-stream)26 b(\002les.)0 4601 y(These)40 b(libraries)i(allo)n
(w)e(applications)j(to)d(describe)i(complicated)g(access)f(patterns)h
(that)f(e)o(xtract)g(subsets)g(of)f(lar)n(ge)0 4714 y(datasets.)65
b(These)35 b(subsets)i(often)f(do)f(not)h(sit)f(in)g(contiguous)j(re)o
(gions)f(in)e(the)g(underlying)j(\002le;)i(ho)n(we)n(v)o(er)l(,)f(the)o
(y)c(are)0 4827 y(often)25 b(v)o(ery)e(structured)k(\(e.g.)h(a)c(block)
g(out)g(of)g(a)f(multidimensional)k(array\).)0 5031 y(It)f(is)h
(imperati)n(v)o(e)h(that)g(a)e(parallel)i(\002le)f(system)g(nati)n(v)o
(ely)h(support)h(structured)g(data)f(access)g(in)f(an)f(ef)n(\002cient)
i(manner)-5 b(.)39 b(In)0 5144 y(PVFS2)17 b(we)h(perform)i(this)f(with)
g(the)g(same)g(types)h(of)f(constructs)j(used)e(in)f(MPI)e(datatypes,)
23 b(allo)n(wing)d(for)f(the)g(description)0 5257 y(of)h(structured)j
(data)e(re)o(gions)g(with)f(strides,)i(common)f(block)g(sizes,)h(and)e
(so)g(on.)28 b(This)20 b(capability)j(can)d(then)h(be)f(le)n(v)o
(eraged)0 5370 y(by)k(higher)n(-le)n(v)o(el)i(libraries)g(such)e(as)g
(the)f(MPI-IO)g(implementation.)1927 5619 y(4)p eop end
%%Page: 5 5
TeXDict begin 5 4 bop 0 211 a Fh(1.2.3)92 b(Flexible)24
b(data)f(distrib)n(ution)0 477 y Fj(The)d(tradition)i(of)f(striping)h
(data)f(across)g(I/O)f(serv)o(ers)h(in)g(round-robin)i(f)o(ashion)f
(has)f(been)g(in)f(place)i(for)e(quite)h(some)g(time,)0
590 y(and)28 b(it)f(seems)h(as)f(good)h(a)f(def)o(ault)i(as)f(an)o(y)f
(gi)n(v)o(en)h(no)g(more)f(information)j(about)e(ho)n(w)f(a)g(\002le)g
(is)g(going)i(to)e(be)g(accessed.)0 703 y(Ho)n(we)n(v)o(er)l(,)21
b(in)g(man)o(y)g(cases)i(we)d Fd(do)h Fj(kno)n(w)h(more)f(about)h(ho)n
(w)f(a)g(\002le)f(is)h(going)i(to)e(be)g(accessed.)30
b(Applications)24 b(ha)n(v)o(e)e(man)o(y)0 816 y(opportunities)k(to)c
(gi)n(v)o(e)g(the)h(\002le)e(system)i(information)i(about)e(access)h
(patterns)g(through)g(v)n(arious)g(high-le)n(v)o(el)g(interf)o(aces.)0
929 y(Armed)33 b(with)g(this)g(information)j(we)c(can)i(mak)o(e)f
(informed)h(decisions)i(on)d(ho)n(w)g(to)g(better)h(distrib)n(ute)i
(data)e(to)f(match)0 1041 y(e)o(xpected)24 b(access)g(patterns.)30
b(More)22 b(complicated)j(systems)e(could)h(redistrib)n(ute)h(data)e
(to)f(better)i(match)e(patterns)i(that)f(are)0 1154 y(seen)h(in)g
(practice.)0 1359 y(PVFS2)g(includes)k(a)d(modular)j(system)e(for)g
(adding)i(ne)n(w)d(data)i(distrib)n(utions)j(to)25 b(the)i(system)f
(and)h(using)g(these)g(for)f(ne)n(w)0 1472 y(\002les.)i(W)-7
b(e')i(re)23 b(starting)i(with)e(the)g(same)f(old)h(round-robin)k
(scheme)c(that)h(e)n(v)o(eryone)g(is)f(accustomed)i(to,)d(b)n(ut)i(we)d
(e)o(xpect)j(to)0 1584 y(see)f(this)h(mechanism)h(used)f(to)f(better)h
(access)h(multidimensional)i(datasets.)j(It)23 b(might)h(play)g(a)f
(role)g(in)g(data)h(redundanc)o(y)0 1697 y(as)f(well.)0
2035 y Fh(1.2.4)92 b(Distrib)n(uted)23 b(metadata)0 2300
y Fj(One)j(of)g(the)h(biggest)h(complaints)h(about)e(PVFS1)e(is)h(the)g
(single)i(metadata)g(serv)o(er)-5 b(.)38 b(There)27 b(are)f(actually)j
(tw)o(o)d(bases)h(on)0 2413 y(which)20 b(this)g(complaint)i(is)d
(typically)j(launched.)30 b(The)19 b(\002rst)g(is)h(that)g(this)g(is)g
(a)f(single)i(point)f(of)g(f)o(ailure)h(\226)e(we')o(ll)h(address)i
(that)0 2526 y(in)k(a)f(bit)h(when)f(we)g(talk)h(about)h(data)f(and)g
(metadata)h(redundanc)o(y)-6 b(.)39 b(The)25 b(second)i(is)e(that)i(it)
e(is)g(a)h(potential)i(performance)0 2639 y(bottleneck.)0
2843 y(In)h(PVFS1)e(the)j(metadata)h(serv)o(er)f(steps)g(aside)g(for)g
(I/O)f(operations,)k(making)d(it)f(rarely)i(a)d(bottleneck)33
b(in)c(practice)i(for)0 2956 y(lar)n(ge)d(parallel)h(applications,)i
(because)d(the)o(y)g(are)f(b)n(usy)h(writing)f(data)h(and)f(not)g
(creating)i(a)e(billion)h(\002les)f(or)f(some)h(such)0
3069 y(thing.)60 b(Ho)n(we)n(v)o(er)l(,)36 b(as)e(systems)h(continue)h
(to)d(scale)i(it)e(becomes)i(e)n(v)o(er)f(more)g(lik)o(ely)h(that)f(an)
o(y)g(such)g(single)h(point)g(of)0 3182 y(contact)25
b(might)f(become)h(a)e(bottleneck)j(for)e(e)n(v)o(en)g(well-beha)n(v)o
(ed)i(applications.)0 3386 y(PVFS2)d(allo)n(ws)j(for)g
(con\002gurations)j(where)d(metadata)g(is)g(distrib)n(uted)j(to)c(some)
h(subset)h(of)e(I/O)g(serv)o(ers)i(\(which)f(might)0
3499 y(or)h(might)g(not)g(also)h(serv)o(e)f(data\).)40
b(This)27 b(allo)n(ws)g(for)g(metadata)h(for)f(dif)n(ferent)i(\002les)d
(to)h(be)g(placed)h(on)f(dif)n(ferent)i(serv)o(ers,)0
3612 y(so)24 b(that)g(applications)j(accessing)f(dif)n(ferent)f
(\002les)f(tend)g(to)f(impact)h(each)h(other)f(less.)0
3816 y(Distrib)n(uted)i(metadata)f(is)e(a)g(relati)n(v)o(ely)j(trick)o
(y)e(problem,)h(b)n(ut)f(we')-5 b(re)24 b(going)h(to)e(pro)o(vide)i(it)
f(in)f(early)h(releases)i(an)o(yw)o(ay)-6 b(.)0 4153
y Fh(1.2.5)92 b(Stateless)25 b(ser)o(v)o(ers)g(and)e(clients)0
4419 y Fj(P)o(arallel)28 b(\002le)e(systems)j(\(and)e(more)h(generally)
h(distrib)n(uted)i(\002le)26 b(systems\))j(are)e(potentially)k
(complicated)e(systems.)41 b(As)0 4532 y(the)24 b(number)h(of)f
(entities)h(participating)j(in)c(the)g(system)g(gro)n(ws,)g(so)g(does)h
(the)f(opportunity)j(for)d(f)o(ailures.)32 b(An)o(ything)25
b(that)0 4645 y(can)f(be)f(done)i(to)e(minimize)i(the)e(impact)i(of)e
(such)h(f)o(ailures)i(should)f(be)f(considered.)0 4849
y(NFS,)f(for)i(all)g(its)h(f)o(aults,)g(does)g(pro)o(vide)h(a)e
(concrete)i(e)o(xample)f(of)f(the)g(adv)n(antage)j(of)d(remo)o(ving)h
(shared)h(state)f(from)f(the)0 4962 y(system.)k(Clients)c(can)f
(disappear)l(,)i(and)e(an)f(NFS)f(serv)o(er)i(just)g(k)o(eeps)h
(happily)h(serving)f(\002les)e(to)h(the)g(remaining)h(clients.)0
5166 y(In)k(stark)h(contrast)i(to)d(this)h(are)f(a)g(number)i(of)e(e)o
(xample)h(distrib)n(uted)i(\002le)d(systems)i(in)e(place)h(today)-6
b(.)47 b(In)30 b(order)g(to)f(meet)0 5279 y(certain)i(design)h
(constraints)h(the)o(y)d(pro)o(vide)i(coherent)g(caches)f(on)f(clients)
i(enforced)g(via)e(locking)i(subsystems.)50 b(As)30 b(a)1927
5619 y(5)p eop end
%%Page: 6 6
TeXDict begin 6 5 bop 0 211 a Fj(result)35 b(a)e(client)i(f)o(ailure)g
(is)f(a)f(signi\002cant)j(e)n(v)o(ent)e(requiring)i(a)e(comple)o(x)g
(sequence)i(of)e(e)n(v)o(ents)h(to)e(reco)o(v)o(er)i(locks)g(and)0
324 y(ensure)25 b(that)f(the)g(system)g(is)g(in)f(the)h(appropriate)j
(state)d(before)h(operations)h(can)e(continue.)0 528
y(W)-7 b(e)33 b(ha)n(v)o(e)i(decided)h(to)e(b)n(uild)h(PVFS2)d(as)i(a)g
(stateless)i(system)f(and)f(do)g(not)h(use)f(locks)h(as)f(part)h(of)f
(the)g(client-serv)o(er)0 641 y(interaction.)41 b(This)26
b(v)n(astly)i(simpli\002es)f(the)g(process)h(of)f(reco)o(v)o(ering)h
(from)f(f)o(ailures)h(and)f(f)o(acilitates)i(the)e(use)g(of)g(of)n
(f-the-)0 754 y(shelf)34 b(high-a)n(v)n(ailability)k(solutions)d(for)e
(pro)o(viding)j(serv)o(er)e(f)o(ailo)o(v)o(er)-5 b(.)58
b(This)33 b(does)g(impact)h(the)f(semantics)i(of)e(the)g(\002le)0
867 y(system,)24 b(b)n(ut)g(we)f(belie)n(v)o(e)h(that)h(the)e
(resulting)j(semantics)g(are)d(v)o(ery)h(appropriate)j(for)d(parallel)h
(I/O.)0 1204 y Fh(1.2.6)92 b(Explicit)24 b(support)e(f)n(or)i(concurr)n
(ency)0 1470 y Fj(Clearly)h(concurrent)i(processing)h(is)c(k)o(e)o(y)g
(in)h(this)f(type)i(of)e(system.)32 b(The)23 b(PVFS2)g(serv)o(er)i(and)
g(client)g(designs)h(are)f(based)0 1583 y(around)f(an)d(e)o(xplicit)j
(state)e(machine)i(system)e(that)h(is)e(tightly)j(coupled)g(with)d(a)h
(component)i(for)e(monitoring)i(completion)0 1696 y(of)30
b(operations)k(across)d(all)g(de)n(vices.)51 b(Threads)31
b(are)g(used)g(where)f(necessary)j(to)e(pro)o(vide)h(non-blocking)i
(access)e(to)e(all)0 1809 y(de)n(vice)25 b(types.)30
b(This)24 b(combination)i(of)e(threads,)h(state)g(machines,)g(and)f
(completion)i(noti\002cation)g(allo)n(ws)e(us)g(to)f(quickly)0
1922 y(identify)37 b(opportunities)j(to)35 b(mak)o(e)h(progress)h(on)f
(particular)i(operations)g(and)e(a)n(v)n(oids)h(serialization)i(of)d
(independent)0 2035 y(operations)26 b(within)f(the)e(client)i(or)f
(serv)o(er)-5 b(.)0 2239 y(This)28 b(design)j(has)d(a)h(further)h
(side-ef)n(fect)h(of)d(gi)n(ving)i(us)f(nati)n(v)o(e)g(support)i(for)d
(asynchronous)33 b(operations)e(on)e(the)g(client)0 2352
y(side.)g(Nati)n(v)o(e)22 b(support)i(for)e(asynchronous)k(operations)f
(mak)o(es)d(nonblocking)k(operations)f(under)e(MPI-IO)e(both)i(easy)f
(to)0 2465 y(implement)j(and)f(adv)n(antageous)j(to)c(use.)0
2802 y Fh(1.2.7)92 b(T)-8 b(unable)21 b(semantics)0 3067
y Fj(Most)i(distrib)n(uted)k(\002le)22 b(systems)i(in)f(use)h(for)f
(cluster)i(systems)f(pro)o(vide)h(POSIX)c(\(or)i(v)o(ery)g(close)h(to)g
(POSIX\))d(semantics.)0 3180 y(These)j(semantics)h(are)f(v)o(ery)g
(strict,)g(ar)n(guably)i(more)e(strict)g(than)h(necessary)h(for)d(a)g
(usable)i(parallel)h(I/O)d(system.)0 3385 y(NFS)g(does)i(not)g(pro)o
(vide)h(POSIX)d(semantics)j(because)h(it)d(does)i(not)f(guarantee)i
(that)e(client)h(caches)g(are)f(coherent.)34 b(This)0
3497 y(actually)24 b(results)f(in)f(a)g(system)g(that)h(is)f(often)h
(unusable)h(for)e(parallel)i(I/O,)d(b)n(ut)h(is)g(v)o(ery)g(useful)i
(for)e(home)g(directories)j(and)0 3610 y(such.)0 3815
y(Storage)h(systems)f(being)h(applied)g(in)f(the)g(Grid)f(en)l
(vironment,)k(such)e(as)e(those)i(being)g(used)f(in)g(conjunction)j
(with)c(some)0 3927 y(physics)f(e)o(xperiments,)h(ha)n(v)o(e)f(still)f
(dif)n(ferent)i(semantics.)30 b(These)22 b(tend)h(to)e(assume)i(that)f
(\002les)g(are)g(added)h(atomically)h(and)0 4040 y(are)g(ne)n(v)o(er)g
(subsequently)j(modi\002ed.)0 4245 y(All)k(these)i(v)o(ery)f(dif)n
(ferent)i(approaches)g(ha)n(v)o(e)f(their)f(merits)h(and)f
(applications,)37 b(b)n(ut)32 b(also)h(ha)n(v)o(e)f(their)h(disadv)n
(antages.)0 4358 y(PVFS2)i(will)i(not)h(support)h(POSIX)c(semantics)k
(\(although)h(one)d(is)g(welcome)h(to)f(b)n(uild)i(such)f(a)e(system)i
(on)g(top)f(of)0 4470 y(PVFS2\).)55 b(Ho)n(we)n(v)o(er)l(,)35
b(we)d(do)h(intend)h(to)f(gi)n(v)o(e)g(users)h(a)f(great)h(de)o(gree)g
(of)f(\003e)o(xibility)h(in)f(terms)g(of)g(the)g(coherenc)o(y)i(of)0
4583 y(the)23 b(vie)n(w)f(of)g(\002le)g(data)h(and)f(of)h(the)f(\002le)
g(system)h(hierarchy)-6 b(.)31 b(Users)22 b(in)g(a)g(tightly)i(coupled)
h(parallel)f(machine)f(will)f(opt)h(for)0 4696 y(more)f(strict)h
(semantics)h(that)e(allo)n(w)g(for)g(MPI-IO)f(to)h(be)g(implemented.)30
b(Other)22 b(groups)i(might)e(go)g(for)g(looser)h(semantics)0
4809 y(allo)n(wing)j(for)f(access)h(across)g(the)e(wide)h(area.)33
b(The)24 b(k)o(e)o(y)h(here)g(is)f(allo)n(wing)i(for)f(the)g
(possibility)i(of)e(dif)n(ferent)h(semantics)0 4922 y(to)d(match)h(dif)
n(ferent)i(needs.)1927 5619 y(6)p eop end
%%Page: 7 7
TeXDict begin 7 6 bop 0 211 a Fh(1.2.8)92 b(Flexible)24
b(mapping)e(fr)n(om)i(\002le)f(r)n(efer)n(ences)j(to)d(ser)o(v)o(ers)0
477 y Fj(Administrators)33 b(appreciate)f(the)e(ability)i(to)e
(recon\002gure)i(systems)f(to)f(adapt)h(to)e(changes)j(in)e(polic)o(y)h
(or)f(a)n(v)n(ailable)i(re-)0 590 y(sources.)52 b(In)31
b(parallel)h(\002le)e(systems,)k(the)d(mapping)h(from)e(a)g(\002le)h
(reference)i(to)d(its)h(location)i(on)e(de)n(vices)h(can)f(help)g(or)0
703 y(hinder)25 b(recon\002guration)i(of)d(the)f(\002le)g(system.)0
907 y(In)i(PVFS2)e(\002le)i(data)h(is)f(split)h(into)g
Fd(data\002les)p Fj(.)36 b(Each)25 b(data\002le)h(has)g(its)f(o)n(wn)g
(reference,)j(and)e(clients)g(identify)i(the)d(serv)o(er)0
1020 y(that)i(o)n(wns)g(a)f(data\002le)h(by)g(checking)i(a)d(table)i
(loaded)g(at)f(con\002guration)i(time.)38 b(A)26 b(serv)o(er)h(can)g
(be)g(added)h(to)f(the)f(system)0 1133 y(by)g(allocating)i(a)d(ne)n(w)g
(range)h(of)f(references)k(to)c(that)h(serv)o(er)g(and)g(restarting)i
(clients)f(with)e(an)h(update)h(table.)35 b(Lik)o(e)n(wise,)0
1246 y(serv)o(ers)27 b(can)f(be)f(remo)o(v)o(ed)h(by)g(\002rst)f
(stopping)i(clients,)h(ne)o(xt)d(mo)o(ving)i(data\002les)f(of)n(f)g
(the)f(serv)o(er)l(,)i(then)f(restarting)i(with)e(a)0
1359 y(ne)n(w)d(table.)29 b(It)23 b(is)g(not)h(dif)n(\002cult)g(to)g
(imagine)g(pro)o(viding)i(this)e(functionality)j(while)c(the)h(system)g
(is)f(running,)i(and)f(we)f(will)0 1472 y(be)h(in)l(v)o(estigating)j
(this)d(possibility)i(once)f(basic)f(functionality)k(is)23
b(stable.)0 1809 y Fh(1.2.9)92 b(T)n(ight)23 b(MPI-IO)g(coupling)0
2074 y Fj(The)29 b(UNIX)f(interf)o(ace)j(is)f(a)f(poor)h(b)n(uilding)i
(block)e(for)g(an)f(MPI-IO)g(implementation.)49 b(It)29
b(does)h(not)g(pro)o(vide)h(the)f(rich)0 2187 y(API)23
b(necessary)28 b(to)c(communicate)j(structured)g(I/O)d(accesses)j(to)e
(the)g(underlying)i(\002le)d(system.)33 b(It)25 b(has)g(a)f(lot)h(of)f
(internal)0 2300 y(state)k(stored)h(as)e(part)h(of)f(the)g(\002le)g
(descriptor)-5 b(.)42 b(It)27 b(implies)i(POSIX)c(semantics,)k(b)n(ut)f
(does)g(not)g(pro)o(vide)g(them)g(for)f(some)0 2413 y(\002le)c(systems)
i(\(e.g.)j(NFS,)21 b(man)o(y)j(local)g(\002le)f(systems)i(when)e
(writing)i(lar)n(ge)g(data)f(re)o(gions\).)0 2617 y(Rather)e(than)h(b)n
(uilding)h(MPI-IO)d(support)i(for)f(PVFS2)e(through)k(a)d(UNIX-lik)o(e)
h(interf)o(ace,)i(we)d(ha)n(v)o(e)h(started)h(with)f(some-)0
2730 y(thing)f(that)f(e)o(xposes)h(more)f(of)g(the)g(capabilities)j(of)
c(the)h(\002le)g(system.)28 b(This)19 b(interf)o(ace)j(does)f(not)f
(maintain)h(\002le)e(descriptors)0 2843 y(or)27 b(internal)h(state)g
(re)o(garding)g(such)f(things)i(as)d(\002le)g(positions,)k(and)d(in)f
(doing)i(so)f(allo)n(ws)g(us)g(to)f(better)i(le)n(v)o(erage)g(the)f
(ca-)0 2956 y(pabilities)f(of)e(MPI-IO)e(to)i(perform)g(ef)n(\002cient)
g(access.)0 3160 y(W)-7 b(e')i(v)o(e)23 b(already)i(discussed)h(rich)e
(I/O)f(requests.)30 b(\223Opening\224)25 b(a)e(\002le)g(is)g(another)i
(good)f(e)o(xample.)29 b Fg(MPI)p 3295 3160 28 4 v 32
w(File)p 3547 3160 V 31 w(open\(\))0 3273 y Fj(is)e(a)g(collecti)n(v)o
(e)i(operation)h(that)d(gathers)i(information)g(on)f(a)e(\002le)h(so)g
(that)h(MPI)e(processes)j(may)e(later)h(access)h(it.)39
b(If)27 b(we)0 3386 y(were)j(to)g(b)n(uild)h(this)g(on)f(top)h(of)f(a)f
(UNIX-lik)o(e)h(API,)f(we)g(w)o(ould)i(ha)n(v)o(e)g(each)f(process)i
(that)f(w)o(ould)g(potentially)i(access)0 3499 y(the)e(\002le)f(call)h
Fg(open\(\))p Fj(.)47 b(In)30 b(PVFS2)f(we)g(instead)k(resolv)o(e)f
(the)f(\002lename)g(into)g(a)f(handle)i(using)g(a)e(single)i(\002le)e
(system)0 3612 y(operation,)e(then)e(broadcast)i(the)d(resulting)j
(handle)e(to)f(the)h(remainder)h(of)e(the)g(processes.)36
b(Operations)28 b(that)d(determine)0 3725 y(\002le)f(size,)h(truncate)i
(\002les,)d(and)h(remo)o(v)o(e)g(\002les)g(may)f(all)h(be)f(performed)j
(in)d(this)i(same)e Fc(O)s Fb(\(1\))h Fj(manner)l(,)h(scaling)g(as)f
(well)f(as)0 3838 y(the)g(MPI)e(broadcast)k(call.)0 4175
y Fh(1.2.10)92 b(Data)24 b(and)e(metadata)i(r)n(edundancy)0
4440 y Fj(Another)h(common)f(\(and)g(v)n(alid\))h(complaint)h(re)o
(garding)f(PVFS1)d(is)h(its)h(lack)h(of)e(support)j(for)e(redundanc)o
(y)j(at)c(the)h(serv)o(er)0 4553 y(le)n(v)o(el.)38 b(RAID)24
b(approaches)30 b(are)d(usable)g(to)g(pro)o(vide)h(tolerance)g(of)f
(disk)g(f)o(ailures,)i(b)n(ut)e(if)f(a)g(serv)o(er)h(disappears,)j(all)
c(\002les)0 4666 y(with)d(data)i(on)e(that)h(serv)o(er)h(are)e
(inaccessible)k(until)e(the)f(serv)o(er)g(is)g(reco)o(v)o(ered.)0
4871 y(T)m(raditional)k(high-a)n(v)n(ailability)j(solutions)d(may)d(be)
h(applied)i(to)d(both)i(metadata)g(and)f(data)h(serv)o(ers)g(in)f
(PVFS2)d(\(the)o(y')-5 b(re)0 4983 y(actually)36 b(the)f(same)g(serv)o
(er\).)62 b(This)35 b(option)h(requires)g(shared)g(storage)g(between)g
(the)e(tw)o(o)g(machines)i(on)f(which)g(\002le)0 5096
y(system)24 b(data)g(is)g(stored,)g(so)g(this)g(may)f(be)h(prohibiti)n
(v)o(ely)j(e)o(xpensi)n(v)o(e)e(for)f(some)f(users.)0
5301 y(A)30 b(second)j(option)f(that)g(is)f(being)h(in)l(v)o(estigated)
i(is)d(what)g(we)f(are)h(calling)i Fd(lazy)f(r)m(edundancy)p
Fj(.)54 b(The)31 b(lazy)g(redundanc)o(y)1927 5619 y(7)p
eop end
%%Page: 8 8
TeXDict begin 8 7 bop 0 211 a Fj(approach)27 b(is)d(our)g(response)j
(to)d(the)h(f)o(ailure)h(of)e(RAID-lik)o(e)g(approaches)k(to)c(scale)h
(well)f(for)h(lar)n(ge)g(parallel)h(I/O)e(systems)0 324
y(when)32 b(applied)h(across)g(serv)o(ers.)53 b(The)31
b(f)o(ailure)i(of)f(this)g(approach)h(at)f(this)g(scale)g(is)f
(primarily)i(due)f(to)f(the)h(signi\002cant)0 437 y(change)c(in)e(en)l
(vironment)j(\(latenc)o(y)f(and)f(number)g(of)f(de)n(vices)i(across)f
(which)g(data)g(is)f(striped\).)38 b(Pro)o(viding)28
b(the)f(atomic)0 550 y(read/modify/write)36 b(capability)f(necessary)g
(to)d(implement)h(RAID-lik)o(e)g(protocols)i(in)d(a)g(distrib)n(uted)j
(\002le)d(system)h(re-)0 663 y(quires)25 b(a)e(great)h(deal)h(of)e
(performance-hampering)29 b(infrastructure.)0 867 y(W)l(ith)i(lazy)g
(redundanc)o(y)j(we)c(e)o(xpose)i(the)f(creation)h(of)f(redundant)i
(data)e(as)g(an)g(e)o(xplicit)h(operation.)52 b(This)31
b(places)h(the)0 980 y(b)n(urden)d(of)d(enforcing)j(consistent)h
(access)e(on)f(the)g(user)-5 b(.)38 b(Ho)n(we)n(v)o(er)l(,)28
b(it)e(also)h(opens)h(up)f(the)g(opportunity)j(for)d(a)f(number)0
1093 y(of)e(optimizations,)k(such)e(as)e(creating)j(redundant)g(data)e
(in)g(parallel.)33 b(Further)l(,)26 b(because)h(this)e(can)g(be)f
(applied)j(at)d(a)g(more)0 1206 y(coarse)31 b(grain,)i(more)d
(compute-intensi)n(v)o(e)k(algorithms)e(may)e(be)g(used)g(in)g(place)h
(of)f(simple)h(parity)-6 b(,)32 b(pro)o(viding)h(higher)0
1319 y(reliability)26 b(than)f(simple)f(parity)h(schemes.)0
1523 y(Lazy)h(redundanc)o(y)i(is)e(still)g(at)g(the)g(conceptual)j
(stage.)36 b(W)-7 b(e')i(re)26 b(still)h(trying)g(to)f(determine)h(ho)n
(w)e(to)h(best)g(\002t)f(this)i(into)f(the)0 1636 y(system)e(as)g(a)f
(whole.)29 b(Ho)n(we)n(v)o(er)l(,)23 b(traditional)j(f)o(ailo)o(v)o(er)
f(solutions)h(may)e(be)f(put)h(in)g(place)g(for)g(the)g(e)o(xisting)h
(system.)0 1973 y Fh(1.2.11)92 b(And)22 b(mor)n(e...)0
2239 y Fj(There)g(are)g(so)g(man)o(y)f(things)j(that)e(we)f(feel)h(we)f
(could)i(ha)n(v)o(e)g(done)f(better)h(in)f(PVFS1)e(that)i(it)g(is)f
(really)i(a)e(little)i(embarrass-)0 2352 y(ing.)29 b(Better)23
b(heterogeneous)k(system)d(support,)g(a)f(better)h(b)n(uild)g(system,)f
(a)f(solid)i(infrastructure)j(for)c(testing)h(concurrent)0
2465 y(access)30 b(to)e(the)g(\002le)g(system,)h(an)f(inherently)j
(concurrent)g(approach)g(to)d(servicing)j(operations)g(on)d(both)h(the)
f(client)i(and)0 2577 y(serv)o(er)l(,)h(better)f(management)h(tools,)g
(e)n(v)o(en)e(symlinks;)34 b(we')-5 b(v)o(e)29 b(tried)h(to)f(address)h
(most)f(if)g(not)g(all)g(the)h(major)f(concerns)0 2690
y(that)24 b(our)g(PVFS1)d(users)k(ha)n(v)o(e)f(had)g(o)o(v)o(er)g(the)g
(years.)0 2895 y(It')-5 b(s)24 b(a)f(big)h(undertaking)j(for)d(us.)k
(Which)c(leads)h(to)e(the)h(ob)o(vious)i(ne)o(xt)d(question.)0
3235 y Ff(1.3)99 b(When)26 b(will)e(this)h(be)g(a)n(v)o(ailable?)0
3501 y Fj(Belie)n(v)o(e)h(it)f(or)h(not,)g(right)g(no)n(w)-6
b(.)35 b(At)25 b(SC2004)g(we)g(released)j(PVFS2)23 b(1.0.)35
b(W)-7 b(e)25 b(w)o(ould)h(be)g(foolish)h(to)f(claim)f(PVFS2)f(has)0
3614 y(no)30 b(b)n(ugs)g(and)g(will)f(w)o(ork)g(for)h(e)n(v)o(eryone)h
(100\045)f(of)f(the)h(time,)g(b)n(ut)g(we)f(feel)h(PVFS2)d(is)i(in)h
(pretty)g(good)h(shape.)47 b(Early)0 3727 y(testing)25
b(has)f(found)h(a)e(lot)h(of)f(b)n(ugs,)i(and)f(we)e(feel)i(PVFS)d(is)j
(ready)g(for)g(wider)g(use.)0 3931 y(Note)f(that)g(we')-5
b(re)23 b(committed)h(to)f(supporting)i(PVFS1)c(for)i(some)g(time)f
(after)i(PVFS2)c(is)j(a)n(v)n(ailable)i(and)e(stable.)30
b(W)-7 b(e)22 b(feel)0 4044 y(lik)o(e)i(PVFS1)e(is)h(a)h(good)g
(solution)i(for)e(man)o(y)g(groups)h(already)-6 b(,)25
b(and)f(we)f(w)o(ould)i(prefer)f(for)g(people)h(to)f(use)g(PVFS1)e(for)
i(a)0 4157 y(little)g(while)g(longer)h(rather)g(than)f(them)g(ha)n(v)o
(e)g(a)f(sour)h(\002rst)f(e)o(xperience)k(with)c(PVFS2.)0
4361 y(W)-7 b(e)30 b(announce)k(updates)f(frequently)i(on)c(the)g
(PVFS2)f(mailing)i(lists.)53 b(W)-7 b(e)30 b(encourage)k(users)e(to)g
(subscribe)h(\226)e(it')-5 b(s)32 b(the)0 4474 y(best)26
b(w)o(ay)g(to)g(k)o(eep)h(abreast)g(of)f(PVFS2)e(de)n(v)o(elopments.)38
b(All)25 b(code)i(is)e(being)i(distrib)n(uted)i(under)e(the)g(LGPL)c
(license)k(to)0 4587 y(f)o(acilitate)f(use)e(under)h(arbitrarily)h
(licensed)f(high-le)n(v)o(el)h(libraries.)1927 5619 y(8)p
eop end
%%Page: 9 9
TeXDict begin 9 8 bop 0 211 a Fi(2)119 b(The)31 b(basics)e(of)g(PVFS2)0
510 y Fj(PVFS2)24 b(is)i(a)g(parallel)i(\002le)e(system.)37
b(This)26 b(means)h(that)g(it)f(is)g(designed)j(for)d(parallel)i
(applications)i(sharing)e(data)f(across)0 623 y(man)o(y)e(clients)i(in)
f(a)f(coordinated)j(manner)-5 b(.)36 b(T)-7 b(o)24 b(do)i(this)g(with)f
(high)h(performance,)i(man)o(y)e(serv)o(ers)g(are)g(used)g(to)g(pro)o
(vide)0 735 y(multiple)32 b(paths)g(to)e(data.)51 b(P)o(arallel)32
b(\002le)e(systems)h(are)g(a)g(subset)h(of)e(distrib)n(uted)k(\002le)c
(systems,)k(which)d(are)g(more)f(gen-)0 848 y(erally)i(\002le)e
(systems)h(that)h(pro)o(vide)g(shared)g(access)g(to)e(distrib)n(uted)k
(data,)f(b)n(ut)e(don')n(t)h(necessarily)i(ha)n(v)o(e)d(this)g(focus)h
(on)0 961 y(performance)26 b(or)e(parallel)h(access.)0
1166 y(There)d(are)g(lots)g(of)f(things)i(that)f(PVFS2)e(is)h
Fd(not)j Fj(designed)g(for)-5 b(.)28 b(In)21 b(some)h(cases)h(it)e
(will)g(coincidentally)26 b(perform)d(well)e(for)0 1278
y(some)27 b(arbitrary)j(task)e(that)g(we)e(weren')n(t)j(tar)n(geting.)
43 b(In)27 b(other)h(cases)h(it)e(will)g(perform)h(v)o(ery)g(poorly)-6
b(.)41 b(If)27 b(f)o(aced)i(with)e(the)0 1391 y(option)d(of)e(making)h
(the)g(system)g(better)h(for)e(some)h(other)g(task)g(\(e.g.)28
b(e)o(x)o(ecuting)d(of)n(f)d(the)h(\002le)e(system,)i(shared)h
(mmapping)0 1504 y(of)h(\002les,)g(storing)i(mail)e(in)g(mbox)g
(format\))h(at)f(the)g(e)o(xpense)i(of)e(parallel)i(I/O)e(performance,)
i(we)e(will)g(al)o(w)o(ays)g(ruthlessly)0 1617 y(ignore)g(performance)h
(for)e(these)g(other)h(tasks.)0 1821 y(PVFS2)h(uses)j(an)g
Fd(intellig)o(ent)i(server)h Fj(architecture.)46 b(By)28
b(this)g(we)g(mean)g(that)h(serv)o(ers)h(do)e(more)h(than)g(simply)g
(pro)o(vide)0 1934 y(clients)i(with)f(blocks)h(of)f(data)g(from)g
(disks,)i(instead)f(talking)h(in)d(higher)n(-le)n(v)o(el)k
(abstractions)g(such)e(as)e(\002les)h(and)g(direc-)0
2047 y(tories.)60 b(An)32 b(alternati)n(v)o(e)k(architecture)h(is)c
Fd(shar)m(ed)i(stor)o(a)o(g)o(e)p Fj(,)i(where)d(storage)h(de)n(vices)g
(\(usually)g(accessed)h(at)d(a)g(block)0 2160 y(granularity\))e(are)d
(directly)h(addressed)h(by)e(clients.)42 b(The)27 b(intelligent)j(serv)
o(er)f(approach)h(allo)n(ws)d(for)h(cle)n(v)o(er)g(algorithms)0
2273 y(that)35 b(could)g(not)f(be)g(applied)i(were)e(block-le)n(v)o(el)
i(accesses)g(the)e(only)h(mechanism)g(clients)h(had)e(to)g(interact)i
(with)e(the)0 2386 y(system)26 b(because)g(more)f(appropriate)j(remote)
e(operations)h(can)e(be)g(pro)o(vided)i(that)e(serv)o(e)h(as)f(b)n
(uilding)i(blocks)f(for)f(these)0 2499 y(algorithms.)0
2703 y(In)j(this)h(section)h(we)e(discuss)i(the)e(components)j(of)d
(the)h(system,)h(ho)n(w)e(clients)h(and)g(serv)o(ers)h(interact)g(with)
e(each)h(other)l(,)0 2816 y(consistenc)o(y)k(semantics,)f(and)e(ho)n(w)
f(the)h(\002le)f(system)h(state)g(is)g(k)o(ept)g(consistent)i(without)f
(the)f(use)g(of)f(locks.)48 b(In)29 b(man)o(y)0 2929
y(cases)f(we)f(will)g(compare)h(the)g(ne)n(w)f(system)h(with)f(the)g
(original)j(PVFS,)24 b(for)k(those)g(who)f(are)h(may)f(already)i(be)e
(f)o(amiliar)0 3042 y(with)c(that)h(architecture.)0 3382
y Ff(2.1)99 b(Ser)o(v)o(ers)0 3648 y Fj(In)30 b(PVFS1)e(there)j(were)f
(tw)o(o)f(types)i(of)f(serv)o(er)h(processes,)j Fd(mgr)o(s)c
Fj(that)h(serv)o(ed)g(metadata)g(and)f Fd(iods)h Fj(that)g(serv)o(ed)g
(data.)0 3761 y(F)o(or)26 b(an)o(y)i(gi)n(v)o(en)g(PVFS1)d(\002le)i
(system)h(there)g(w)o(as)f(e)o(xactly)i(one)e(acti)n(v)o(e)h(mgr)f
(serving)i(metadata)g(and)f(potentially)i(man)o(y)0 3874
y Fd(iods)h Fj(serving)h(data)e(for)h(that)f(\002le)g(system.)49
b(Since)30 b(mgrs)g(and)h(iods)g(are)f(just)g(UNIX)f(processes,)34
b(some)c(users)h(found)g(it)0 3987 y(con)l(v)o(enient)c(to)c(run)h
(both)g(a)f(mgr)h(and)g(an)f(iod)h(on)g(the)g(same)f(node)i(to)e
(conserv)o(e)i(hardw)o(are)g(resources.)0 4191 y(In)f(PVFS2)e(there)j
(is)f(e)o(xactly)i(one)f(type)g(of)f(serv)o(er)h(process,)h(the)e
Fd(pvfs2-server)p Fj(.)34 b(This)24 b(is)g(also)h(a)f(UNIX)f(process,)j
(so)e(one)0 4304 y(could)30 b(run)f(more)g(than)g(one)h(of)e(these)i
(on)f(the)g(same)g(node)g(if)g(desired)h(\(although)i(we)c(will)g(not)h
(discuss)i(this)e(here\).)45 b(A)0 4417 y(con\002guration)31
b(\002le)d(tells)g(each)h(pvfs2-serv)o(er)i(what)e(its)f(role)g(will)g
(be)g(as)g(part)h(of)f(the)g(parallel)i(\002le)e(system.)43
b(There)28 b(are)0 4530 y(tw)o(o)c(possible)j(roles,)e(metadata)h(serv)
o(er)f(and)g(data)g(serv)o(er)l(,)g(and)g(an)o(y)g(gi)n(v)o(en)g
(pvfs2-serv)o(er)i(can)e(\002ll)f(one)g(or)h(both)g(of)f(these)0
4643 y(roles.)0 4847 y(PVFS2)30 b(serv)o(ers)j(store)g(data)g(for)f
(the)h(parallel)g(\002le)f(system)h(locally)-6 b(.)56
b(The)31 b(current)j(implementation)h(of)d(this)g(storage)0
4960 y(relies)23 b(on)e(UNIX)f(\002les)i(to)f(hold)h(\002le)f(data)i
(and)f(a)f(Berk)o(ele)o(y)h(DB)e(database)k(to)e(hold)g(things)h(lik)o
(e)f(metadata.)30 b(The)21 b(speci\002cs)0 5073 y(of)i(this)i(storage)g
(are)f(hidden)h(under)f(an)g(API)e(that)i(we)f(call)h(T)m(ro)o(v)o(e.)
1927 5619 y(9)p eop end
%%Page: 10 10
TeXDict begin 10 9 bop 0 211 a Ff(2.2)99 b(Netw)o(orks)0
477 y Fj(PVFS2)24 b(has)j(the)g(capability)i(to)d(support)i(an)f
(arbitrary)h(number)g(of)e(dif)n(ferent)i(netw)o(ork)g(types)f(through)
i(an)d(abstraction)0 590 y(kno)n(wn)34 b(as)f(the)g(Buf)n(fered)h
(Messaging)h(Interf)o(ace)h(\(BMI\).)c(At)g(this)i(time)f(BMI)f
(implementations)37 b(e)o(xist)c(for)h(TCP/IP)-10 b(,)0
703 y(Myricom')-5 b(s)25 b(GM,)d(and)i(In\002niBand)g(\(both)h
(Mellanox)g(V)-12 b(API)22 b(and)i(OpenIB)f(APIs\).)0
1043 y Ff(2.3)99 b(Interfaces)0 1309 y Fj(At)26 b(this)h(time)g(there)g
(are)g(e)o(xactly)h(tw)o(o)e(lo)n(w-le)n(v)o(el)i(I/O)e(interf)o(aces)j
(that)e(clients)i(commonly)f(use)f(to)f(access)i(parallel)h(\002le)0
1422 y(systems.)36 b(The)25 b(\002rst)g(of)g(these)h(is)g(the)f(UNIX)f
(API)g(as)i(presented)i(by)d(the)h(client)g(operating)i(system.)36
b(The)25 b(second)i(is)e(the)0 1535 y(MPI-IO)e(interf)o(ace.)0
1739 y(In)33 b(PVFS1)f(we)h(pro)o(vide)i(access)f(through)i(the)e
(operating)i(system)e(by)g(pro)o(viding)i(a)d(loadable)i(module)g(that)
f(e)o(xports)0 1852 y(VFS)23 b(operations)28 b(out)e(into)g(user)g
(space,)g(where)g(a)f(client-side)j(UNIX)23 b(process,)28
b(the)d Fd(pvfsd)p Fj(,)i(handles)g(interactions)h(with)0
1965 y(serv)o(ers.)i(A)22 b(more)i(ef)n(\002cient)g(in-k)o(ernel)i(v)o
(ersion)f(called)g Fd(kpvfsd)j Fj(w)o(as)23 b(later)h(pro)o(vided)i(as)
d(well.)0 2169 y(PVFS2)18 b(uses)i(a)g(similar)g(approach)i(to)e(the)g
(original)i(PVFS1)c(approach)k(for)e(access)h(through)h(the)e(OS.)e(A)h
(loadable)j(k)o(ernel)0 2282 y(module)d(e)o(xports)h(functions)h(out)e
(to)f(user)n(-space)j(where)e(a)f(UNIX)e(process,)21
b(the)e Fd(pvfs2-client)p Fj(,)j(handles)f(interactions)g(with)0
2395 y(serv)o(ers.)45 b(W)-7 b(e)28 b(ha)n(v)o(e)h(returned)i(to)e
(this)g(model)g(\(from)g(the)g(in-k)o(ernel)i(kpvfsd)f(model\))g
(because)g(it)f(is)f(not)h(clear)h(that)f(we)0 2508 y(will)23
b(ha)n(v)o(e)h(ready)h(access)g(to)e(all)h(netw)o(orking)i(APIs)c(from)
i(within)g(the)g(k)o(ernel.)0 2712 y(The)c(second)j(API)c(is)i(the)g
(MPI-IO)f(interf)o(ace.)30 b(W)-7 b(e)20 b(le)n(v)o(erage)i(the)f(R)l
(OMIO)f(MPI-IO)g(implementation)j(for)e(PVFS2)e(MPI-)0
2825 y(IO)29 b(support,)34 b(just)d(as)f(we)g(did)h(for)f(PVFS1.)47
b(R)l(OMIO)29 b(links)j(directly)g(to)e(a)g(lo)n(w-le)n(v)o(el)h(PVFS2)
d(API)h(for)i(access,)i(so)d(it)0 2938 y(a)n(v)n(oids)25
b(mo)o(ving)g(data)f(through)h(the)f(OS)e(and)i(does)g(not)g
(communicate)i(with)d(pvfs2-client.)0 3278 y Ff(2.4)99
b(Client-ser)o(v)o(er)26 b(interactions)0 3544 y Fj(At)g(start-up)j
(clients)g(contact)f(an)o(y)g(one)f(of)g(the)g(pvfs2-serv)o(ers)k(and)c
(obtain)i(con\002guration)h(information)f(about)g(the)e(\002le)0
3657 y(system.)i(Once)24 b(this)g(data)g(has)g(been)h(obtained,)g(the)f
(client)h(is)e(ready)i(to)e(operate)i(on)f(PVFS2)d(\002les.)0
3861 y(The)30 b(process)j(of)e(initiating)j(access)e(to)f(a)f(\002le)g
(on)h(PVFS2)e(is)i(similar)h(to)f(the)g(process)i(that)e(occurs)h(for)g
(NFS;)d(the)i(\002le)0 3974 y(name)26 b(is)f(resolv)o(ed)j(into)e(an)g
(opaque)h(reference,)h(or)e Fd(handle)p Fj(,)i(through)f(a)f(lookup)h
(operation.)38 b(Gi)n(v)o(en)25 b(a)g(handle)i(to)f(some)0
4087 y(\002le,)g(an)o(y)f(client)j(can)e(attempt)h(to)e(then)i(access)g
(an)o(y)f(re)o(gion)h(of)f(that)g(\002le)f(\(permission)k(checks)e
(could)g(f)o(ail\).)37 b(If)25 b(a)h(handle)0 4200 y(becomes)f(in)l(v)n
(alid,)g(the)f(serv)o(er)g(will)f(reply)i(at)e(the)h(time)f(of)h
(attempted)h(access)g(that)f(the)g(handle)h(is)e(no)h(longer)h(v)n
(alid.)0 4404 y(Handles)h(are)g(nothing)h(particularly)i(special.)35
b(W)-7 b(e)24 b(can)i(look)g(up)g(a)e(handle)j(on)e(one)h(process,)h
(pass)f(it)f(to)h(another)h(via)e(an)0 4517 y(MPI)e(message,)j(and)f
(use)g(it)g(at)f(the)h(ne)n(w)f(process)j(to)d(reference)j(the)e(same)g
(\002le.)31 b(This)25 b(gi)n(v)o(es)g(us)f(the)h(ability)i(to)d(mak)o
(e)h(the)0 4630 y Fg(MPI)p 170 4630 28 4 v 31 w(File)p
421 4630 V 31 w(open)c Fj(call)j(happen)h(with)f(a)f(single)i(lookup)g
(the)f(the)g(\002le)f(system)h(and)g(a)f(broadcast.)0
4834 y(There')-5 b(s)23 b(no)f(state)h(held)g(on)f(the)g(serv)o(ers)h
(about)h(\223open\224)f(\002les.)28 b(There')-5 b(s)23
b(not)f(e)n(v)o(en)h(a)e(concept)j(of)e(an)g(open)h(\002le)f(in)g
(PVFS2.)0 4947 y(So)j(this)i(lookup)h(is)e(all)g(that)h(happens)i(at)d
(open)h(time.)36 b(This)26 b(has)h(a)f(number)h(of)f(other)h
(bene\002ts.)38 b(F)o(or)25 b(one)i(thing,)h(there')-5
b(s)0 5060 y(no)25 b(shared)h(state)g(to)f(be)g(lost)g(if)g(a)f(client)
i(or)f(serv)o(er)g(disappears.)36 b(Also,)25 b(there')-5
b(s)26 b(nothing)h(to)e(do)g(when)g(a)f(\002le)g(is)h(\223closed\224)0
5173 y(either)l(,)i(e)o(xcept)g(perhaps)g(ask)f(the)g(serv)o(ers)h(to)e
(push)i(data)f(to)f(disk.)35 b(In)26 b(an)f(MPI)g(program)h(this)g(can)
g(be)g(done)g(by)g(a)f(single)0 5286 y(process)g(as)f(well.)1905
5619 y(10)p eop end
%%Page: 11 11
TeXDict begin 11 10 bop 0 211 a Fj(Of)25 b(course)i(if)f(you)g(are)g
(accessing)j(PVFS2)23 b(through)28 b(the)e(OS,)e Fg(open)g
Fj(and)i Fg(close)d Fj(still)j(e)o(xist)h(and)f(w)o(ork)g(the)g(w)o(ay)
g(you)0 324 y(w)o(ould)i(e)o(xpect,)h(as)e(does)i Fg(lseek)p
Fj(,)24 b(although)30 b(ob)o(viously)g(PVFS2)25 b(serv)o(ers)k(don')n
(t)g(k)o(eep)f(up)f(with)h(\002le)e(positions)k(either)-5
b(.)0 437 y(All)23 b(this)h(information)i(is)d(k)o(ept)i(locally)g(by)f
(the)f(client.)0 641 y(There)k(are)f(a)g(fe)n(w)g(disadv)n(antages)k
(to)d(this.)38 b(One)26 b(that)h(we)f(will)g(undoubtedly)k(hear)d
(about)h(more)e(than)h(once)h(is)e(that)h(the)0 754 y(UNIX)i(beha)n
(vior)k(of)e(unlink)o(ed)i(open)e(\002les.)50 b(Usually)32
b(with)e(local)i(\002le)e(systems)i(if)e(the)h(\002le)f(w)o(as)g(pre)n
(viously)k(opened,)0 867 y(then)d(it)g(can)f(still)i(be)e(accessed.)52
b(Certain)31 b(programs)h(rely)f(on)g(this)g(beha)n(vior)i(for)e
(correct)h(operation.)52 b(In)31 b(PVFS2)d(we)0 980 y(don')n(t)c(kno)n
(w)f(if)g(someone)h(has)g(the)f(\002le)f(open,)i(so)f(if)g(a)f(\002le)h
(is)f(unlink)o(ed,)k(it)c(is)h(gone)h(gone)g(gone.)29
b(Perhaps)24 b(we)e(will)h(come)0 1093 y(up)h(with)g(a)g(cle)n(v)o(er)h
(w)o(ay)f(to)g(support)i(this)e(or)g(adapt)i(the)e(NFS)e(approach)27
b(\(renaming)f(the)e(\002le)g(to)g(an)g(odd)h(name\),)f(b)n(ut)h(this)0
1206 y(is)e(a)g(v)o(ery)h(lo)n(w)f(priority)-6 b(.)0
1546 y Ff(2.5)99 b(Consistency)25 b(fr)n(om)h(the)f(client)h(point)f
(of)g(view)0 1812 y Fj(W)-7 b(e')i(v)o(e)19 b(discussed)j(in)c(a)h
(number)g(of)g(v)o(enues)h(the)f(opportunities)k(that)d(are)f(made)f(a)
n(v)n(ailable)k(when)c(true)i(POSIX)c(semantics)0 1925
y(are)j(gi)n(v)o(en)g(up.)27 b(T)m(ruthfully)20 b(v)o(ery)f(fe)n(w)e
(\002le)h(systems)h(actually)i(support)f(POSIX;)d(e)o(xt3)h(\002le)g
(systems)i(don')n(t)f(enforce)i(atomic)0 2038 y(writes)29
b(across)i(block)f(boundaries)i(without)e(special)g(\003ags,)g(and)g
(NFS)d(\002le)h(systems)i(don')n(t)g(e)n(v)o(en)g(come)f(close.)46
b(Ne)n(v)o(er)0 2151 y(the)30 b(less,)i(man)o(y)d(people)i(claim)f
(POSIX)e(semantics,)33 b(and)d(man)o(y)f(groups)j(ask)e(for)g(them)g
(without)g(kno)n(wing)h(the)f(costs)0 2264 y(associated.)0
2468 y(PVFS2)21 b(does)k(not)f(pro)o(vide)h(POSIX)c(semantics.)0
2672 y(PVFS2)37 b(does)i(pro)o(vide)h(guarantees)i(of)c(atomicity)i(of)
f(writes)g(to)g(nono)o(v)o(erlapping)j(re)o(gions,)i(e)n(v)o(en)39
b(noncontiguous)0 2785 y(nono)o(v)o(erlapping)f(re)o(gions.)62
b(This)34 b(is)f(to)h(say)h(that)f(if)g(your)h(parallel)h(application)h
(doesn')n(t)f(write)e(to)g(the)g(same)g(bytes,)0 2898
y(then)24 b(you)g(will)g(get)f(what)h(you)g(e)o(xpect)h(on)e
(subsequent)k(reads.)0 3102 y(This)c(is)f(enough)j(to)e(pro)o(vide)h
(all)f(the)g(non-atomic)i(mode)e(semantics)i(for)e(MPI-IO.)e(The)i
(atomic)g(mode)g(of)g(MPI-IO)f(will)0 3215 y(need)g(support)h(at)e(a)g
(higher)i(le)n(v)o(el.)28 b(This)21 b(will)g(probably)j(be)d(done)h
(with)f(enhancements)k(to)c(R)l(OMIO)f(rather)i(than)g(forcing)0
3328 y(more)j(complicated)i(infrastructure)i(into)d(the)f(\002le)f
(system.)34 b(There)25 b(are)g(good)h(reasons)h(to)e(do)g(this)g(at)g
(the)g(MPI-IO)f(layer)0 3441 y(rather)h(than)f(in)f(the)h(\002le)f
(system,)h(b)n(ut)g(that)g(is)g(outside)h(the)f(conte)o(xt)h(of)e(this)
h(document.)0 3645 y(Caching)h(of)f(the)g(directory)i(hierarchy)g(is)e
(permitted)h(in)f(PVFS2)e(for)i(a)g(con\002gurable)i(duration.)32
b(This)24 b(allo)n(ws)g(for)g(some)0 3758 y(optimizations)32
b(at)c(the)g(cost)h(of)f(windo)n(ws)h(of)f(time)g(during)i(which)f(the)
g(\002le)e(system)i(vie)n(w)f(might)h(look)g(dif)n(ferent)h(from)0
3871 y(one)e(node)g(than)g(from)f(another)-5 b(.)42 b(The)27
b(cache)h(time)f(v)n(alue)i(may)e(be)g(set)g(to)h(zero)g(to)f(a)n(v)n
(oid)i(this)e(beha)n(vior;)32 b(ho)n(we)n(v)o(er)l(,)d(we)0
3984 y(belie)n(v)o(e)c(that)f(users)g(will)f(not)h(\002nd)g(this)g
(necessary)-6 b(.)0 4324 y Ff(2.6)99 b(File)25 b(system)f(consistency)0
4590 y Fj(One)19 b(of)h(the)g(more)f(complicated)j(issues)f(in)f(b)n
(uilding)i(a)d(distrib)n(uted)k(\002le)c(system)h(of)g(an)o(y)f(kind)i
(is)e(maintaining)j(consistent)0 4703 y(\002le)c(system)i(state)f(in)g
(the)g(presence)i(of)e(concurrent)j(operations,)g(especially)f(ones)f
(that)f(modify)h(the)f(directory)i(hierarchy)-6 b(.)0
4907 y(T)m(raditionally)22 b(distrib)n(uted)g(\002le)c(systems)i(pro)o
(vide)g(a)f(locking)h(infrastructure)j(that)d(is)e(used)i(to)f
(guarantee)i(that)e(clients)i(can)0 5020 y(perform)27
b(certain)g(operations)h(atomically)-6 b(,)28 b(such)f(as)e(creating)j
(or)d(remo)o(ving)i(\002les.)35 b(Unfortunately)28 b(these)f(locking)h
(sys-)0 5133 y(tems)d(tend)h(to)f(add)h(additional)i(latenc)o(y)f(to)e
(the)h(system)g(and)g(are)f(often)h Fd(e)n(xtr)m(emely)h
Fj(complicated)h(due)e(to)f(optimizations)0 5246 y(and)f(the)g(need)g
(to)g(cleanly)h(handle)g(f)o(aults.)1905 5619 y(11)p
eop end
%%Page: 12 12
TeXDict begin 12 11 bop 0 211 a Fj(W)-7 b(e)27 b(ha)n(v)o(e)i(seen)g
(no)f(e)n(vidence)i(either)f(from)f(the)g(parallel)i(I/O)d(community)j
(or)e(the)g(distrib)n(uted)j(shared)f(memory)e(com-)0
324 y(munity)e(that)g(these)g(locking)h(systems)f(will)f(w)o(ork)g
(well)g(at)g(the)h(scales)g(of)f(clusters)i(that)f(we)e(are)i(seeing)g
(deplo)o(yed)i(no)n(w)-6 b(,)0 437 y(and)22 b(we)f(are)h(not)g(in)f
(the)h(b)n(usiness)i(of)e(pushing)h(the)f(en)l(v)o(elope)i(on)e
(locking)h(algorithms)h(and)e(implementations,)j(so)d(we')-5
b(re)0 550 y(not)24 b(using)h(a)e(locking)i(subsystem.)0
754 y(Instead)e(we)d(force)h(all)g(operations)j(that)e(modify)f(the)g
(\002le)g(system)g(hierarchy)i(to)e(be)g(performed)h(in)f(a)g(manner)g
(that)h(results)0 867 y(in)32 b(an)f(atomic)i(change)g(to)f(the)g
(\002le)f(system)h(vie)n(w)-6 b(.)53 b(Clients)32 b(perform)h
(sequences)i(of)c(steps)i(\(called)g Fd(server)g(r)m(equests)p
Fj(\))0 980 y(that)25 b(result)h(in)f(what)g(we)f(tend)i(to)e(think)i
(of)f(as)g(atomic)g(operations)j(at)d(the)g(\002le)f(system)i(le)n(v)o
(el.)32 b(An)25 b(e)o(xample)g(might)g(help)0 1093 y(clarify)g(this.)k
(Here)24 b(are)f(the)h(steps)h(necessary)h(to)d(create)i(a)e(ne)n(w)g
(\002le)g(in)g(PVFS2:)136 1372 y Fe(\017)46 b Fj(create)25
b(a)e(directory)j(entry)f(for)e(the)h(ne)n(w)f(\002le)136
1560 y Fe(\017)46 b Fj(create)25 b(a)e(metadata)i(object)g(for)f(the)f
(ne)n(w)g(\002le)136 1747 y Fe(\017)46 b Fj(point)25
b(the)f(directory)i(entry)e(to)g(the)f(metadata)i(object)136
1935 y Fe(\017)46 b Fj(create)25 b(a)e(set)h(of)f(data)h(objects)i(to)d
(hold)i(data)f(for)f(the)h(ne)n(w)f(\002le)136 2122 y
Fe(\017)46 b Fj(point)25 b(the)f(metadata)h(at)e(the)h(data)g(objects)0
2401 y(Performing)h(those)h(steps)f(in)f(that)h(particular)h(order)g
(results)f(in)f(\002le)g(system)h(states)g(where)g(a)e(directory)k
(entry)e(e)o(xists)g(for)0 2514 y(a)e(\002le)g(that)h(is)f(not)h
(really)h(ready)g(to)e(be)h(accessed.)31 b(If)23 b(we)g(carefully)i
(order)g(the)f(operations:)114 2793 y(1.)45 b(create)25
b(the)f(data)g(objects)h(to)f(hold)g(data)g(for)g(the)g(ne)n(w)f
(\002le)114 2981 y(2.)45 b(create)25 b(a)e(metadata)i(object)g(for)f
(the)f(ne)n(w)g(\002le)114 3169 y(3.)45 b(point)25 b(the)f(metadata)h
(at)e(the)h(data)g(objects)114 3356 y(4.)45 b(create)25
b(a)e(directory)j(entry)f(for)e(the)h(ne)n(w)f(\002le)g(pointing)j(to)d
(the)h(metadata)h(object)0 3635 y(we)d(create)h(a)f(sequence)j(of)d
(states)h(that)g(al)o(w)o(ays)h(lea)n(v)o(e)f(the)f(\002le)g(system)h
(directory)i(hierarchy)f(in)e(a)g(consistent)j(state.)30
b(The)0 3748 y(\002le)22 b(is)g(either)i(there)f(\(and)g(ready)h(to)e
(be)h(accessed\))i(or)d(it)g(isn')n(t.)30 b(All)22 b(PVFS2)e
(operations)25 b(are)e(performed)h(in)f(this)g(manner)-5
b(.)0 3952 y(This)20 b(approach)i(brings)g(with)e(it)g(a)g(certain)h
(de)o(gree)h(of)e(comple)o(xity)i(of)e(its)g(o)n(wn;)h(if)f(that)h
(process)h(were)e(to)g(f)o(ail)g(some)n(where)0 4065
y(in)k(the)g(middle,)h(or)f(if)g(the)g(directory)j(entry)e(turned)g
(out)g(to)f(already)h(e)o(xist)g(when)f(we)f(got)i(to)f(the)g(\002nal)g
(step,)h(there)g(w)o(ould)0 4178 y(be)f(a)f(great)h(deal)g(of)g
(cleanup)h(that)g(must)e(occur)-5 b(.)30 b(This)24 b(is)f(a)g(problem)i
(that)f(can)g(be)f(surmounted,)j(ho)n(we)n(v)o(er)l(,)e(and)g(because)0
4291 y(none)k(of)g(those)g(objects)h(are)f(referenced)i(by)d(an)o(yone)
i(else)f(we)f(can)g(clean)i(them)e(up)h(without)g(concern)h(for)f(what)
f(other)0 4404 y(processes)f(might)e(be)g(up)f(to)h(\226)f(the)o(y)h
(ne)n(v)o(er)g(made)f(it)h(into)g(the)g(directory)i(hierarchy)-6
b(.)1905 5619 y(12)p eop end
%%Page: 13 13
TeXDict begin 13 12 bop 0 211 a Fi(3)119 b(PVFS2)31 b(terminology)0
510 y Fj(PVFS2)19 b(is)i(based)h(on)g(a)e(some)n(what)i(uncon)l(v)o
(entional)k(design)d(in)e(order)h(to)f(achie)n(v)o(e)h(high)g
(performance,)i(scalability)-6 b(,)25 b(and)0 623 y(modularity)-6
b(.)46 b(As)27 b(a)h(result,)j(we)c(ha)n(v)o(e)i(introduced)i(some)e
(ne)n(w)f(concepts)i(and)f(terminology)i(to)d(aid)h(in)f(describing)k
(and)0 735 y(administering)27 b(the)d(system.)29 b(This)23
b(section)j(describes)g(the)d(most)h(important)h(of)f(these)g(concepts)
i(from)d(a)h(high)g(le)n(v)o(el.)0 1076 y Ff(3.1)99 b(File)25
b(system)f(components)0 1342 y Fj(W)-7 b(e)34 b(will)h(start)h(by)g
(de\002ning)g(the)f(major)h(system)g(components)i(from)d(an)g
(administrator)j(or)d(user')-5 b(s)37 b(perspecti)n(v)o(e.)66
b(A)0 1454 y(PVFS2)23 b(\002le)i(system)h(may)f(consist)i(of)f(the)f
(follo)n(wing)i(pieces)g(\(some)f(are)f(optional\):)36
b(the)26 b(pvfs2-serv)o(er)l(,)j(system)d(inter)n(-)0
1567 y(f)o(ace,)e(management)h(interf)o(ace,)h(Linux)e(k)o(ernel)h(dri)
n(v)o(er)l(,)f(pvfs2-client,)j(and)d(R)l(OMIO)e(PVFS2)f(de)n(vice.)0
1772 y(The)j Fg(pvfs2-server)17 b Fj(is)24 b(the)h(serv)o(er)g(daemon)g
(component)h(of)e(the)g(\002le)g(system.)31 b(It)24 b(runs)g
(completely)j(in)d(user)g(space.)0 1885 y(There)34 b(may)h(be)f(man)o
(y)g(instances)j(of)d(pvfs2-serv)o(er)j(running)g(on)d(man)o(y)g(dif)n
(ferent)i(machines.)63 b(Each)34 b(instance)i(may)0 1997
y(act)29 b(as)g(either)h(a)e(metadata)i(serv)o(er)l(,)i(an)d(I/O)f
(serv)o(er)l(,)j(or)e(both)g(at)g(once.)46 b(I/O)28 b(serv)o(ers)i
(store)g(the)f(actual)h(data)f(associated)0 2110 y(with)24
b(each)h(\002le,)f(typically)j(striped)f(across)g(multiple)g(serv)o
(ers)g(in)e(round-robin)k(f)o(ashion.)33 b(Metadata)26
b(serv)o(ers)g(store)f(meta)0 2223 y(information)34 b(about)e(\002les,)
h(such)f(as)g(permissions,)j(time)c(stamps,)j(and)e(distrib)n(ution)j
(parameters.)54 b(Metadata)33 b(serv)o(ers)0 2336 y(also)24
b(store)h(the)e(directory)j(hierarchy)-6 b(.)0 2540 y(Initial)35
b(PVFS2)c(releases)36 b(will)d(only)i(support)g(one)f(metadata)h(serv)o
(er)g(per)f(\002le)f(system,)j(b)n(ut)e(this)h(restriction)h(will)d(be)
0 2653 y(released)26 b(in)d(the)h(future.)0 2858 y(The)18
b Fg(system)52 b(interface)14 b Fj(is)19 b(the)g(lo)n(west)h(le)n(v)o
(el)f(user)g(space)h(API)e(that)h(pro)o(vides)i(access)g(to)d(the)i
(PVFS2)c(\002le)j(system.)0 2970 y(It)j(is)g(not)h(really)h(intended)h
(to)d(be)g(an)h(end)g(user)g(API;)e(application)26 b(de)n(v)o(elopers)f
(are)d(instead)i(encouraged)i(to)c(use)h(MPI-IO)0 3083
y(as)j(their)i(\002rst)e(choice,)i(or)e(standard)j(Unix)e(calls)g(for)f
(le)o(gac)o(y)h(applications.)41 b(W)-7 b(e)26 b(will)g(document)i(the)
f(system)g(interf)o(ace)0 3196 y(here,)20 b(ho)n(we)n(v)o(er)l(,)h
(because)g(it)e(is)g(the)g(b)n(uilding)j(block)e(for)f(all)h(other)g
(client)g(interf)o(aces)i(and)d(is)g(thus)h(referred)h(to)e(quite)h
(often.)0 3309 y(It)31 b(is)f(implemented)j(as)e(a)f(single)j(library)
-6 b(,)34 b(called)e(libpvfs2.)53 b(The)30 b(system)i(interf)o(ace)h
(API)d(does)i(not)f(map)f(directly)j(to)0 3422 y(POSIX)19
b(functions.)31 b(In)21 b(particular)l(,)k(it)c(is)h(a)f(stateless)j
(API)c(that)i(has)g(no)g(concept)h(of)f(open\(\),)h(close\(\),)g(or)e
(\002le)g(descriptors.)0 3535 y(This)i(API)g(does,)h(ho)n(we)n(v)o(er)l
(,)g(abstract)h(the)f(task)g(of)f(communicating)k(with)c(man)o(y)h
(serv)o(ers)g(concurrently)-6 b(.)0 3739 y(The)23 b Fg(management)50
b(interface)18 b Fj(is)23 b(similar)h(in)f(implementation)k(to)c(the)g
(system)h(interf)o(ace.)31 b(It)23 b(is)g(a)g(supplemental)0
3852 y(API)34 b(that)i(adds)g(functionality)j(that)d(is)f(normally)i
(not)f(e)o(xposed)h(to)e(an)o(y)h(\002le)f(system)h(users.)65
b(This)35 b(functionality)k(is)0 3965 y(intended)f(for)e(use)g(by)g
(administrators,)43 b(and)36 b(for)g(applications)j(such)e(as)f(fsck)g
(or)g(performance)j(monitoring)f(which)0 4078 y(require)25
b(lo)n(w)e(le)n(v)o(el)h(\002le)f(system)h(information.)0
4282 y(The)e Fg(Linux)52 b(kernel)g(driver)18 b Fj(is)k(a)g(module)h
(that)f(can)h(be)f(loaded)h(into)g(an)f(unmodi\002ed)h(Linux)g(k)o
(ernel)g(in)f(order)h(to)0 4395 y(pro)o(vide)g(VFS)c(support)24
b(for)d(PVFS2.)26 b(Currently)d(this)f(is)f(only)i(implemented)g(for)f
(the)f(2.6)h(series)g(of)g(k)o(ernels.)29 b(This)22 b(is)f(the)0
4508 y(component)30 b(that)e(allo)n(ws)g(standard)h(Unix)f
(applications)j(\(including)f(utilities)g(lik)o(e)e Fg(ls)e
Fj(and)i Fg(cp)p Fj(\))e(to)h(w)o(ork)h(on)g(PVFS2.)0
4621 y(The)23 b(k)o(ernel)i(dri)n(v)o(er)f(also)g(requires)i(the)e(use)
g(of)f(a)g(user)n(-space)k(helper)e(application)h(called)f
Fg(pvfs2-client)p Fj(.)0 4825 y Fg(pvfs2-client)30 b
Fj(is)37 b(a)f(user)n(-space)k(daemon)e(that)f(handles)i(communication)
g(between)f(PVFS2)d(serv)o(ers)j(and)f(the)0 4938 y(k)o(ernel)31
b(dri)n(v)o(er)-5 b(.)48 b(Its)30 b(primary)g(role)h(is)e(to)h(con)l(v)
o(ert)h(VFS)d(operations)33 b(into)d Fg(system)52 b(interface)24
b Fj(operations.)51 b(One)0 5051 y(pvfs2-client)27 b(must)d(be)f(run)h
(on)g(each)g(client)h(that)f(wishes)g(to)f(access)i(the)f(\002le)f
(system)h(through)i(the)e(VFS)d(interf)o(ace.)0 5255
y(The)33 b Fg(ROMIO)52 b(PVFS2)g(device)30 b Fj(is)k(a)e(component)k
(of)d(the)h(R)l(OMIO)e(MPI-IO)g(implementation)37 b(\(distrib)n(uted)g
(sep-)0 5368 y(arately\))c(that)g(pro)o(vides)g(MPI-IO)e(support)j(for)
d(PVFS2.)51 b(R)l(OMIO)31 b(is)g(included)j(by)e(def)o(ault)h(with)f
(the)g(MPICH)d(MPI)1905 5619 y(13)p eop end
%%Page: 14 14
TeXDict begin 14 13 bop 0 211 a Fj(implementation)35
b(and)e(includes)h(dri)n(v)o(ers)g(for)e(se)n(v)o(eral)i(\002le)d
(systems.)56 b(See)32 b(http://www)-6 b(.mcs.anl.go)o(v/romio/)36
b(for)d(de-)0 324 y(tails.)0 665 y Ff(3.2)99 b(PVFS2)25
b(Objects)0 930 y Fj(PVFS2)c(has)j(four)h(dif)n(ferent)g(object)g
(types)g(that)f(are)f(visible)j(to)d(users)136 1209 y
Fe(\017)46 b Fj(directory)136 1397 y Fe(\017)g Fj(meta\002le)136
1585 y Fe(\017)g Fj(data\002le)136 1772 y Fe(\017)g Fj(symbolic)25
b(link)0 2051 y(...)0 2392 y Ff(3.3)99 b(Handles)0 2657
y Fg(Handles)18 b Fj(are)k(unique,)i(opaque,)f(inte)o(ger)n(-lik)o(e)i
(identi\002ers)f(for)e(e)n(v)o(ery)g(object)i(stored)f(on)f(a)f(PVFS2)f
(\002le)h(system.)29 b(Ev)o(ery)0 2770 y(\002le,)21 b(directory)-6
b(,)24 b(and)e(symbolic)h(link)f(has)g(a)f(handle.)30
b(In)21 b(addition,)j(se)n(v)o(eral)f(underlying)h(objects)g(that)e
(cannot)h(be)e(directly)0 2883 y(manipulated)j(by)d(users)h(are)f
(represented)j(with)d(handles.)30 b(This)21 b(pro)o(vides)i(a)e
(concise,)i(non)e(path)h(dependent)i(mechanism)0 2996
y(for)36 b(specifying)j(what)d(object)h(to)f(operate)i(on)e(when)g
(clients)h(and)g(serv)o(ers)g(communicate.)68 b(Serv)o(ers)36
b(automatically)0 3109 y(generate)g(ne)n(w)c(handles)k(when)d(\002le)g
(system)h(objects)h(are)f(created;)40 b(the)34 b(user)g(does)g(not)g
(typically)i(manipulate)f(them)0 3222 y(directly)-6 b(.)0
3426 y(The)23 b(allo)n(w)o(able)i(range)g(of)e(v)n(alues)i(that)f
(handles)h(may)f(assume)g(is)f(kno)n(wn)h(as)g(the)g
Fg(handle)51 b(space)p Fj(.)0 3767 y Ff(3.4)99 b(Handle)25
b(ranges)0 4032 y Fj(Handles)h(are)f(essentially)j(v)o(ery)d(lar)n(ge)h
(inte)o(gers.)34 b(This)24 b(means)i(that)f(we)f(can)h(con)l(v)o
(eniently)k(partition)e(the)e(handle)h(space)0 4145 y(into)37
b(subsets)h(by)e(simply)i(specifying)h(ranges)f(of)e(handle)i(v)n
(alues.)68 b Fg(Handle)52 b(ranges)32 b Fj(are)37 b(just)g(that;)43
b(groups)38 b(of)0 4258 y(handles)25 b(that)g(are)e(described)j(by)e
(the)g(range)g(of)g(v)n(alues)h(that)f(the)o(y)g(may)f(include.)0
4462 y(In)g(order)h(to)f(partition)i(the)e(handle)h(space)g(among)g(N)e
(serv)o(ers,)i(we)e(di)n(vide)i(the)f(handle)h(space)g(up)f(into)h(N)e
(handle)i(ranges,)0 4575 y(and)h(dele)o(gate)h(control)h(of)d(each)i
(range)g(to)f(a)f(dif)n(ferent)j(serv)o(er)-5 b(.)33
b(The)24 b(\002le)g(system)i(con\002guration)i(\002les)c(pro)o(vide)i
(a)f(mech-)0 4688 y(anism)30 b(for)h(mapping)g(handle)h(ranges)f(to)f
(particular)j(serv)o(er)e(hosts.)49 b(Clients)31 b(only)g(interact)g
(with)f(handle)i(ranges;)j(the)0 4801 y(mapping)28 b(of)f(ranges)h(to)f
(serv)o(ers)h(is)f(hidden)h(beneath)h(an)e(abstraction)j(layer)-5
b(.)39 b(This)27 b(allo)n(ws)g(for)g(greater)h(\003e)o(xibility)h(and)0
4914 y(future)c(features)g(lik)o(e)f(transparent)j(migration.)1905
5619 y(14)p eop end
%%Page: 15 15
TeXDict begin 15 14 bop 0 211 a Ff(3.5)99 b(File)25 b(system)f(IDs)0
477 y Fj(Ev)o(ery)j(PVFS2)e(\002le)h(system)h(hosted)i(by)e(a)f
(particular)j(serv)o(er)f(has)f(a)g(unique)h(identi\002er)h(kno)n(wn)e
(as)g(a)f Fg(file)53 b(system)0 590 y(ID)28 b Fj(or)h
Fg(fs)54 b(id)p Fj(.)44 b(The)29 b(\002le)g(system)h(ID)e(must)i(be)f
(set)h(at)f(\002le)g(system)h(creation)h(time)e(by)h(administrati)n(v)o
(e)i(tools)e(so)g(that)0 703 y(the)o(y)24 b(are)g(synchronized)j
(across)e(all)f(serv)o(ers)h(for)e(a)h(gi)n(v)o(en)g(\002le)f(system.)
29 b(File)23 b(systems)i(also)f(ha)n(v)o(e)g(symbolic)i(names)e(that)0
816 y(can)g(be)f(resolv)o(ed)j(into)e(an)g(fs)f(id)g(by)h(serv)o(ers)h
(in)e(order)i(to)e(produce)j(more)d(readable)j(con\002guration)h
(\002les.)0 1020 y(File)c(system)h(IDs)f(are)h(also)g(occasionally)k
(referred)d(to)e(as)h(collection)i(IDs.)1905 5619 y(15)p
eop end
%%Page: 16 16
TeXDict begin 16 15 bop 0 211 a Fi(4)119 b(PVFS2)31 b(inter)n(nal)g
(I/O)f(API)g(terminology)0 510 y Fj(PVFS2)c(contains)k(se)n(v)o(eral)f
(lo)n(w)f(le)n(v)o(el)g(interf)o(aces)j(for)d(performing)i(v)n(arious)g
(types)f(of)f(I/O.)f(None)h(of)g(these)i(are)e(meant)0
623 y(to)d(be)g(accessed)j(by)d(end)h(users.)35 b(Ho)n(we)n(v)o(er)l(,)
25 b(the)o(y)g(are)h(perv)n(asi)n(v)o(e)h(enough)g(in)e(the)g(design)i
(that)f(it)f(is)g(helpful)i(to)e(describe)0 735 y(some)f(of)f(their)h
(common)g(characteristics)k(in)c(a)f(single)i(piece)f(of)g
(documentation.)0 1076 y Ff(4.1)99 b(Inter)o(nal)25 b(I/O)f(interfaces)
0 1342 y Fj(The)f(follo)n(wing)i(is)e(a)h(list)f(of)h(the)g(lo)n(west)g
(le)n(v)o(el)f(APIs)g(that)h(share)h(characteristics)i(that)d(we)f
(will)g(discuss)j(here.)136 1645 y Fe(\017)46 b Fj(BMI)23
b(\(Buf)n(fered)i(Message)f(Interf)o(ace\):)32 b(message)25
b(based)g(netw)o(ork)f(communications)136 1833 y Fe(\017)46
b Fj(T)m(ro)o(v)o(e:)29 b(local)24 b(\002le)f(and)h(database)i(access)
136 2021 y Fe(\017)46 b Fj(Flo)n(w:)g(high)34 b(le)n(v)o(el)f(I/O)f
(API)f(that)i(ties)g(together)i(lo)n(wer)d(le)n(v)o(el)h(components)i
(\(such)f(as)e(BMI)g(and)h(T)m(ro)o(v)o(e\))f(in)h(a)227
2134 y(single)25 b(transfer;)h(handles)f(b)n(uf)n(fering)h(and)e
(datatype)i(processing)136 2321 y Fe(\017)46 b Fj(De)n(v:)29
b(user)24 b(le)n(v)o(el)g(interaction)i(with)e(k)o(ernel)h(de)n(vice)g
(dri)n(v)o(er)136 2509 y Fe(\017)46 b Fj(NCA)l(C)26 b(\(Netw)o(ork)j
(Centric)f(Adapti)n(v)o(e)h(Cache\):)39 b(user)28 b(le)n(v)o(el)g(b)n
(uf)n(fer)h(cache)g(that)g(w)o(orks)f(on)g(top)g(of)g(T)m(ro)o(v)o(e)f
(\()p Fd(cur)n(-)227 2622 y(r)m(ently)e(unused)r Fj(\))136
2809 y Fe(\017)46 b Fj(Request)25 b(scheduler:)32 b(handles)25
b(concurrenc)o(y)i(and)d(scheduling)i(at)e(the)g(\002le)f(system)h
(request)h(le)n(v)o(el)0 3150 y Ff(4.2)99 b(J)o(ob)25
b(interface)0 3416 y Fj(The)k(Job)h(interf)o(ace)i(is)d(a)g(single)i
(API)d(that)i(binds)h(together)h(all)d(of)h(the)g(abo)o(v)o(e)g
(components.)49 b(This)29 b(pro)o(vides)j(a)d(single)0
3528 y(point)j(for)g(testing)h(for)e(completion)j(of)d(an)o(y)g
(nonblocking)k(operations)f(that)e(ha)n(v)o(e)g(been)g(submitted)h(to)e
(a)g(lo)n(wer)g(le)n(v)o(el)0 3641 y(API.)22 b(It)h(also)h(handles)i
(most)d(of)h(the)g(thread)h(management)g(where)f(applicable.)0
3982 y Ff(4.3)99 b(P)n(osting)25 b(and)g(testing)0 4247
y Fj(All)32 b(of)g(the)g(APIs)f(listed)i(in)g(this)f(document)i(are)e
(nonblocking.)59 b(The)31 b(model)i(used)g(in)f(all)g(cases)h(is)f(to)g
(\002rst)g Fg(post)e Fj(a)0 4360 y(desired)f(operation,)i(then)d
Fg(test)c Fj(until)29 b(the)e(operation)j(has)e(completed,)i(and)e
(\002nally)f(check)i(the)f(resulting)h(error)f(code)0
4473 y(to)c(determine)i(if)e(the)g(operation)j(w)o(as)d(successful.)33
b(Ev)o(ery)24 b Fg(post)e Fj(results)j(in)f(the)h(creation)h(of)e(a)g
(unique)h(ID)f(that)g(is)g(used)0 4586 y(as)g(an)h(input)h(to)e(the)h
Fg(test)d Fj(call.)32 b(This)24 b(is)g(the)h(mechanism)h(by)f(which)f
(particular)k(posts)d(are)g(matched)h(with)e(the)h(correct)0
4699 y(test.)0 4903 y(It)c(is)f(also)i(possible)h(for)e(certain)i
(operations)g(to)e(complete)i(immediately)f(at)f(post)h(time,)f
(therefore)i(eliminating)g(the)e(need)0 5016 y(to)i(test)g(later)h(if)e
(it)h(is)f(not)i(required.)30 b(This)23 b(condition)i(is)e(indicated)i
(by)e(the)g(return)i(code)e(of)g(the)g(post)h(call.)29
b(A)21 b(return)j(code)0 5129 y(of)g(0)g(indicates)i(that)f(the)g(post)
g(w)o(as)e(successful,)k(b)n(ut)e(that)g(the)f(caller)h(should)h(test)f
(for)f(completion.)33 b(A)23 b(return)i(code)g(of)g(1)0
5242 y(indicates)i(that)e(the)g(call)g(w)o(as)f(immediately)i
(successful,)i(and)d(that)g(no)g(test)g(is)f(needed.)34
b(Errors)25 b(are)f(indicated)j(by)e(either)0 5355 y(a)e(ne)o(gati)n(v)
o(e)h(return)h(code,)f(or)g(else)g(indicated)i(by)d(an)h(output)h(ar)n
(gument)h(that)e(is)f(speci\002c)h(to)g(that)g(API.)1905
5619 y(16)p eop end
%%Page: 17 17
TeXDict begin 17 16 bop 0 211 a Ff(4.4)99 b(T)-9 b(est)26
b(v)o(ariations)0 477 y Fj(In)21 b(a)f(parallel)j(\002le)d(system,)i
(it)f(is)g(not)g(uncommon)h(for)g(a)e(client)i(or)f(serv)o(er)h(to)f
(be)g(carrying)i(out)e(man)o(y)g(operations)j(at)d(once.)0
590 y(W)-7 b(e)20 b(can)g(impro)o(v)o(e)h(ef)n(\002cienc)o(y)h(in)e
(this)h(case)h(by)e(pro)o(viding)j(mechanisms)f(for)f(testing)h(for)f
(completion)i(of)d(more)g(than)i(one)0 703 y(operation)27
b(in)e(a)f(single)i(function)h(call.)32 b(Each)25 b(API)e(will)h
(support)j(the)e(follo)n(wing)h(v)n(ariants)g(of)f(the)g(test)g
(function)i(\(where)0 816 y(PREFIX)21 b(depends)26 b(on)d(the)h(API\):)
136 1079 y Fe(\017)46 b Fj(PREFIX)p 547 1079 28 4 v 31
w(test\(\):)41 b(This)29 b(is)g(the)g(most)g(simple)h(v)o(ersion)g(of)f
(the)g(test)h(function.)47 b(It)28 b(checks)j(for)e(completion)i(of)e
(an)227 1191 y(indi)n(vidual)d(operation)h(based)d(on)g(the)g(ID)e(gi)n
(v)o(en)i(by)g(the)g(caller)-5 b(.)136 1365 y Fe(\017)46
b Fj(PREFIX)p 547 1365 V 31 w(testsome\(\):)32 b(This)24
b(is)f(an)h(e)o(xpansion)i(of)e(the)g(abo)o(v)o(e)h(call.)30
b(The)23 b(dif)n(ference)j(is)e(that)g(it)g(tak)o(es)h(an)f(array)g(of)
227 1478 y(IDs)j(and)h(a)e(count)j(as)e(input,)i(and)e(pro)o(vides)i
(an)e(array)i(of)e(status)h(v)n(alues)g(and)g(a)f(count)h(as)f(output.)
41 b(It)27 b(checks)i(for)227 1591 y(completion)h(of)d(an)o(y)g
(non-zero)i(ID)e(in)g(the)g(array)-6 b(.)41 b(The)27
b(output)h(count)h(indicates)g(ho)n(w)e(man)o(y)g(of)g(the)g
(operations)227 1704 y(in)d(question)i(completed,)f(which)f(may)f
(range)i(from)e(0)g(to)h(the)f(input)i(count.)136 1878
y Fe(\017)46 b Fj(PREFIX)p 547 1878 V 31 w(testconte)o(xt\(\):)d(This)
29 b(function)i(is)e(similar)g(to)g(testsome\(\).)46
b(Ho)n(we)n(v)o(er)l(,)30 b(it)e(does)i(not)f(tak)o(e)h(an)f(array)g
(of)227 1991 y(IDs)34 b(as)h(input.)64 b(Instead,)39
b(it)34 b(tests)i(for)f(completion)i(of)d Fd(any)i Fj(operations)h
(that)e(ha)n(v)o(e)h(pre)n(viously)h(been)f(posted,)227
2104 y(re)o(gardless)g(of)d(the)h(ID.)e(A)g(count)j(ar)n(gument)g
(limits)f(ho)n(w)f(man)o(y)g(results)i(may)e(be)g(returned)j(to)d(the)h
(caller)-5 b(.)59 b(A)227 2217 y(conte)o(xt)35 b(\(discussed)i(in)c
(the)h(follo)n(wing)h(subsection\))i(can)c(be)h(used)g(to)g(limit)f
(the)h(scope)h(of)e(IDs)g(that)h(may)f(be)227 2330 y(accessed)26
b(through)g(this)e(function.)0 2664 y Ff(4.5)99 b(Contexts)0
2929 y Fj(Before)31 b(posting)h(an)o(y)f(operations)i(to)d(a)g
(particular)j(interf)o(ace,)h(the)c(caller)i(must)e(\002rst)g(open)h(a)
f Fg(context)d Fj(for)j(that)h(in-)0 3042 y(terf)o(ace.)53
b(This)31 b(is)g(a)g(mechanism)i(by)e(which)h(an)f(interf)o(ace)i(can)f
(dif)n(ferentiate)i(between)f(tw)o(o)e(dif)n(ferent)i(callers)f(\(ie,)h
(if)0 3155 y(operations)c(are)d(being)i(posted)g(by)e(more)g(than)h
(one)g(thread)g(or)f(more)h(than)g(one)f(higher)i(le)n(v)o(el)e
(component\).)39 b(This)26 b(con-)0 3268 y(te)o(xt)g(is)g(then)h(used)g
(as)f(an)g(input)i(ar)n(gument)g(to)e(e)n(v)o(ery)g(subsequent)k(post)d
(and)f(test)h(call.)37 b(In)26 b(particular)l(,)j(it)d(is)g(v)o(ery)h
(useful)0 3381 y(for)22 b(the)f(testconte)o(xt\(\))k(functions,)f(to)d
(insure)i(that)f(it)f(does)h(not)f(return)i(information)h(about)e
(operations)j(that)c(were)h(posted)0 3494 y(by)i(a)f(dif)n(ferent)i
(caller)-5 b(.)0 3828 y Ff(4.6)99 b(User)25 b(pointers)0
4093 y Fg(User)53 b(pointers)20 b Fj(are)26 b(v)n(oid*)g(v)n(alues)h
(that)e(are)h(passed)g(into)g(an)f(interf)o(ace)j(at)d(post)h(time)f
(and)g(returned)j(to)d(the)g(caller)0 4206 y(at)30 b(completion)j(time)
d(through)i(one)f(of)f(the)g(test)h(functions.)52 b(These)30
b(pointers)j(are)d(ne)n(v)o(er)h(stored)g(or)g(transmitted)h(o)o(v)o
(er)0 4319 y(the)25 b(netw)o(ork;)j(the)o(y)d(are)g(intended)j(for)d
(local)h(use)f(by)h(the)f(interf)o(ace)i(caller)-5 b(.)35
b(The)o(y)24 b(may)h(be)g(used)h(for)g(an)o(y)f(purpose.)35
b(F)o(or)0 4432 y(e)o(xample,)h(it)c(may)h(be)f(set)h(to)g(point)h(at)e
(a)g(data)i(structure)h(that)e(tracks)h(the)f(state)h(of)e(the)h
(system.)57 b(When)33 b(the)g(pointer)0 4545 y(is)i(returned)i(at)e
(completion)i(time,)g(the)f(caller)g(can)f(then)h(map)e(back)i(to)f
(this)h(data)f(structure)i(immediately)g(without)0 4658
y(searching)26 b(because)g(it)d(has)h(a)f(direct)i(pointer)-5
b(.)0 4991 y Ff(4.7)99 b(T)n(ime)26 b(outs)f(and)g(max)g(idle)g(time)0
5257 y Fj(The)j(job)g(interf)o(ace)j(allo)n(ws)e(the)f(caller)i(to)e
(specify)i(a)e(time)g(out)g(with)g(all)h(test)g(functions.)45
b(This)28 b(determines)j(ho)n(w)c(long)0 5370 y(the)d(test)g(function)i
(is)d(allo)n(wed)h(to)g(block)g(before)h(returning)h(if)e(no)f
(operations)k(of)c(interest)i(ha)n(v)o(e)g(completed.)1905
5619 y(17)p eop end
%%Page: 18 18
TeXDict begin 18 17 bop 0 211 a Fj(The)27 b(lo)n(wer)g(le)n(v)o(el)h
(APIs)e(follo)n(w)h(dif)n(ferent)j(semantics.)41 b(Rather)28
b(than)g(a)f(time)g(out,)i(the)o(y)e(allo)n(w)g(the)h(caller)g(to)g
(specify)h(a)0 324 y Fg(max)53 b(idle)g(time)p Fj(.)35
b(The)26 b(max)g(idle)h(time)f(go)o(v)o(erns)i(ho)n(w)e(long)h(the)g
(API)e(is)i(allo)n(wed)g(to)f(sleep)i(if)e(it)g(is)g(idle)h(when)g(the)
0 437 y(test)i(call)h(is)e(made.)45 b(It)29 b(is)f(under)i(no)f
(obligation)j(to)c(actually)j(consume)f(the)g(full)f(idle)g(time.)45
b(It)28 b(is)h(more)g(lik)o(e)g(a)g(hint)g(to)0 550 y(control)c
(whether)g(the)f(function)h(is)f(a)f(b)n(usy)h(poll,)g(or)g(if)f(it)g
(should)j(sleep)e(when)g(there)g(is)g(no)f(w)o(ork)h(to)f(do.)1905
5619 y(18)p eop end
%%Page: 19 19
TeXDict begin 19 18 bop 0 211 a Fi(5)119 b(PVFS2)31 b(User)f(APIs)f
(and)i(Semantics)0 510 y Fj(Because)h(PVFS2)d(is)i(designed)i
(speci\002cally)g(for)f(performance)h(in)e(systems)h(where)f
(concurrent)j(access)e(from)f(man)o(y)0 623 y(processes)36
b(is)d(commonplace,)k(there)d(are)f(some)g(dif)n(ferences)j(between)e
(the)g(PVFS2)d(interf)o(aces)k(and)f(traditional)i(\002le)0
735 y(system)28 b(interf)o(aces.)44 b(In)27 b(this)i(section)g(we)e
(will)g(discuss)j(the)d(tw)o(o)h(interf)o(aces)i(pro)o(vided)g(for)d
(applications)32 b(to)27 b(use)h(when)0 848 y(accessing)j(PVFS2)26
b(\002le)h(systems.)44 b(W)-7 b(e)28 b(will)f(start)i(with)f(the)h
(traditional)i(UNIX)26 b(I/O)i(interf)o(ace,)j(which)e(nearly)h(all)e
(\002le)0 961 y(systems)d(implement.)k(W)-7 b(e)23 b(will)g(then)i(co)o
(v)o(er)e(the)h(MPI-IO)f(interf)o(ace.)0 1302 y Ff(5.1)99
b(UNIX)25 b(I/O)e(Interface)0 1567 y Fj(W)-7 b(e)22 b(pro)o(vide)i(an)e
(implementation)k(of)c(the)h(UNIX)e(I/O)h(interf)o(ace)j(for)e(clients)
h(running)h(Linux)e(v)o(ersions)h(2.4)e(\(2.4.19)i(and)0
1680 y(later\))f(and)f(2.6.)28 b(This)22 b(interf)o(ace)i(implements)f
(the)f(traditional)j Fg(open)p Fj(,)19 b Fg(read)p Fj(,)g
Fg(write)p Fj(,)g(and)j Fg(close)d Fj(interf)o(ace)24
b(as)d(well)0 1793 y(as)i(pro)o(viding)j(the)e(directory)i(operations)h
(necessary)f(for)d(applications)k(such)e(as)e Fg(ls)f
Fj(to)i(w)o(ork.)0 1997 y(It)e(is)g(important)j(to)d(note)h(that)g
(there)g(is)g(a)f(dif)n(ference)i(between)g(implementing)h(the)d(UNIX)f
(I/O)h(API)f(and)i(implementing)0 2110 y(the)29 b(POSIX)d(semantics)k
(for)e(this)h(API.)d(File)i(systems)i(e)o(xported)g(via)e(NFS)f(\(v)o
(ersions)j(2)e(and)h(3\))f(do)g(not)h(e)o(xhibit)g(man)o(y)0
2223 y(of)e(the)g(POSIX)e(semantics,)30 b(and)d(e)n(v)o(en)g(local)h
(\002le)f(systems)h(may)f(not)g(guarantee)j(atomicity)e(of)f(writes)h
(that)f(cross)h(disk)0 2336 y(block)f(boundaries.)37
b(W)-7 b(e)25 b(also)h(do)f(not)h(implement)h(the)f(full)f(POSIX)f
(semantics.)36 b(Here)25 b(we)g(will)g(document)i(aspects)g(of)0
2449 y(the)d(POSIX)d(semantics)k(that)g(we)d(do)i(not)g(implement.)0
2786 y Fh(5.1.1)92 b(P)n(ermission)24 b(Checking)0 3052
y Fj(T)-7 b(o)26 b(understand)31 b(why)c(PVFS2)f(permission)j(checking)
h(beha)n(v)o(es)g(dif)n(ferently)g(from)d(the)h(POSIX)e(standard,)k(it)
d(is)h(useful)0 3165 y(to)33 b(discuss)h(ho)n(w)f(PVFS2)d(performs)35
b(permission)g(checking.)59 b(PVFS2)30 b(does)k(not)f(really)h
(implement)g(the)f Fg(open)d Fj(etc.)0 3278 y(interf)o(ace,)f(b)n(ut)d
(instead)i(uses)e(a)g(stateless)i(approach)g(that)f(relies)g(on)f(the)g
(client)h(to)f Fg(lookup)c Fj(a)k(\002le)f(name)h(to)g(con)l(v)o(ert)h
(it)0 3391 y(into)h(a)f Fd(handle)i Fj(that)f(can)g(be)g(used)g(for)g
(subsequent)j(read)d(and)g(write)f(accesses.)43 b(This)27
b(handle)j(may)d(be)g(used)i(for)e(man)o(y)0 3504 y(read)e(and)f(write)
g(accesses)i(and)f(may)f(be)g(cached)h(under)h(certain)f(guidelines.)33
b(This)24 b(lookup)i(operation)h(is)c(performed)j(at)0
3616 y(\002le)d(open)h(time.)0 3821 y(Permission)29 b(checking)h(is)e
(performed)h(in)f(tw)o(o)g(places.)42 b(First,)29 b(the)f(VFS)e(checks)
j(permissions)h(on)e(the)g(client)h(and)g(will)0 3934
y(pre)n(v)o(ent)38 b(users)f(from)f(performing)j(in)l(v)n(alid)f
(operations.)71 b(Second,)40 b(the)d(serv)o(er)g(performs)h
(rudimentary)h(checks)f(for)0 4046 y(speci\002c)20 b(operations;)k(ho)n
(we)n(v)o(er)l(,)c(it)f(\(currently\))j(relies)f(on)e(the)g(client)i
(to)e(pro)o(vide)i(accurate)g(user)f(and)f(group)i(information)0
4159 y(to)31 b(be)g(used)h(for)f(this)h(purpose.)53 b(No)31
b(recursi)n(v)o(e)h(directory)i(permission)f(checking)h(is)d(performed)
h(by)g(the)f(serv)o(ers,)j(for)0 4272 y(e)o(xample.)0
4609 y Fh(5.1.2)92 b(P)n(ermissions)24 b(and)f(File)g(Access)0
4875 y Fj(POSIX)c(semantics)j(dictate)h(that)e(once)h(a)e(\002le)g(has)
h(been)h(opened)h(it)d(may)h(continue)i(to)e(be)g(accessed)i(by)e(the)g
(process)h(until)0 4988 y(closed,)j(re)o(gardless)g(of)f(changes)h(to)f
(permissions.)0 5192 y(In)29 b(PVFS2,)f(the)h(ef)n(fect)h(of)f
(permission)i(changes)g(on)e(a)g(\002le)f(may)h(or)g(may)f(not)i(be)f
(immediately)h(apparent)i(to)c(a)h(client)0 5305 y(holding)d(an)e(open)
i(\002le)d(descriptor)-5 b(.)34 b(Because)25 b(of)f(the)g(manner)h(in)g
(which)f(PVFS2)e(performs)k(permission)g(checking)h(and)1905
5619 y(19)p eop end
%%Page: 20 20
TeXDict begin 20 19 bop 0 211 a Fj(\002le)25 b(lookup,)k(it)c(is)h
(possible)j(that)d(a)g(client)h(may)f(lose)h(the)f(ability)i(to)e
(access)h(a)f(\002le)f(that)i(it)f(has)g(pre)n(viously)j(opened)f(due)0
324 y(to)23 b(permission)j(change,)f(if)e(for)h(e)o(xample)g(the)g
(cached)h(handle)g(is)f(lost)g(and)g(a)f(lookup)i(is)f(performed)h
(again.)0 661 y Fh(5.1.3)92 b(Access)24 b(to)f(Remo)o(v)o(ed)h(Files)0
927 y Fj(POSIX)h(semantics)k(dictate)g(that)f(a)f(\002le)g(opened)i(by)
e(a)g(process)i(may)e(continue)j(to)d(be)h(accessed)h(until)f(the)g
(subsequent)0 1040 y(close,)34 b(e)n(v)o(en)d(if)g(the)g(\002le)f
(permissions)k(are)d(changed)i(or)e(the)g(\002le)g(is)g(deleted.)52
b(This)31 b(requires)i(that)f(the)f(\002le)g(system)g(or)0
1153 y(clients)25 b(someho)n(w)e(k)o(eep)h(up)f(with)g(a)g(list)g(of)g
(\002les)g(that)h(are)f(open,)h(which)f(adds)h(unacceptable)j(state)d
(to)f(a)f(distrib)n(uted)27 b(\002le)0 1266 y(system.)35
b(In)25 b(NFS,)e(for)i(e)o(xample,)h(this)g(is)f(implemented)j(via)d
(the)h(\223sillyrename\224)i(approach,)g(in)d(which)h(clients)g(rename)
0 1379 y(a)j(deleted)j(b)n(ut)e(open)h(\002le)e(to)h(hide)h(it)f(in)f
(the)h(directory)j(tree,)e(then)g(delete)g(the)f(renamed)h(\002le)f
(when)g(the)g(\002le)f(is)h(\002nally)0 1492 y(closed.)0
1696 y(In)35 b(PVFS2)e(a)h(\002le)g(that)i(is)e(deleted)j(is)e(remo)o
(v)o(ed)g(immediately)i(re)o(gardless)f(of)f(open)h(\002le)e
(descriptors.)66 b(Subsequent)0 1809 y(attempts)25 b(to)e(access)i(the)
f(\002le)f(will)g(\002nd)g(that)h(the)g(\002le)f(no)h(longer)h(e)o
(xists.)23 2013 y Fd(Neill:)k(Is)23 b(this)h(completely)i(true)o(,)e
(or)g(do)f(clients)i(delay)g(r)m(emo)o(val)f(in)g(pvfs2-client)j(if)c
(someone)i(is)e(still)h(accessing?)0 2350 y Fh(5.1.4)92
b(Ov)o(erlapping)24 b(I/O)f(Operations)0 2616 y Fj(POSIX)h(semantics)k
(dictate)g(sequential)h(consistenc)o(y)h(for)c(o)o(v)o(erlapping)j(I/O)
d(operations.)40 b(This)27 b(means)f(that)h(I/O)f(oper)n(-)0
2729 y(ations)i(must)f(be)g(atomic)h(with)f(respect)h(to)f(each)h
(other)g(\226)e(if)h(one)g(process)i(performs)g(a)d(read)i(spanning)h
(a)e(collection)i(of)0 2842 y(serv)o(ers)21 b(while)f(another)h
(performs)g(a)f(write)f(in)h(the)g(same)g(re)o(gion,)h(the)f(read)g
(must)g(see)g(either)h(all)f(or)f(none)i(of)e(the)h(changes.)0
2954 y(In)i(a)f(parallel)j(\002le)d(system)i(this)f(in)l(v)n(olv)o(es)i
(communication)h(to)d(coordinate)j(access)e(in)f(this)g(manner)l(,)h
(and)f(because)i(of)e(the)0 3067 y(number)29 b(of)f(clients)h(we)e
(wish)h(to)g(support,)i(we)e(are)g(unwilling)h(to)f(implement)h(this)g
(functionality)i(\(at)d(least)h(as)f(part)g(of)0 3180
y(the)c(core)g(\002le)f(system\).)0 3385 y(In)d(PVFS2)e(we)h(instead)j
(implement)f(a)f(semantic)h(we)f(call)g Fd(noncon\003icting)25
b(writes)20 b Fj(semantic.)29 b(This)20 b(semantic)h(states)h(that)0
3497 y(all)h(I/O)g(operations)j(that)d(do)g(not)h(access)g(the)g(same)f
(bytes)h(\(in)f(other)h(w)o(ords,)g(are)f(noncon\003icting\))k(will)c
(be)g(sequentially)0 3610 y(consistent.)31 b(Write)24
b(operations)i(that)e(con\003ict)g(will)f(result)h(in)f(some)h
(unde\002ned)h(combination)h(of)d(the)g(bytes)i(being)f(writ-)0
3723 y(ten)d(to)f(storage,)j(while)e(read)g(operations)i(that)f
(con\003ict)f(with)f(write)h(operations)i(will)e(see)f(some)h
(unde\002ned)h(combination)0 3836 y(of)h(original)j(data)e(and)g(write)
g(data.)0 4173 y Fh(5.1.5)92 b(Locks)0 4439 y Fj(BSD)24
b(pro)o(vides)29 b(the)d Fg(flock)e Fj(mechanism)j(for)g(locking)h
(\002le)e(re)o(gions)i(as)e(a)g(w)o(ay)g(to)g(perform)i(atomic)f
(modi\002cations)h(to)0 4552 y(\002les.)g(POSIX)20 b(pro)o(vides)25
b(this)e(functionality)j(through)f(options)f(to)f Fg(fcntl)p
Fj(.)i(Both)e(of)f(these)i(are)e(advisory)j(locks,)f(which)0
4665 y(means)g(that)g(processes)i(not)e(using)h(the)f(locks)g(can)g
(access)h(the)f(\002le)f(re)o(gions.)0 4869 y(PVFS2)c(does)k(not)e
(implement)i(a)e(locking)i(infrastructure)i(as)d(part)f(of)h(the)f
(\002le)g(system.)29 b(At)20 b(this)i(time)g(there)g(is)f(no)h(add-on)0
4982 y(advisory)33 b(locking)g(component)g(either)-5
b(.)53 b(Thus)31 b(neither)h(the)g Fg(flock)c Fj(function)33
b(nor)e(the)h Fg(fcntl)c Fj(advisory)33 b(locks)f(are)0
5095 y(supported)26 b(by)e(PVFS2.)1905 5619 y(20)p eop
end
%%Page: 21 21
TeXDict begin 21 20 bop 0 211 a Ff(5.2)99 b(MPI-IO)24
b(Interface)0 477 y Fj(W)-7 b(e)25 b(pro)o(vide)j(an)e(implementation)j
(of)d(the)h(MPI-IO)e(interf)o(ace)j(via)f(an)f(implementation)j(of)d
(the)h(R)l(OMIO)d(ADIO)h(inter)n(-)0 590 y(f)o(ace.)52
b(This)31 b(implementation)j(is)d(included)i(as)e(part)g(of)g(MPICH1)f
(and)h(MPICH2)f(as)h(well)g(as)g(being)h(a)n(v)n(ailable)h(as)e(an)0
703 y(independent)26 b(package.)31 b(The)22 b(MPI-IO)g(interf)o(ace)j
(is)e(part)g(of)g(the)g(MPI-2)f(standard)j(and)e(de\002nes)h(an)e(API)g
(for)h(\002le)f(access)0 816 y(from)h(within)i(MPI)d(programs.)0
1020 y(Our)d(PVFS2)e(implementation)22 b(does)f(not)e(include)j(all)d
(the)h(functionality)j(of)c(the)h(MPI-IO)e(speci\002cation.)30
b(In)20 b(this)f(section)0 1133 y(we)k(discuss)i(the)f(missing)h
(components)h(of)d(MPI-IO)g(for)g(PVFS2.)0 1470 y Fh(5.2.1)92
b(MPI-IO)23 b(Atomic)g(Mode)0 1736 y Fj(Atomic)e(mode)h(is)f(enabled)i
(by)e(calling)i Fg(MPI)p 1449 1736 28 4 v 32 w(File)p
1701 1736 V 31 w(set)p 1897 1736 V 31 w(atomicity)16
b Fj(and)22 b(setting)h(the)f(atomicity)h(to)e(true.)28
b(Atomic)0 1848 y(mode)21 b(guarantees)j(that)e(data)g(written)g(on)f
(one)g(process)i(is)e(immediately)i(visible)g(to)e(another)i(process)g
(\(as)e(in)g(the)g(POSIX)0 1961 y(def)o(ault)k(semantics\).)0
2166 y(R)l(OMIO)20 b(currently)25 b(uses)d(\002le)f(locking)j(to)e
(implement)h(the)f(MPI-IO)f(atomic)h(mode)g(functionality)-6
b(.)32 b(Because)23 b(we)e(do)h(not)0 2279 y(support)j(locks)g(in)f
(PVFS2,)d(atomic)j(mode)g(is)f(not)h(currently)i(supported.)0
2616 y Fh(5.2.2)92 b(MPI-IO)23 b(Shar)n(ed)f(P)n(ointer)i(Mode)0
2881 y Fj(Shared)g(pointers)i(are)e(used)g(in)f(the)p
1147 2881 V 57 w Fg(shared)d Fj(and)p 1683 2881 V 57
w Fg(ordered)f Fj(f)o(amilies)25 b(of)e(functions.)0
3086 y(The)h(R)l(OMIO)e(implementation)27 b(relies)e(on)f(the)g(use)h
(of)f(locking)h(support)h(from)e(the)g(\002le)g(system)h(to)e
(implement)i(both)g(of)0 3198 y(these)i(f)o(amilies)f(of)g(functions,)i
(so)e(these)h(are)e(not)h(currently)i(supported.)38 b(W)-7
b(e)25 b(are)g(researching)k(alternati)n(v)o(e)f(implemen-)0
3311 y(tations.)1905 5619 y(21)p eop end
%%Page: 22 22
TeXDict begin 22 21 bop 0 211 a Fi(6)119 b(The)31 b(code)f(tr)n(ee)0
510 y Fj(In)e(this)h(section)h(we)e(describe)i(ho)n(w)e(the)h(code)g
(tree)g(is)f(set)g(up)h(for)f(PVFS2)f(and)i(discuss)h(a)e(little)h
(about)g(ho)n(w)f(the)h(b)n(uild)0 623 y(system)24 b(w)o(orks.)0
959 y Ff(6.1)99 b(The)26 b(top)f(le)o(v)o(el)0 1224 y
Fj(At)e(the)g(top)h(le)n(v)o(el)g(we)f(see:)136 1481
y Fe(\017)46 b Fg(doc)136 1660 y Fe(\017)g Fg(examples)136
1839 y Fe(\017)g Fg(include)136 2018 y Fe(\017)g Fg(lib)136
2197 y Fe(\017)g Fg(maint)136 2375 y Fe(\017)g Fg(src)136
2554 y Fe(\017)g Fg(test)0 2811 y Fj(The)25 b Fg(doc)d
Fj(directory)28 b(rather)e(ob)o(viously)h(holds)g(documentation,)h
(mostly)e(written)g(in)f(LaT)-6 b(eX.)23 b(There)i(are)g(a)g(fe)n(w)f
(subdi-)0 2924 y(rectories)j(under)g Fg(doc)p Fj(.)32
b(The)25 b Fg(coding)c Fj(subdirectory)29 b(has)d(a)f(document)i
(describing)h(guidelines)g(for)e(writing)g(code)g(for)0
3037 y(the)j(project.)47 b(The)29 b Fg(design)c Fj(subdirectory)33
b(has)c(a)g(number)h(of)f(documents)i(describing)h(v)n(arious)e
(components)i(of)d(the)0 3150 y(system)24 b(and)g(APIs)f(and)h(more)f
(importantly)j(currently)g(houses)f(the)f(Quick)g(Start.)0
3354 y(Much)g(of)f(the)h(documentation)j(is)d(out)f(of)h(date.)0
3558 y Fg(examples)19 b Fj(currently)26 b(holds)f(tw)o(o)e(e)o(xample)h
(serv)o(er)h(con\002guration)h(\002les)e(and)g(that)g(is)f(it.)0
3763 y Fg(include)15 b Fj(holds)21 b(include)g(\002les)e(that)h(are)f
(both)i(used)f(all)f(o)o(v)o(er)g(the)h(system)g(and)g(are)f(e)n(v)o
(entually)j(installed)f(on)f(the)f(system)0 3876 y(during)25
b(a)d Fg(make)53 b(install)p Fj(.)25 b(An)o(y)d(prototypes)27
b(or)c(de\002nes)h(that)f(are)h(needed)h(by)e(clients)i(using)f(the)f
(API)f(should)j(be)e(in)0 3989 y(one)h(of)f(the)h(include)i(\002les)d
(in)g(this)h(directory)-6 b(.)0 4193 y Fg(lib)20 b Fj(is)j(empty)-6
b(.)28 b(It)23 b(holds)g Fg(libpvfs2.a)17 b Fj(when)23
b(it)f(is)h(b)n(uilt,)g(prior)g(to)g(installation,)i(if)e(you)g(are)f
(b)n(uilding)j(in-tree.)30 b(More)0 4306 y(on)24 b(out-of-tree)i(b)n
(uilds)f(later)-5 b(.)0 4510 y Fg(maint)29 b Fj(holds)k(a)e(collection)
k(of)d(scripts.)55 b(Some)31 b(of)h(these)h(are)f(used)h(in)f(the)g(b)n
(uild)h(process,)j(while)c(others)h(are)f(used)0 4623
y(to)e(check)h(for)f(the)g(presence)j(of)c(inappropriately)35
b(named)c(symbols)g(in)f(the)g(resulting)i(library)g(or)e(reformat)h
(code)g(that)0 4736 y(doesn')n(t)26 b(conform)e(to)g(the)g(coding)h
(standard.)0 4940 y Fg(src)c Fj(holds)k(the)f(source)h(code)g(to)e(the)
h(majority)h(of)e(PVFS2,)f(including)k(the)e(serv)o(er)l(,)g(client)h
(library)-6 b(,)25 b(Linux)f(2.6.x)g(k)o(ernel)0 5053
y(module,)g(and)g(management)h(tools.)30 b(W)-7 b(e')o(ll)24
b(talk)g(more)f(about)i(this)f(one)g(in)g(a)f(subsequent)j(subsection.)
0 5257 y Fg(test)34 b Fj(holds)j(the)g(source)h(code)f(to)f(man)o(y)g
(man)o(y)g(tests)h(that)g(ha)n(v)o(e)g(been)g(b)n(uilt)h(o)o(v)o(er)e
(time)g(to)h(v)n(alidate)h(the)e(PVFS2)0 5370 y(implementation.)c(W)-7
b(e)22 b(will)h(discuss)j(this)e(more)f(in)h(a)f(subsequent)k
(subsection)f(as)e(well.)1905 5619 y(22)p eop end
%%Page: 23 23
TeXDict begin 23 22 bop 0 211 a Ff(6.2)99 b Fa(src)0
477 y Fj(The)23 b Fg(src)e Fj(directory)26 b(contains)g(the)e(majority)
h(of)e(the)h(PVFS2)d(distrib)n(ution.)0 681 y(Unlik)o(e)k(PVFS1,)d
(where)j(the)g(PVFS)d(k)o(ernel)j(code)h(w)o(as)e(in)g(a)g(separate)i
(package)h(from)d(the)h(\223core,)-6 b(\224)25 b(in)f(PVFS2)f(both)i
(the)0 794 y(serv)o(ers,)g(client)f(API,)e(and)i(k)o(ernel-speci\002c)j
(code)e(are)e(packaged)j(together)-5 b(.)0 998 y Fg(src/common)18
b Fj(holds)25 b(a)e(number)h(of)g(components)i(shared)f(between)g
(clients)g(and)f(serv)o(ers.)30 b(This)23 b(includes:)136
1277 y Fe(\017)46 b Fj(dotconf)26 b(\226)d(a)g(con\002guration)k
(\002le)22 b(parser)136 1465 y Fe(\017)46 b Fj(gen-locks)25
b(\226)c(an)h(implementation)j(of)d(local)g(locks)h(used)g(to)f(pro)o
(vide)h(atomic)f(access)i(to)d(shared)j(structures)g(in)e(the)227
1578 y(presence)k(of)d(threads)136 1765 y Fe(\017)46
b Fj(id-generator)27 b(\226)c(a)h(simple)g(system)g(for)g(generating)i
(unique)f(references)i(\(ids\))d(to)f(data)i(structures)136
1953 y Fe(\017)46 b Fj(llist)24 b(\226)g(a)f(link)o(ed-list)j
(implementation)136 2141 y Fe(\017)46 b Fj(gossip)25
b(\226)f(our)f(logging)j(component)136 2328 y Fe(\017)46
b Fj(quicklist)26 b(\226)d(another)j(link)o(ed-list)g(implementation)
136 2516 y Fe(\017)46 b Fj(quickhash)27 b(\226)c(a)g(hash)h(table)h
(implementation)136 2704 y Fe(\017)46 b Fj(statecomp)26
b(\226)d(the)h(parser)g(for)g(our)g(state)g(machine)h(description)i
(language)f(\(discussed)g(subsequently\))136 2891 y Fe(\017)46
b Fj(misc)26 b(\226)g(lefto)o(v)o(ers,)i(including)h(some)d(state)h
(machine)g(code,)g(con\002g)g(\002le)e(manipulation)k(code,)e(some)f
(string)i(ma-)227 3004 y(nipulation)f(utilities,)e(etc.)0
3283 y Fg(src/apps)20 b Fj(holds)26 b(applications)i(associated)f(with)
e(PVFS2.)k(The)24 b Fg(src/apps/admin)18 b Fj(subdirectory)28
b(holds)e(a)e(col-)0 3396 y(lection)c(of)e(tools)h(for)f(setting)i(up,)
f(monitoring,)i(and)e(manipulating)i(\002les)c(on)i(a)e(PVFS2)f(\002le)
i(system.)27 b Fg(pvfs2-genconfig)0 3509 y Fj(is)33 b(used)h(to)f
(create)i(con\002guration)h(\002les.)57 b Fg(pvfs2-cp)29
b Fj(may)k(be)g(used)h(to)f(mo)o(v)o(e)g(\002les)g(on)g(and)h(of)n(f)f
(PVFS2)e(\002le)i(sys-)0 3622 y(tems.)51 b Fg(pvfs2-ping)26
b Fj(and)31 b Fg(pvfs2-statfs)25 b Fj(may)31 b(be)g(used)g(to)g(check)h
(on)f(the)h(status)g(of)f(a)f(PVFS2)f(\002le)i(system.)0
3735 y Fg(pvfs2-ls)25 b Fj(is)k(an)h Fg(ls)d Fj(implementation)33
b(for)c(PVFS2)e(\002le)i(systems)i(that)f(does)g(not)g(require)h(that)f
(the)f(\002le)g(system)h(be)0 3848 y(mounted.)0 4052
y(The)25 b Fg(src/apps/karma)17 b Fj(subdirectory)29
b(contains)e(a)e(gtk-based)i(gui)f(for)f(monitoring)i(a)e(PVFS2)e
(\002le)h(system)i(in)f(real)0 4165 y(time.)70 b(The)37
b Fg(src/apps/kerne)o(l/)o(lin)o(ux)o(-2)o(.6)30 b Fj(subdirectory)41
b(contains)e(the)f(user)g(space)g(component)i(of)d(the)0
4278 y(PVFS2)16 b(k)o(ernel)k(dri)n(v)o(er)e(implementation,)k(which)d
(matches)g(the)f(k)o(ernel)i(dri)n(v)o(er)e(code)h(found)h(in)e
Fg(src/kernel/lin)o(ux)o(-2)o(.6)p Fj(.)0 4391 y(The)23
b Fg(src/apps/vis)17 b Fj(contains)26 b(e)o(xperimental)g(code)e(for)g
(performance)i(visualization.)0 4595 y Fg(src/client)19
b Fj(holds)26 b(code)f(for)g(the)g(\223system)h(interf)o(ace\224)h
(library)-6 b(,)26 b(the)f(lo)n(west)g(le)n(v)o(el)g(library)h(used)f
(on)g(the)g(client)h(side)0 4708 y(for)i(access.)42 b(This)27
b(is)h(in)f(the)h Fg(src/client/sysi)o(nt)20 b Fj(subdirectory)-6
b(.)45 b(The)27 b Fg(unix-io)c Fj(subdirectory)32 b(is)27
b(no)h(longer)0 4821 y(used.)45 b(Note)29 b(that)g(there)h(is)f(other)h
(code)f(used)h(on)f(the)g(client)h(side:)40 b(the)29
b(R)l(OMIO)f(components)j(\(included)g(in)e(MPICH)0 4934
y(and)24 b(MPICH2\))e(and)i(the)g(k)o(ernel)h(support)h(code)e
(\(located)i(in)d Fg(src/kernel)p Fj(,)18 b(discussed)26
b(subsequently\).)0 5138 y(Note)f(that)g(the)h(R)l(OMIO)d(support)k
(for)e(PVFS2)e(is)i(included)i(in)e(MPICH1,)f(MPICH2,)g(and)h(R)l(OMIO)
f(distrib)n(utions)29 b(and)0 5251 y(is)23 b(not)h(present)i(an)o
(ywhere)e(in)g(this)g(tree.)1905 5619 y(23)p eop end
%%Page: 24 24
TeXDict begin 24 23 bop 0 211 a Fg(src/server)16 b Fj(holds)23
b(code)g(for)f(the)g(pvfs2-serv)o(er)-5 b(.)31 b(The)22
b(request)h(scheduler)h(code)f(is)e(split)i(into)f(its)g(o)n(wn)g
(subdirectory)0 324 y(for)i(no)f(particular)j(reason.)0
528 y Fg(src/proto)f Fj(holds)31 b(code)g(for)f(encoding)i(and)e
(decoding)j(our)d(o)o(v)o(er)n(-the-wire)i(protocol.)50
b(Currently)31 b(the)f(\223encoding)0 641 y(scheme\224)22
b(used)g(is)f(the)h Fd(contig)g Fj(scheme,)g(stored)h(in)e(its)g(o)n
(wn)g(subdirectory)-6 b(.)31 b(This)21 b(encoding)j(scheme)e(really)g
(just)g(puts)g(the)0 754 y(bytes)27 b(into)g(a)f(contiguous)k(re)o
(gion,)e(so)e(it)g(is)g(only)h(good)g(for)g(homogeneous)i(systems)f(or)
e(systems)h(with)g(the)f(same)g(byte)0 867 y(orders)f(where)f(we)e(ha)n
(v)o(e)j(correctly)g(padded)h(all)d(the)h(structures)i(\(which)f(we)d
(probably)k(ha)n(v)o(en')n(t\).)0 1071 y Fg(src/kernel)13
b Fj(holds)19 b(implementations)i(of)d(k)o(ernel)i(support.)29
b(Currently)19 b(there)g(is)f(only)h(one,)h Fg(src/kernel/lin)o(ux)o
(-2)o(.6)p Fj(.)0 1276 y Fg(src/io)g Fj(holds)25 b(enough)g(code)f
(that)h(we')o(ll)e(just)h(talk)g(about)h(it)e(in)h(its)f(o)n(wn)g
(subsection.)0 1616 y Ff(6.3)99 b Fa(src/io)0 1882 y
Fj(This)31 b(directory)i(holds)f(all)f(the)g(code)g(used)h(to)f(mo)o(v)
o(e)f(data)h(across)h(the)f(wire,)i(to)d(store)i(and)f(retrie)n(v)o(e)h
(data)g(from)e(local)0 1995 y(resources,)c(to)d(b)n(uf)n(fer)i(data)f
(on)g(serv)o(ers,)g(and)g(to)g(describe)h(I/O)e(accesses)j(and)e
(physical)h(data)f(distrib)n(ution.)0 2199 y Fg(bmi)19
b Fj(holds)j(the)f(Buf)n(fered)g(Messaging)i(Interf)o(ace)g(\(BMI\))d
(implementations.)32 b(The)20 b(top-le)n(v)o(el)i(directory)h(holds)f
(code)g(for)0 2312 y(mapping)31 b(to)f(the)f(v)n(arious)j(underlying)g
(implementations)h(and)d(de\002ning)h(common)f(data)g(structures.)50
b(Subdirectories)0 2425 y(hold)37 b(implementations)i(for)d(GM)f(\()p
Fg(bmi)p 1361 2425 28 4 v 32 w(gm)p Fj(\),)i(TCP/IP)d(\()p
Fg(bmi)p 2096 2425 V 32 w(tcp)p Fj(\),)j(and)f(In\002niBand)h(using)h
(either)f(the)f(V)-12 b(API)34 b(or)0 2538 y(OpenIB)24
b(API)e(\()p Fg(bmi)p 680 2538 V 31 w(ib)p Fj(\).)0 2742
y Fg(buffer)e Fj(holds)k(the)g(implementation)i(of)d(our)h(internal)h
(b)n(uf)n(fering)g(and)f(caching)h(component.)31 b(At)23
b(the)g(time)g(of)g(writing)0 2855 y(this)h(is)f(not)h(complete)h(and)f
(is)g(not)g(enabled.)0 3059 y Fg(dev)19 b Fj(holds)k(code)f(that)g
(understands)j(ho)n(w)c(to)h(mo)o(v)o(e)f(data)h(through)i(a)d(de)n
(vice)h(\002le)f(that)h(is)g(used)g(by)g(our)f(Linux)h(2.6)g(k)o(ernel)
0 3172 y(module.)30 b(This)23 b(is)g(stored)i(in)f(this)g(directory)i
(because)f(it)e(is)h(hook)o(ed)h(under)g(the)f Fd(job)g
Fj(component.)0 3376 y Fg(job)f Fj(holds)j(the)f(job)h(component.)35
b(This)25 b(component)i(is)e(responsible)j(for)e(pro)o(viding)h(us)e
(with)g(a)g(common)g(mechanism)0 3489 y(for)e(queueing)j(and)d(testing)
i(for)e(completion)i(of)e(operations)j(on)d(a)f(v)n(ariety)j(of)e(dif)n
(ferent)i(resources,)g(including)g(all)f(BMI,)0 3602
y(T)m(ro)o(v)o(e,)f(and)h(the)f(de)n(vice)i(listed)g(abo)o(v)o(e.)0
3806 y Fg(description)18 b Fj(holds)24 b(code)h(used)f(to)g(describe)h
(I/O)e(accesses)j(and)e(physical)h(data)f(distrib)n(utions.)0
4010 y Fg(trove)g Fj(holds)j(implementations)j(of)d(the)g(T)m(ro)o(v)o
(e)f(storage)i(interf)o(ace.)40 b(The)27 b(top-le)n(v)o(el)h(directory)
h(holds)f(code)f(for)g(map-)0 4123 y(ping)33 b(to)e(the)i(v)n(arious)g
(underlying)i(implementations)g(and)d(de\002ning)h(common)f(data)h
(structures.)56 b(Currently)34 b(there)e(is)0 4236 y(only)f(a)f(single)
i(implementation)h(of)d(T)m(ro)o(v)o(e,)h(called)h(DBPF)c(\(for)j(DB)d
(Plus)i(Files\).)50 b(This)30 b(implementation)j(b)n(uilds)f(on)0
4349 y(Berk)o(ele)o(y)25 b(DB)d(and)i(local)g(UNIX)e(\002les)h(for)h
(storing)h(local)g(data.)0 4553 y Fg(flow)31 b Fj(holds)36
b(the)e(Flo)n(w)f(component)j(implementations.)63 b(These)34
b(components)j(are)d(responsible)j(for)e(ferrying)h(data)0
4666 y(between)25 b(dif)n(ferent)g(types)g(of)e Fd(endpoints)p
Fj(.)32 b(V)-10 b(alid)23 b(endpoints)k(include)e(BMI,)d(T)m(ro)o(v)o
(e,)h(memory)-6 b(,)23 b(and)h(the)g(b)n(uf)n(fer)h(cache.)0
5007 y Ff(6.4)99 b Fa(test)0 5272 y Fj(This)23 b(directory)j(holds)f(a)
e(great)i(deal)f(of)f(test)h(code,)g(most)g(of)f(which)h(is)g(useless)h
(to)e(the)h(a)n(v)o(erage)h(user)-5 b(.)1905 5619 y(24)p
eop end
%%Page: 25 25
TeXDict begin 25 24 bop 0 211 a Fg(test/client/sys)o(in)o(t)19
b Fj(has)27 b(a)f(collection)j(of)d(tests)h(we)f(ha)n(v)o(e)g(used)i
(when)e(implementing)j(\(or)d(reimplementing\))0 324
y(v)n(arious)f(system)f(interf)o(ace)i(functions.)0 528
y Fg(test/correctnes)o(s/)o(pt)o(s)17 b Fj(holds)26 b(the)e(PVFS)e(T)-6
b(est)23 b(Suite)h(\(PTS\),)e(a)i(suite)h(designed)i(for)d(testing)i
(the)e(correctness)0 641 y(of)c(PVFS)e(under)k(v)n(arious)g(dif)n
(ferent)h(conditions.)30 b(There)21 b(are)g(actually)h(quite)g(a)e(fe)n
(w)f(tests)j(in)e(here,)i(and)f(the)f(vision)i(is)f(that)0
754 y(we)26 b(will)h(run)g(these)h(in)f(an)g(automated)h(f)o(ashion)h
(relati)n(v)o(ely)g(often)f(\(b)n(ut)g(we)e(aren')n(t)i(there)g(quite)g
(yet\).)39 b(This)27 b(is)g(probably)0 867 y(the)d(second)h(most)f
(useful)g(code)h(\(after)f(pvfs2-client\))k(in)23 b(the)h
Fg(test)d Fj(directory)-6 b(.)0 1208 y Ff(6.5)99 b(State)26
b(machines)f(and)h Fa(statecomp)0 1473 y Fj(The)34 b(PVFS2)d(source)36
b(is)e(hea)n(vily)i(dependent)h(on)d(a)f(state)i(machine)g
(implementation)i(that)e(is)f(included)i(in)e(the)g(tree.)0
1586 y(W)-7 b(e')i(v)o(e)22 b(already)i(noted)f(that)g(the)f(parser)l
(,)h(statecomp,)h(is)e(located)i(in)d(the)i Fg(src/common/sta)o(te)o
(com)o(p)15 b Fj(subdirectory)-6 b(.)0 1699 y(Additional)26
b(code)e(for)g(processing)i(state)f(machines)g(is)e(in)h
Fg(src/common/mis)o(c)p Fj(.)0 1903 y(State)f(machine)h(source)g(is)e
(denoted)j(with)e(a)f Fg(.sm)e Fj(suf)n(\002x.)29 b(These)23
b(are)g(con)l(v)o(erted)i(to)e Fg(.c)e Fj(\002les)h(by)h(statecomp.)30
b(If)23 b(you)g(are)0 2016 y(b)n(uilding)k(out)e(of)f(tree,)h(the)g
Fg(.c)e Fj(\002les)h(will)g(end)h(up)g(in)f(the)h(b)n(uild)h(tree;)g
(otherwise)g(you')o(ll)g(be)e(in)h(the)g(confusing)i(situation)0
2129 y(of)j(ha)n(ving)i(both)f(v)o(ersions)h(in)e(the)g(same)g
(subdirectory)-6 b(.)53 b(If)30 b(modifying)i(these,)g(be)e(careful)i
(to)e(only)h(modify)g(the)f Fg(.sm)0 2242 y Fj(\002les)23
b(\226)g(the)h(corresponding)k Fg(.c)22 b Fj(\002le)h(can)h(be)f(o)o(v)
o(erwritten)i(on)f(reb)n(uilds.)0 2583 y Ff(6.6)99 b(Build)26
b(system)0 2848 y Fj(The)j(b)n(uild)h(system)g(relies)h(on)e(the)g
(\223single)i(mak)o(e\002le\224)f(concept)i(that)d(w)o(as)g(promoted)i
(by)e(someone)i(or)e(another)i(other)0 2961 y(than)24
b(us)g(\(we)f(should)i(ha)n(v)o(e)f(a)f(reference\).)32
b(Ov)o(erall)24 b(we')-5 b(re)24 b(relati)n(v)o(ely)h(happ)o(y)g(with)e
(it.)0 3165 y(W)-7 b(e)28 b(also)i(adopted)h(the)f(Linux)f(2.6)h(k)o
(ernel)g(style)g(of)f(obfuscating)k(the)d(actual)g(compile)g(lines.)47
b(This)29 b(can)h(be)f(irritating)0 3278 y(if)d(you')-5
b(re)28 b(trying)f(to)f(deb)n(ug)i(the)e(b)n(uild)h(system.)37
b(It)26 b(can)g(be)g(turned)i(of)n(f)d(with)h(a)g(\223mak)o(e)g
(V=1\224,)h(which)f(mak)o(es)h(the)f(b)n(uild)0 3391
y(v)o(erbose)f(again.)k(This)23 b(is)g(controlled)j(via)e(a)f(v)n
(ariable)i(called)f Fg(QUIET)p 2238 3391 28 4 v 31 w(COMPILE)19
b Fj(in)k(the)h(mak)o(e\002le,)f(if)g(you)h(are)f(looking)0
3504 y(for)h(ho)n(w)f(this)h(is)f(done.)0 3845 y Ff(6.7)99
b(Out-of-tr)n(ee)27 b(b)n(uilds)0 4110 y Fj(Some)j(of)h(the)g(de)n(v)o
(elopers)j(are)d(really)h(fond)g(of)e(out-of-tree)k(b)n(uilds,)g(while)
e(others)g(aren')n(t.)52 b(Basically)33 b(the)e(idea)h(is)e(to)0
4223 y(perform)j(the)g(b)n(uild)h(in)e(a)g(separate)i(directory)h(so)d
(that)h(the)g(output)h(from)e(the)g(b)n(uild)i(process)g(doesn')n(t)h
(clutter)e(up)g(the)0 4336 y(source)25 b(tree.)0 4540
y(This)e(can)h(be)g(done)g(by)g(e)o(x)o(ecuting)h Fg(configure)19
b Fj(from)k(a)h(separate)h(directory)-6 b(.)31 b(F)o(or)23
b(e)o(xample:)0 4819 y Fg(#)54 b(tar)f(xzf)g(pvfs2-0.0.2.tgz)0
4932 y(#)h(mkdir)e(BUILD-pvfs2)0 5045 y(#)i(cd)g(BUILD-pvfs2)0
5158 y(#)g(../pvfs2/config)o(ur)o(e)1905 5619 y Fj(25)p
eop end
%%Trailer

userdict /end-hook known{end-hook}if
%%EOF
